(function(){"use strict";var e={3212:function(e,t,o){var l=o(5102),a=o(8029),n=o(4525),i=o.n(n),r=o(6690),s=o(9971),c=o(9797),u=o(4963),d={config:{loadingBar:{color:"teal",size:"2px",position:"top"},notify:{position:"bottom-right",progress:!0,color:"teal",icon:"fas fa-info-circle",actions:[{icon:"close",color:"white",round:!0,handler:()=>{}}]}},plugins:{Dialog:r.Z,LoadingBar:s.Z,Notify:c.Z,Cookies:u.Z},iconSet:i()},m=o(9269),p=o(3201);const f=(0,m._)("span",{class:"text-weight-bold"},"Rapo",-1),h={class:"text-caption"},_={key:1,class:"YL__toolbar-input-container row no-wrap"},g={key:2,class:"text-caption text-weight-light text-teal"},b={key:3,class:"text-caption text-weight-light text-red"},y=(0,m._)("br",null,null,-1),w=(0,m._)("strong",null,"Server:",-1),C=(0,m._)("strong",null,"Database:",-1),k={class:"q-ma-lg"};function v(e,t,o,l,a,n){const i=(0,m.up)("q-btn"),r=(0,m.up)("q-icon"),s=(0,m.up)("q-toolbar-title"),c=(0,m.up)("q-space"),u=(0,m.up)("q-input"),d=(0,m.up)("q-tooltip"),v=(0,m.up)("q-toolbar"),x=(0,m.up)("q-header"),q=(0,m.up)("q-item-section"),V=(0,m.up)("q-item-label"),O=(0,m.up)("q-item"),j=(0,m.up)("q-list"),S=(0,m.up)("q-scroll-area"),D=(0,m.up)("q-drawer"),W=(0,m.up)("router-view"),T=(0,m.up)("q-page"),U=(0,m.up)("q-page-container"),L=(0,m.up)("q-layout"),A=(0,m.Q2)("ripple");return(0,m.wg)(),(0,m.j4)(L,{view:"hHh Lpr lff",class:"bg-grey-1 rounded-borders"},{default:(0,m.w5)((()=>[(0,m.Wm)(x,{elevated:"",class:"bg-white text-grey-8 q-py-xs","height-hint":"58"},{default:(0,m.w5)((()=>[(0,m.Wm)(v,null,{default:(0,m.w5)((()=>[(0,m.Wm)(i,{flat:"",dense:"",round:"",onClick:n.toggleLeftDrawer,"aria-label":"Menu",icon:"menu"},null,8,["onClick"]),a.$q.screen.gt.xs?((0,m.wg)(),(0,m.j4)(i,{key:0,flat:"","no-caps":"","no-wrap":"",class:"q-ml-xs",to:{name:"controls"}},{default:(0,m.w5)((()=>[(0,m.Wm)(r,{name:"fas fa-poll",color:"teal",size:"40px"}),(0,m.Wm)(s,{shrink:"",class:"column text-left"},{default:(0,m.w5)((()=>[f,(0,m._)("span",h,(0,p.zw)(e.getEnvInfo&&e.getEnvInfo.instance_name?e.getEnvInfo.instance_name:"")+" "+(0,p.zw)(e.getEnvVersion&&e.getEnvVersion.version?"v."+e.getEnvVersion.version:""),1)])),_:1})])),_:1})):(0,m.kq)("",!0),(0,m.Wm)(c,{class:"col-1"}),e.hideSearch?(0,m.kq)("",!0):((0,m.wg)(),(0,m.iD)("div",_,[(0,m.Wm)(u,{dense:"",outlined:"",square:"",modelValue:n.search,"onUpdate:modelValue":t[0]||(t[0]=e=>n.search=e),placeholder:"Search control name",class:"bg-white col",onKeyup:t[1]||(t[1]=t=>e.updateSearch(n.search))},null,8,["modelValue"]),(0,m.Wm)(i,{class:"YL__toolbar-input-btn",color:"grey-3","text-color":"grey-8",icon:"close",unelevated:"",onClick:t[2]||(t[2]=t=>e.updateSearch(""))})])),(0,m.Wm)(c,{class:"col-2"}),e.getTokenIsValid?((0,m.wg)(),(0,m.iD)("span",g,"Connected")):(0,m.kq)("",!0),e.getTokenIsValid?(0,m.kq)("",!0):((0,m.wg)(),(0,m.iD)("span",b,"Disconnected")),e.getTokenIsValid?((0,m.wg)(),(0,m.j4)(i,{key:4,round:"",flat:"",color:"teal",icon:"fas fa-plug fa-rotate-90",onClick:n.disconnect},{default:(0,m.w5)((()=>[(0,m.Wm)(d,null,{default:(0,m.w5)((()=>[(0,m.Uk)(" Disconnect from:"),y,(0,m._)("div",null,[w,(0,m.Uk)(" "+(0,p.zw)(e.getEnvInfo&&e.getEnvInfo.database_server?e.getEnvInfo.database_server:"N/A"),1)]),(0,m._)("div",null,[C,(0,m.Uk)(" "+(0,p.zw)(e.getEnvInfo&&e.getEnvInfo.database_name?e.getEnvInfo.database_name:"N/A"),1)])])),_:1})])),_:1},8,["onClick"])):(0,m.kq)("",!0)])),_:1})])),_:1}),e.getTokenIsValid?((0,m.wg)(),(0,m.j4)(D,{key:0,modelValue:a.leftDrawerOpen,"onUpdate:modelValue":t[3]||(t[3]=e=>a.leftDrawerOpen=e),"show-if-above":"",bordered:"",class:"bg-grey-2",width:170,breakpoint:500},{default:(0,m.w5)((()=>[(0,m.Wm)(S,{class:"fit"},{default:(0,m.w5)((()=>[(0,m.Wm)(j,{padding:"",class:"menu-list"},{default:(0,m.w5)((()=>[((0,m.wg)(!0),(0,m.iD)(m.HY,null,(0,m.Ko)(a.menuLinks,(e=>(0,m.wy)(((0,m.wg)(),(0,m.j4)(O,{key:e.text,clickable:"",to:e.route},{default:(0,m.w5)((()=>[(0,m.Wm)(q,{avatar:""},{default:(0,m.w5)((()=>[(0,m.Wm)(r,{color:"grey",name:e.icon},null,8,["name"])])),_:2},1024),(0,m.Wm)(q,null,{default:(0,m.w5)((()=>[(0,m.Wm)(V,null,{default:(0,m.w5)((()=>[(0,m.Uk)((0,p.zw)(e.text),1)])),_:2},1024)])),_:2},1024)])),_:2},1032,["to"])),[[A]]))),128))])),_:1})])),_:1})])),_:1},8,["modelValue"])):(0,m.kq)("",!0),(0,m.Wm)(U,null,{default:(0,m.w5)((()=>[(0,m.Wm)(T,{padding:""},{default:(0,m.w5)((()=>[(0,m._)("div",k,[(0,m.Wm)(W)])])),_:1})])),_:1})])),_:1})}o(4719);var x=o(6957),q=o(5999),V={data(){return{leftDrawerOpen:!1,menuLinks:[{icon:"fas fa-chart-line",text:"Controls",route:"/controls"},{icon:"fas fa-tasks",text:"Results",route:"/results"}],$q:(0,q.Z)()}},methods:{...(0,x.nv)(["updateControlCatalogue","updateSearch","removeToken"]),toggleLeftDrawer(){this.leftDrawerOpen=!this.leftDrawerOpen},disconnect(){this.$q.cookies.has("rapo_token")&&this.$q.cookies.remove("rapo_token"),this.removeToken(),this.$router.push("token")}},computed:{...(0,x.Se)(["hideSearch","getSearch","getTokenIsValid","getEnvVersion","getEnvStatus","getEnvInfo"]),search:{get(){return this.getSearch},set(e){return this.updateSearch(e)}}}},O=o(7617),j=o(6384),S=o(7454),D=o(366),W=o(4686),T=o(4633),U=o(8623),L=o(3139),A=o(6931),N=o(4806),E=o(685),I=o(6607),Z=o(2146),Q=o(5246),R=o(2278),P=o(3712),z=o(6974),B=o(8906),M=o(8108),F=o(1410),$=o.n(F);const Y=(0,O.Z)(V,[["render",v]]);var H=Y;$()(V,"components",{QLayout:j.Z,QHeader:S.Z,QToolbar:D.Z,QBtn:W.Z,QIcon:T.Z,QToolbarTitle:U.Z,QSpace:L.Z,QInput:A.Z,QTooltip:N.Z,QDrawer:E.Z,QScrollArea:I.Z,QList:Z.Z,QItem:Q.Z,QItemSection:R.Z,QItemLabel:P.Z,QPageContainer:z.Z,QPage:B.Z}),$()(V,"directives",{Ripple:M.Z});var J=o(2201);const K={class:"row q-gutter-lg"},X={key:0},G={key:0},ee={class:"row items-center q-mb-md"},te=(0,m._)("thead",null,[(0,m._)("tr",{class:"bg-blue-grey-2"},[(0,m._)("th",{class:"text-center",style:{width:"50px"}},"Type"),(0,m._)("th",{class:"text-left"},"Name"),(0,m._)("th",{class:"text-left"},"Description"),(0,m._)("th",{class:"text-left"},"Schedule"),(0,m._)("th",{class:"text-left"})])],-1),oe={class:"text-left",style:{width:"300px"}},le={class:"text-weight-bold text-grey-9",style:{"font-size":"16px"}},ae={class:"text-indigo-4"},ne={class:"text-left",style:{width:"100%"}},ie={style:{"white-space":"normal","word-wrap":"break-word"}},re={class:"row justify-start items-center"},se={style:{width:"100px"}},ce={class:"row justify-start items-center"};function ue(e,t,o,l,a,n){const i=(0,m.up)("q-icon"),r=(0,m.up)("q-avatar"),s=(0,m.up)("q-btn"),c=(0,m.up)("q-select"),u=(0,m.up)("q-input"),d=(0,m.up)("q-tooltip"),f=(0,m.up)("q-chip"),h=(0,m.up)("router-link"),_=(0,m.up)("schedule-present-box"),g=(0,m.up)("q-item-section"),b=(0,m.up)("q-item"),y=(0,m.up)("run-control-dialog"),w=(0,m.up)("q-separator"),C=(0,m.up)("confirm-dialog"),k=(0,m.up)("q-list"),v=(0,m.up)("q-menu"),x=(0,m.up)("q-markup-table"),q=(0,m.up)("q-page"),V=(0,m.Q2)("close-popup");return(0,m.wg)(),(0,m.j4)(q,null,{default:(0,m.w5)((()=>[(0,m._)("h2",K,[(0,m._)("div",null,[(0,m.Uk)((0,p.zw)(n.filteredControlCatalogueLen)+" Control",1),1!=n.filteredControlCatalogueLen?((0,m.wg)(),(0,m.iD)("span",X,"s")):(0,m.kq)("",!0)]),0===a.controlCatalogue.length?((0,m.wg)(),(0,m.iD)("div",G,[(0,m.Wm)(r,{size:"lg",color:"grey-5"},{default:(0,m.w5)((()=>[(0,m.Wm)(i,{name:"fas fa-sync fa-spin"})])),_:1})])):(0,m.kq)("",!0)]),(0,m._)("div",ee,[(0,m.Wm)(s,{class:"col-2 q-mb-md q-pa-sm",size:"lg",color:"primary",icon:"fas fa-plus-circle",label:"New control",to:{name:"edit-control",params:{controlId:"new"}}}),(0,m.Wm)(c,{modelValue:a.filter.type,"onUpdate:modelValue":t[0]||(t[0]=e=>a.filter.type=e),class:"col-2 q-mb-md q-pa-sm",clearable:"",outlined:"","options-dense":"","emit-value":"","map-options":"",options:[{label:"ANL - Analysis",value:"ANL"},{label:"REC - Reconciliation",value:"REC"},{label:"CMP - Comparison",value:"CMP"},{label:"REP - Reporting",value:"REP"}],label:"Control type"},null,8,["modelValue"]),(0,m.Wm)(u,{clearable:"",class:"col q-mb-md q-pa-sm",outlined:"",modelValue:a.filter.control_name,"onUpdate:modelValue":t[1]||(t[1]=e=>a.filter.control_name=e),label:"Control name",maxlength:"45"},null,8,["modelValue"]),(0,m.Wm)(u,{clearable:"",class:"col q-mb-md q-pa-sm",outlined:"",modelValue:a.filter.system,"onUpdate:modelValue":t[2]||(t[2]=e=>a.filter.system=e),label:"System",maxlength:"45"},null,8,["modelValue"]),(0,m.Wm)(c,{modelValue:a.filter.status,"onUpdate:modelValue":t[3]||(t[3]=e=>a.filter.status=e),class:"col q-mb-md q-pa-sm",clearable:"",outlined:"","options-dense":"","emit-value":"","map-options":"",options:[{label:"Active",value:"Y"},{label:"Inactive",value:"N"}],label:"Scheduler status"},null,8,["modelValue"]),(0,m.Wm)(c,{modelValue:a.filter.other_attributes,"onUpdate:modelValue":t[4]||(t[4]=e=>a.filter.other_attributes=e),class:"col-3 q-mb-md q-pa-sm",outlined:"","options-dense":"","emit-value":"","map-options":"",multiple:"","use-chips":"",options:["Preparation SQL","Prerequisite SQL","Completion SQL","Iterations","Case definition","Pre-run hook","No Post-run hook"],label:"Control attributes"},null,8,["modelValue"]),(0,m.Wm)(s,{flat:"",round:"",color:"grey",class:"q-mb-md q-pa-sm",icon:"fas fa-times-circle",onClick:n.clearFilters},{default:(0,m.w5)((()=>[(0,m.Wm)(d,{anchor:"top left",self:"bottom left",offset:[15,10]},{default:(0,m.w5)((()=>[(0,m.Uk)(" Clear filters ")])),_:1})])),_:1},8,["onClick"])]),(0,m._)("div",null,[(0,m.Wm)(x,null,{default:(0,m.w5)((()=>[te,(0,m._)("tbody",null,[((0,m.wg)(!0),(0,m.iD)(m.HY,null,(0,m.Ko)(n.filteredControlCatalogue,(e=>((0,m.wg)(),(0,m.iD)("tr",{key:e.control_id},[(0,m._)("td",null,[(0,m.Wm)(f,{size:"12px","text-color":"white",clickable:"",class:(0,p.C_)([{"bg-pink-8":"ANL"===e.control_type,"bg-teal-8":"REC"===e.control_type,"bg-lime-8":"CMP"===e.control_type,"bg-indigo-6":"REP"===e.control_type},"text-weight-bold"]),onClick:t=>this.filter.type=e.control_type},{default:(0,m.w5)((()=>[(0,m.Uk)((0,p.zw)(e.control_type),1)])),_:2},1032,["class","onClick"])]),(0,m._)("td",oe,[(0,m._)("div",le,(0,p.zw)(e.control_name),1),(0,m.Wm)(h,{to:{name:"edit-control",params:{controlId:e.control_id}},style:{"text-decoration":"none"}},{default:(0,m.w5)((()=>[(0,m._)("div",null,[(0,m._)("small",ae," v."+(0,p.zw)(n.toDateTimeString(e.updated_date)),1)])])),_:2},1032,["to"])]),(0,m._)("td",ne,[(0,m._)("div",ie,(0,p.zw)(e.control_description),1),(0,m._)("div",re,["Y"!==e.status?((0,m.wg)(),(0,m.j4)(f,{key:0,clickable:"",size:"sm",color:"red-4","text-color":"white",icon:"fas fa-clock",onClick:t[5]||(t[5]=e=>a.filter.status="N")},{default:(0,m.w5)((()=>[(0,m.Uk)(" Scheduler inactive ")])),_:1})):(0,m.kq)("",!0),"Y"!=e.need_postrun_hook?((0,m.wg)(),(0,m.j4)(f,{key:1,clickable:"",size:"sm",color:"red-4","text-color":"white",icon:"fas fa-bolt",onClick:t[6]||(t[6]=e=>this.filter.other_attributes.push("No Post-run hook"))},{default:(0,m.w5)((()=>[(0,m.Uk)(" No Post-run hook ")])),_:1})):(0,m.kq)("",!0),e.prerequisite_sql?((0,m.wg)(),(0,m.j4)(f,{key:2,clickable:"",size:"sm",color:"indigo-4","text-color":"white",icon:"fas fa-database",onClick:t[7]||(t[7]=e=>this.filter.other_attributes.push("Prerequisite SQL"))},{default:(0,m.w5)((()=>[(0,m.Uk)(" Prerequisite SQL ")])),_:1})):(0,m.kq)("",!0),e.preparation_sql?((0,m.wg)(),(0,m.j4)(f,{key:3,clickable:"",size:"sm",color:"indigo-4","text-color":"white",icon:"fas fa-database",onClick:t[8]||(t[8]=e=>this.filter.other_attributes.push("Preparation SQL"))},{default:(0,m.w5)((()=>[(0,m.Uk)(" Preparation SQL ")])),_:1})):(0,m.kq)("",!0),e.completion_sql?((0,m.wg)(),(0,m.j4)(f,{key:4,clickable:"",size:"sm",color:"indigo-4","text-color":"white",icon:"fas fa-database",onClick:t[9]||(t[9]=e=>this.filter.other_attributes.push("Completion SQL"))},{default:(0,m.w5)((()=>[(0,m.Uk)(" Completion SQL ")])),_:1})):(0,m.kq)("",!0),"Y"===e.need_prerun_hook?((0,m.wg)(),(0,m.j4)(f,{key:5,clickable:"",size:"sm",color:"indigo-4","text-color":"white",icon:"fas fa-bolt",onClick:t[10]||(t[10]=e=>this.filter.other_attributes.push("Pre-run hook"))},{default:(0,m.w5)((()=>[(0,m.Uk)(" Pre-run hook ")])),_:1})):(0,m.kq)("",!0),e.case_config?((0,m.wg)(),(0,m.j4)(f,{key:6,clickable:"",size:"sm",color:"indigo-4","text-color":"white",icon:"fas fa-tag",onClick:t[11]||(t[11]=e=>this.filter.other_attributes.push("Case definition"))},{default:(0,m.w5)((()=>[(0,m.Uk)(" Case definition ")])),_:1})):(0,m.kq)("",!0),e.iteration_config&&JSON.parse(e.iteration_config).length>0?((0,m.wg)(),(0,m.j4)(f,{key:7,clickable:"",size:"sm",color:"indigo-4","text-color":"white",icon:"fas fa-history",onClick:t[12]||(t[12]=e=>this.filter.other_attributes.push("Iterations"))},{default:(0,m.w5)((()=>[(0,m.Uk)(" +"+(0,p.zw)(JSON.parse(e.iteration_config).length)+" Iteration"+(0,p.zw)(JSON.parse(e.iteration_config).length>1?"s":""),1)])),_:2},1024)):(0,m.kq)("",!0),e.source_type_a?((0,m.wg)(),(0,m.j4)(f,{key:8,clickable:"",color:"green-8","text-color":"white",size:"sm","icon-right":"fas fa-plug fa-rotate-270",onClick:t=>this.filter.system=e.source_type_a,style:{"align-items":"center"}},{default:(0,m.w5)((()=>[(0,m.Uk)((0,p.zw)(e.source_type_a),1)])),_:2},1032,["onClick"])):(0,m.kq)("",!0),e.source_type_a&&e.source_type_b?((0,m.wg)(),(0,m.j4)(i,{key:9,name:"fas fa-wave-square",size:"9px",color:"green-8"})):(0,m.kq)("",!0),e.source_type_b?((0,m.wg)(),(0,m.j4)(f,{key:10,clickable:"",color:"green-8","text-color":"white",size:"sm",icon:"fas fa-plug fa-rotate-90",onClick:t=>this.filter.system=e.source_type_b,style:{"align-items":"center"}},{default:(0,m.w5)((()=>[(0,m.Uk)((0,p.zw)(e.source_type_b),1)])),_:2},1032,["onClick"])):(0,m.kq)("",!0)])]),(0,m._)("td",se,[(0,m._)("div",ce,[(0,m.Wm)(_,{schedule:e.schedule_config,period_back:e.period_back,period_type:e.period_type},null,8,["schedule","period_back","period_type"])])]),(0,m._)("td",null,[(0,m.Wm)(s,{size:"sm",color:"grey-7",round:"",flat:"",icon:"fas fa-ellipsis-v"},{default:(0,m.w5)((()=>[(0,m.Wm)(v,null,{default:(0,m.w5)((()=>[(0,m.Wm)(k,{dense:"",class:"text-no-wrap"},{default:(0,m.w5)((()=>[(0,m.Wm)(y,{control_name:e.control_name},{default:(0,m.w5)((()=>[(0,m.Wm)(b,{dense:"",clickable:"",class:"col items-center"},{default:(0,m.w5)((()=>[(0,m.Wm)(g,null,{default:(0,m.w5)((()=>[(0,m.Uk)(" Run ")])),_:1})])),_:1})])),_:2},1032,["control_name"]),(0,m.Wm)(w),(0,m.Wm)(b,{clickable:"",to:{name:"edit-control",params:{controlId:e.control_id}}},{default:(0,m.w5)((()=>[(0,m.Wm)(g,null,{default:(0,m.w5)((()=>[(0,m.Uk)(" Edit control ")])),_:1})])),_:2},1032,["to"]),(0,m.wy)(((0,m.wg)(),(0,m.j4)(b,{clickable:"",to:{name:"edit-control",params:{controlId:e.control_id},query:{clone:!0}}},{default:(0,m.w5)((()=>[(0,m.Wm)(g,null,{default:(0,m.w5)((()=>[(0,m.Uk)(" Clone control")])),_:1})])),_:2},1032,["to"])),[[V]]),(0,m.Wm)(w),(0,m.Wm)(C,{icon:"fas fa-trash-alt",text:"Recreate result tables? Past discrepancies will be deleted!",action:n.recreateSchema,argument:e.control_name},{default:(0,m.w5)((()=>[(0,m.Wm)(b,{dense:"",clickable:""},{default:(0,m.w5)((()=>[(0,m.Wm)(g,null,{default:(0,m.w5)((()=>[(0,m.Uk)(" Recreate schema ")])),_:1})])),_:1})])),_:2},1032,["action","argument"]),(0,m.Wm)(C,{icon:"fas fa-trash-alt",text:"Do you really want to delete this control?",action:n.deleteControl,argument:e.control_id},{default:(0,m.w5)((()=>[(0,m.Wm)(b,{dense:"",clickable:""},{default:(0,m.w5)((()=>[(0,m.Wm)(g,null,{default:(0,m.w5)((()=>[(0,m.Uk)(" Delete control ")])),_:1})])),_:1})])),_:2},1032,["action","argument"])])),_:2},1024)])),_:2},1024)])),_:2},1024)])])))),128))])])),_:1})])])),_:1})}function de(e,t,o,l,a,n){const i=(0,m.up)("q-chip");return(0,m.wg)(),(0,m.iD)("span",null,[(0,m.Wm)(i,{size:"12px",class:"row items-center",color:"grey-6",icon:"fas fa-history","text-color":"white"},{default:(0,m.w5)((()=>[(0,m.Uk)((0,p.zw)(n.period),1)])),_:1}),(0,m.Wm)(i,{size:"12px",class:(0,p.C_)(["row items-center",{"bg-blue-grey-7":"D"===n.schedule_type,"bg-blue-grey-5":"W"===n.schedule_type,"bg-blue-grey-4":"M"===n.schedule_type,"bg-deep-purple-3":"C"===n.schedule_type,"bg-deep-purple-2 text-grey-9":"X"===n.schedule_type}]),"text-color":"white",icon:"alarm"},{default:(0,m.w5)((()=>[(0,m.Uk)((0,p.zw)(n.schedule_text),1)])),_:1},8,["class"])])}var me={props:["schedule","period_back","period_type"],data(){return{schedule_object:{}}},computed:{period(){return this.period_back+"-"+this.period_type},schedule_type(){return String(this.schedule).indexOf("/")>-1||String(this.schedule).indexOf("-")>-1||(String(this.schedule_object.hour)+String(this.schedule_object.min)+String(this.schedule_object.sec)).indexOf(",")>-1?"X":null==this.schedule_object.hour&&null==this.schedule_object.min&&null==this.schedule_object.sec?"C":this.schedule_object.mday?"M":this.schedule_object.wday?"W":"D"},schedule_time(){return String(this.schedule_object.hour).padStart(2,"0")+":"+String(this.schedule_object.min).padStart(2,"0")+":"+String(this.schedule_object.sec).padStart(2,"0")},schedule_text(){var e=[];const t=["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sun"];if("X"===this.schedule_type){const e=Object.fromEntries(Object.entries(JSON.parse(this.schedule)).filter((([,e])=>null!==e)));return JSON.stringify(e)}if("C"===this.schedule_type)return"Cascade (@control_id="+this.schedule_object.trigger_id+")";if("M"===this.schedule_type){for(const t of this.schedule_object.mday)e.push(t);return"Monthly ("+e.join(", ")+") @ "+this.schedule_time}if("W"===this.schedule_type){for(const o of this.schedule_object.wday)e.push(t[o]);return"Weekly ("+e.join(", ")+") @ "+this.schedule_time}return"Daily @ "+this.schedule_time}},mounted(){this.schedule_object=JSON.parse(this.schedule),this.schedule_object.mday&&(this.schedule_object.mday=String(this.schedule_object.mday).split(",").map((e=>Number(e)))),this.schedule_object.wday&&(this.schedule_object.wday=String(this.schedule_object.wday).split(",").map((e=>Number(e))))}},pe=o(1384);const fe=(0,O.Z)(me,[["render",de]]);var he=fe;$()(me,"components",{QChip:pe.Z});const _e={class:"row no-wrap items-center"},ge={key:0,class:"text-h6 ellipsis"},be={class:"q-pa-md"},ye={key:0},we={key:1},Ce={class:"row items-start"},ke={class:"column"};function ve(e,t,o,l,a,n){const i=(0,m.up)("q-select"),r=(0,m.up)("q-card-section"),s=(0,m.up)("q-date"),c=(0,m.up)("q-toggle"),u=(0,m.up)("q-tooltip"),d=(0,m.up)("q-separator"),f=(0,m.up)("q-btn"),h=(0,m.up)("q-card-actions"),_=(0,m.up)("q-card"),g=(0,m.up)("q-dialog"),b=(0,m.Q2)("close-popup");return(0,m.wg)(),(0,m.iD)(m.HY,null,[(0,m._)("span",{onClick:t[0]||(t[0]=e=>a.visible=!0)},[(0,m.WI)(e.$slots,"default")]),(0,m.Wm)(g,{modelValue:a.visible,"onUpdate:modelValue":t[5]||(t[5]=e=>a.visible=e)},{default:(0,m.w5)((()=>[(0,m.Wm)(_,{class:"column my-card",style:{width:"400px"}},{default:(0,m.w5)((()=>[(0,m.Wm)(r,{class:"col bg-blue-grey-2"},{default:(0,m.w5)((()=>[(0,m._)("div",_e,[o.control_name?((0,m.wg)(),(0,m.iD)("div",ge,(0,p.zw)(o.control_name),1)):(0,m.kq)("",!0),o.control_name?(0,m.kq)("",!0):((0,m.wg)(),(0,m.j4)(i,{key:1,class:"col",outlined:"","use-input":"","hide-selected":"","fill-input":"","input-debounce":"0","emit-value":"","map-options":"",onFilter:n.filterControlCatalogue,modelValue:a.run_control_name,"onUpdate:modelValue":t[1]||(t[1]=e=>a.run_control_name=e),options:a.controlCatalogueList.map((e=>({label:e.control_name,value:e.control_name}))),"selected-value":a.controlCatalogueList[0]?.control_name,label:"Select control to run",style:{"background-color":"white"}},null,8,["onFilter","modelValue","options","selected-value"]))])])),_:1}),(0,m.Wm)(r,{class:"column items-center"},{default:(0,m.w5)((()=>[(0,m._)("div",be,[(0,m.Uk)(" Run for "),a.range?((0,m.wg)(),(0,m.iD)("span",we,"range")):((0,m.wg)(),(0,m.iD)("span",ye,"date")),(0,m.Uk)(": "),(0,m._)("p",null,(0,p.zw)(a.selectDate),1),(0,m._)("div",Ce,[(0,m.Wm)(s,{modelValue:a.selectDate,"onUpdate:modelValue":t[2]||(t[2]=e=>a.selectDate=e),range:a.range,"today-btn":"",mask:"YYYY-MM-DD",color:"teal",flat:""},null,8,["modelValue","range"])]),(0,m._)("div",ke,[(0,m.Wm)(c,{label:"Run for date range",color:"teal","false-value":!1,"true-value":!0,modelValue:a.range,"onUpdate:modelValue":[t[3]||(t[3]=e=>a.range=e),n.rangeChange]},null,8,["modelValue","onUpdate:modelValue"]),(0,m.Wm)(c,{color:"blue",label:"Run in debug mode",modelValue:a.debug_mode,"onUpdate:modelValue":t[4]||(t[4]=e=>a.debug_mode=e)},{default:(0,m.w5)((()=>[(0,m.Wm)(u,{anchor:"top left",self:"bottom left",offset:[0,5]},{default:(0,m.w5)((()=>[(0,m.Uk)(" Leave RAPO_TEMP% tables after execution ")])),_:1})])),_:1},8,["modelValue"])])])])),_:1}),(0,m.Wm)(d),(0,m.Wm)(h,{align:"right"},{default:(0,m.w5)((()=>[(0,m.wy)((0,m.Wm)(f,{flat:"",color:"primary",label:"Run",icon:"fas fa-play",onClick:n.runControl},null,8,["onClick"]),[[b,-1]])])),_:1})])),_:1})])),_:1},8,["modelValue"])],64)}var xe={props:["hook","control_name"],data(){return{visible:!1,range:!1,debug_mode:!1,selectDate:(new Date).toISOString().substring(0,10),controlCatalogueList:[],controlCatalogue:[],run_control_name:"",$q:(0,q.Z)()}},methods:{...(0,x.nv)(["updateControlCatalogue"]),filterControlCatalogue(e,t,o){e.length<0?o():t((()=>{const t=e.toLowerCase();this.controlCatalogueList=this.controlCatalogue.filter((e=>e.control_name.toLowerCase().indexOf(t)>-1))}))},rangeChange(){var e=new Date,t=new Date(e.setDate(e.getDate()-2)).toISOString().substring(0,10),o=new Date(e.setDate(e.getDate()-1)).toISOString().substring(0,10);this.range?this.selectDate={from:o,to:t}:this.selectDate=o},runControl(){if(this.run_control_name)if(this.selectDate){this.$q.loadingBar.start();var e="";e=this.range?"/api/run-control?name="+this.run_control_name+"&date_from="+this.selectDate.from+"&date_to="+this.selectDate.to+"T23:59:59"+(this.debug_mode?"&debug_mode=true":""):"/api/run-control?name="+this.run_control_name+"&date="+this.selectDate+(this.debug_mode?"&debug_mode=true":""),fetch(e,{method:"POST",headers:{Authorization:`Bearer ${this.$store.getters.getToken}`,"Content-Type":"application/json"}}).then((e=>{if(e.ok)return this.$q.notify({type:"positive",message:"Control "+this.run_control_name+" queued for execution"}),e.json();this.$q.notify({type:"negative",message:"Control "+this.run_control_name+" failed"})})).then((()=>{this.$q.loadingBar.stop(),this.hook?(this.hook(),this.visible=!1):this.$router.push({name:"results"})}))}else this.$q.notify({type:"negative",message:"Please select a date"});else this.$q.notify({type:"negative",message:"Please select a control to run"})},open(){this.visible=!0}},async mounted(){this.control_name?this.run_control_name=this.control_name:(this.controlCatalogue=await this.updateControlCatalogue(),this.controlCatalogueList=this.controlCatalogue)}},qe=o(9833),Ve=o(8055),Oe=o(9501),je=o(8720),Se=o(4665),De=o(6362),We=o(4492),Te=o(4333),Ue=o(8819);const Le=(0,O.Z)(xe,[["render",ve]]);var Ae=Le;$()(xe,"components",{QDialog:qe.Z,QCard:Ve.Z,QCardSection:Oe.Z,QSelect:je.Z,QDate:Se.Z,QToggle:De.Z,QTooltip:N.Z,QSeparator:We.Z,QCardActions:Te.Z,QBtn:W.Z}),$()(xe,"directives",{ClosePopup:Ue.Z});const Ne={class:"q-ml-sm"};function Ee(e,t,o,l,a,n){const i=(0,m.up)("q-avatar"),r=(0,m.up)("q-card-section"),s=(0,m.up)("q-btn"),c=(0,m.up)("q-card-actions"),u=(0,m.up)("q-card"),d=(0,m.up)("q-dialog"),f=(0,m.Q2)("close-popup");return(0,m.wg)(),(0,m.iD)(m.HY,null,[(0,m._)("span",{onClick:t[0]||(t[0]=e=>a.visible=!0)},[(0,m.WI)(e.$slots,"default")]),(0,m.Wm)(d,{modelValue:a.visible,"onUpdate:modelValue":t[2]||(t[2]=e=>a.visible=e),persistent:""},{default:(0,m.w5)((()=>[(0,m.Wm)(u,null,{default:(0,m.w5)((()=>[(0,m.Wm)(r,{class:"row items-center"},{default:(0,m.w5)((()=>[(0,m.Wm)(i,{icon:o.icon,color:"primary","text-color":"white"},null,8,["icon"]),(0,m._)("span",Ne,(0,p.zw)(o.text),1)])),_:1}),(0,m.Wm)(c,{align:"right"},{default:(0,m.w5)((()=>[(0,m.wy)((0,m.Wm)(s,{label:"Yes",color:"primary",onClick:t[1]||(t[1]=e=>o.action(o.argument))},null,512),[[f,-1]]),(0,m.wy)((0,m.Wm)(s,{flat:"",label:"No",color:"primary"},null,512),[[f,-1]])])),_:1})])),_:1})])),_:1},8,["modelValue"])],64)}var Ie={props:["action","argument","icon","text"],data(){return{visible:!1,range:!1,selectDate:(new Date).toISOString().substring(0,10),$q:(0,q.Z)()}},methods:{rangeChange(){var e=new Date,t=new Date(e.setDate(e.getDate()-2)).toISOString().substring(0,10),o=new Date(e.setDate(e.getDate()-1)).toISOString().substring(0,10);this.range?this.selectDate={from:o,to:t}:this.selectDate=o},runControl(){this.$q.loadingBar.start();var e="";e=this.range?"/api/run-control?name="+this.control.control_name+"&date_from="+this.selectDate.from+"&date_to="+this.selectDate.to:"/api/run-control?name="+this.control.control_name+"&date="+this.selectDate,fetch(e,{method:"POST",headers:{"Content-Type":"application/json"}}).then((e=>{if(e.ok)return this.$q.notify({type:"positive",message:"Control "+this.control.control_name+" queued for execution"}),e.json();this.$q.notify({type:"negative",message:"Control "+this.control.control_name+" failed"})})).then((()=>{this.$q.loadingBar.stop()}))}}},Ze=o(9393);const Qe=(0,O.Z)(Ie,[["render",Ee]]);var Re=Qe;$()(Ie,"components",{QDialog:qe.Z,QCard:Ve.Z,QCardSection:Oe.Z,QAvatar:Ze.Z,QCardActions:Te.Z,QBtn:W.Z}),$()(Ie,"directives",{ClosePopup:Ue.Z});var Pe={components:{RunControlDialog:Ae,ConfirmDialog:Re,SchedulePresentBox:he},data(){return{isHovered:!1,confirmDialog:!1,$q:(0,q.Z)(),controlCatalogue:[],filter:{control_name:"",type:null,status:null,other_attributes:[]}}},methods:{...(0,x.nv)(["updateControlCatalogue","updateSearch"]),async deleteControl(e){this.$q.loadingBar.start();const t=await fetch("/api/delete-control?control_id="+e,{method:"DELETE",headers:{Authorization:`Bearer ${this.$store.getters.getToken}`,"Content-Type":"application/json"}});if(!t.ok)throw new Error(`API error: ${t.statusText}`);this.controlCatalogue=await this.updateControlCatalogue(),this.$q.loadingBar.stop(),this.$router.push({name:"controls"})},recreateSchema(e){this.$q.loadingBar.start(),fetch("/api/delete-control-output-tables?name="+e,{method:"DELETE",headers:{Authorization:`Bearer ${this.$store.getters.getToken}`,"Content-Type":"application/json"}}).then((t=>{t.ok?this.$q.notify({type:"positive",message:"Schema for "+e+" was deleted. It will be recreated on the next run."}):this.$q.notify({type:"negative",message:"Schema deletion for "+e+"' failed"})})).then((()=>{this.$q.loadingBar.stop()}))},toDateTimeString(e){var t=new Date(e).toISOString("de-DE").substring(0,19).replace("T"," ");return t},clearFilters(){this.filter.control_name=null,this.filter.type=null,this.filter.status=null,this.filter.other_attributes=[],this.filter.system=null}},computed:{...(0,x.Se)(["getSearch"]),filteredControlCatalogue(){const e=this.getSearch;var t=this.controlCatalogue;return(e||this.filter.control_name||this.filter.type||this.filter.status||this.filter.system||this.filter.other_attributes&&this.filter.other_attributes.length>0)&&(t=this.controlCatalogue.filter((t=>{const o=!e||t.control_name?.toUpperCase().includes(e.toUpperCase()),l=!this.filter.control_name||t.control_name?.toUpperCase().includes(this.filter.control_name.toUpperCase()),a=!this.filter.type||t.control_type===this.filter.type,n=!this.filter.status||t.status===this.filter.status,i=!this.filter.system||(t.source_type_a?.toUpperCase().includes(this.filter.system.toUpperCase())||t.source_type_b?.toUpperCase().includes(this.filter.system.toUpperCase())),r=!(this.filter.other_attributes&&this.filter.other_attributes.length>0)||this.filter.other_attributes.some((e=>"Preparation SQL"===e&&t.preparation_sql||"Prerequisite SQL"===e&&t.prerequisite_sql||"Completion SQL"===e&&t.completion_sql||"Iterations"===e&&t.iteration_config&&JSON.parse(t.iteration_config).length>0||"Case definition"===e&&t.case_config||"Pre-run hook"===e&&"Y"===t.need_prerun_hook||"No Post-run hook"===e&&"Y"!==t.need_postrun_hook));return o&&l&&a&&n&&i&&r}))),t},filteredControlCatalogueLen(){return this.filteredControlCatalogue.length}},async mounted(){this.controlCatalogue=await this.updateControlCatalogue()}},ze=o(4982),Be=o(6375);const Me=(0,O.Z)(Pe,[["render",ue]]);var Fe=Me;$()(Pe,"components",{QPage:B.Z,QAvatar:Ze.Z,QIcon:T.Z,QBtn:W.Z,QSelect:je.Z,QInput:A.Z,QTooltip:N.Z,QMarkupTable:ze.Z,QChip:pe.Z,QMenu:Be.Z,QList:Z.Z,QItem:Q.Z,QItemSection:R.Z,QSeparator:We.Z}),$()(Pe,"directives",{ClosePopup:Ue.Z});const $e=e=>((0,m.dD)("data-v-1d3b288c"),e=e(),(0,m.Cn)(),e),Ye={class:"row"},He={class:"q-ma-lg q-gutter-y-md"},Je={class:"row q-gutter-md"},Ke={class:"row q-gutter-md"},Xe={class:"row q-gutter-md"},Ge=$e((()=>(0,m._)("br",null,null,-1))),et=$e((()=>(0,m._)("br",null,null,-1))),tt={class:"row q-my-md q-gutter-md"},ot=$e((()=>(0,m._)("br",null,null,-1))),lt=$e((()=>(0,m._)("br",null,null,-1))),at=$e((()=>(0,m._)("br",null,null,-1))),nt=$e((()=>(0,m._)("br",null,null,-1))),it={class:"row q-my-md q-gutter-md"},rt={class:"q-ma-lg q-gutter-y-md"},st={key:0,class:"row q-gutter-md"},ct={key:1,class:"row q-gutter-md"},ut={class:"row q-gutter-md"},dt=$e((()=>(0,m._)("br",null,null,-1))),mt={key:2,class:"col"},pt=$e((()=>(0,m._)("br",null,null,-1))),ft={class:"row q-my-sm q-gutter-md"},ht={key:0,class:"col"},_t={key:1,class:"col"},gt={key:2,class:"col"},bt={key:2,class:"row q-my-xs q-gutter-md"},yt={class:"col"},wt={key:3,class:"row q-my-xs q-gutter-md"},Ct={class:"col"},kt={class:"col"},vt={key:4,class:"col q-my-lg q-gutter-y-md"},xt={class:"row q-gutter-xs items-center"},qt=$e((()=>(0,m._)("br",null,null,-1))),Vt=$e((()=>(0,m._)("br",null,null,-1))),Ot=$e((()=>(0,m._)("br",null,null,-1))),jt={class:"row q-my-md q-gutter-md"},St={class:"q-ma-lg q-gutter-y-lg"},Dt={class:"row q-gutter-md"},Wt={class:"col"},Tt={class:"row q-gutter-md"},Ut={class:"col"},Lt={class:"row q-gutter-md"},At={class:"col"},Nt={class:"row q-my-md q-gutter-md"},Et={class:"q-ma-lg"},It={class:"column q-gutter-y-xl"},Zt={class:"col"},Qt={class:"col"},Rt={class:"row q-my-md q-gutter-md"},Pt={class:"q-ma-lg q-gutter-y-md"},zt={class:"row q-gutter-md"},Bt={class:"row q-gutter-md"},Mt={key:0,class:"row q-gutter-md"},Ft={class:"row q-gutter-md"},$t={class:"q-ma-lg q-gutter-y-md"},Yt={class:"row q-my-lg"},Ht=$e((()=>(0,m._)("thead",null,[(0,m._)("tr",{class:"bg-blue-grey-2"},[(0,m._)("th",{class:"text-left"},"#"),(0,m._)("th",{class:"text-left"},"Added"),(0,m._)("th",{class:"text-left"},"Start"),(0,m._)("th",{class:"text-left"},"End"),(0,m._)("th",{class:"text-left"},"Runtime"),(0,m._)("th",{class:"text-left"},"PID"),(0,m._)("th",{class:"text-left"},"Run from"),(0,m._)("th",{class:"text-left"},"Run to"),(0,m._)("th",{class:"text-right"},"Fetched A"),(0,m._)("th",{class:"text-right"},"Fetched B"),(0,m._)("th",{class:"text-right"},"Discr. A"),(0,m._)("th",{class:"text-right"},"Discr. B"),(0,m._)("th",{class:"text-right"},"Err. lvl A [%]"),(0,m._)("th",{class:"text-right"},"Err. lvl B [%]"),(0,m._)("th",{class:"text-right"},"PV"),(0,m._)("th",{class:"text-left"},"Status"),(0,m._)("th",{class:"text-left"})])],-1))),Jt={class:"text-blue-grey-7"},Kt={class:"text-grey-7 q-px-sm"},Xt={class:"text-blue-grey-7"},Gt={class:"text-grey-7 q-px-sm"},eo={class:"text-blue-grey-7"},to={class:"text-grey-7 q-px-sm"},oo=["onClick"],lo=["onClick"],ao=["onClick"],no=["onClick"],io={key:1},ro=["onClick"],so={key:1},co=["onClick"],uo={key:1},mo=["onClick"],po={key:1},fo={class:"row q-my-md q-gutter-md"};function ho(e,t,o,a,n,i){const r=(0,m.up)("q-chip"),s=(0,m.up)("q-tab"),c=(0,m.up)("q-tabs"),u=(0,m.up)("q-separator"),d=(0,m.up)("q-input"),f=(0,m.up)("q-badge"),h=(0,m.up)("q-tooltip"),_=(0,m.up)("q-icon"),g=(0,m.up)("q-item-section"),b=(0,m.up)("q-item"),y=(0,m.up)("q-select"),w=(0,m.up)("q-btn"),C=(0,m.up)("q-tab-panel"),k=(0,m.up)("comparison-output-table-box"),v=(0,m.up)("code-box"),x=(0,m.up)("comparison-match-criteria-box"),q=(0,m.up)("comparison-mis-match-criteria-box"),V=(0,m.up)("q-item-label"),O=(0,m.up)("q-card-section"),j=(0,m.up)("q-card"),S=(0,m.up)("reconciliation-match-criteria-box"),D=(0,m.up)("reconciliation-mis-match-criteria-box"),W=(0,m.up)("reconciliation-discrepancy-checkboxes"),T=(0,m.up)("case-config-box"),U=(0,m.up)("schedule-edit-box"),L=(0,m.up)("iteration-config-box"),A=(0,m.up)("q-avatar"),N=(0,m.up)("q-list"),E=(0,m.up)("q-menu"),I=(0,m.up)("q-markup-table"),Z=(0,m.up)("q-tab-panels"),Q=(0,m.up)("q-form"),R=(0,m.up)("q-page"),P=(0,m.Q2)("close-popup");return(0,m.wg)(),(0,m.j4)(R,null,{default:(0,m.w5)((()=>[(0,m._)("div",null,[(0,m._)("h2",Ye,[(0,m.Wm)(r,{size:"xl","text-color":"white",class:(0,p.C_)([{"bg-pink-8":"ANL"===n.control.control_type,"bg-teal-8":"REC"===n.control.control_type,"bg-lime-8":"CMP"===n.control.control_type,"bg-indigo-6":"REP"===n.control.control_type},"text-weight-bold"])},{default:(0,m.w5)((()=>[(0,m.Uk)((0,p.zw)(n.control.control_type),1)])),_:1},8,["class"]),(0,m.Uk)("   "+(0,p.zw)(n.control.control_name?n.control.control_name:"New control"),1)]),(0,m.Wm)(j,null,{default:(0,m.w5)((()=>[(0,m.Wm)(c,{modelValue:n.tab,"onUpdate:modelValue":t[0]||(t[0]=e=>n.tab=e),class:(0,p.C_)(["text-white",{"bg-pink-8":"ANL"===n.control.control_type,"bg-teal-8":"REC"===n.control.control_type,"bg-lime-8":"CMP"===n.control.control_type,"bg-indigo-6":"REP"===n.control.control_type}]),"active-color":"light-blue-1","indicator-color":"light-blue-1",align:"justify","inline-label":"","narrow-indicator":"","no-caps":""},{default:(0,m.w5)((()=>[(0,m.Wm)(s,{name:"main",label:"Main",icon:"fas fa-window-maximize"}),(0,m.Wm)(s,{name:"data",label:"Data and logic",icon:"fas fa-database"}),(0,m.Wm)(s,{name:"sql",label:"SQL Scripts",icon:"fas fa-code"}),"REP"!==n.control.control_type&&"REC"!==n.control.control_type?((0,m.wg)(),(0,m.j4)(s,{key:0,name:"case",label:"Case definition",icon:"fas fa-tag"})):(0,m.kq)("",!0),(0,m.Wm)(s,{name:"scheduler",label:"Scheduler",icon:"fas fa-clock"}),n.control.control_id?((0,m.wg)(),(0,m.j4)(s,{key:1,name:"log",label:"Run log",icon:"fas fa-file-medical-alt"})):(0,m.kq)("",!0)])),_:1},8,["modelValue","class"]),(0,m.Wm)(u),(0,m.Wm)(Q,{onSubmit:i.validateAndSave,onReset:i.cancel,ref:"myForm"},{default:(0,m.w5)((()=>[(0,m.Wm)(Z,{modelValue:n.tab,"onUpdate:modelValue":t[85]||(t[85]=e=>n.tab=e),animated:"","keep-alive":""},{default:(0,m.w5)((()=>[(0,m.Wm)(C,{name:"main"},{default:(0,m.w5)((()=>[(0,m._)("div",He,[(0,m._)("div",Je,[(0,m.Wm)(d,{class:"col",outlined:"",modelValue:n.control.control_name,"onUpdate:modelValue":t[1]||(t[1]=e=>n.control.control_name=e),label:"Control name",maxlength:"45",onKeyup:t[2]||(t[2]=e=>n.control&&n.control.control_name&&(n.control.control_name=n.control.control_name.toUpperCase()))},null,8,["modelValue"]),(0,m.Wm)(d,{class:"col",outlined:"",modelValue:n.control.control_alias,"onUpdate:modelValue":t[3]||(t[3]=e=>n.control.control_alias=e),label:"Control alias"},null,8,["modelValue"]),(0,m.Wm)(y,{class:"col-2",outlined:"",modelValue:n.controlVersion,"onUpdate:modelValue":[t[5]||(t[5]=e=>n.controlVersion=e),i.controlVersionChanged],"use-input":"","hide-selected":"","fill-input":"","input-debounce":"0",label:"Version",options:n.controlVersions,onFilter:i.filterDatasourceList},{prepend:(0,m.w5)((()=>[(0,m.Wm)(_,{name:"fas fa-tag",size:"sm",onClick:[i.showVersionChanges,t[4]||(t[4]=(0,l.iM)((()=>{}),["stop","prevent"]))],class:(0,p.C_)(["cursor-pointer",{"text-deep-orange-4":this.versionChanges.length}])},{default:(0,m.w5)((()=>[n.versionChanges.length?((0,m.wg)(),(0,m.j4)(f,{key:0,rounded:"",size:"xs",color:"green",floating:""},{default:(0,m.w5)((()=>[(0,m.Uk)((0,p.zw)(n.versionChanges.length),1)])),_:1})):(0,m.kq)("",!0),this.versionChanges.length?((0,m.wg)(),(0,m.j4)(h,{key:1,anchor:"top left",self:"bottom left",offset:[0,5]},{default:(0,m.w5)((()=>[(0,m.Uk)(" Show changes ")])),_:1})):(0,m.kq)("",!0)])),_:1},8,["onClick","class"])])),"no-option":(0,m.w5)((()=>[(0,m.Wm)(b,null,{default:(0,m.w5)((()=>[(0,m.Wm)(g,{class:"text-grey"},{default:(0,m.w5)((()=>[(0,m.Uk)(" No past versions ")])),_:1})])),_:1})])),_:1},8,["modelValue","options","onFilter","onUpdate:modelValue"])]),(0,m._)("div",Ke,[(0,m.Wm)(d,{class:"col",modelValue:n.control.control_description,"onUpdate:modelValue":t[6]||(t[6]=e=>n.control.control_description=e),label:"Control description",maxlength:"500",outlined:"",autogrow:""},null,8,["modelValue"])]),(0,m._)("div",Xe,[(0,m.Wm)(y,{class:"col",outlined:"","emit-value":"","map-options":"",modelValue:n.control.control_type,"onUpdate:modelValue":[t[7]||(t[7]=e=>n.control.control_type=e),i.controlTypeChanged],options:[{label:"ANL - Analysis",value:"ANL"},{label:"REC - Reconciliation",value:"REC"},{label:"CMP - Comparison",value:"CMP"},{label:"REP - Report",value:"REP"}],label:"Control type"},null,8,["modelValue","onUpdate:modelValue"]),(0,m.Wm)(y,{class:"col",outlined:"",readonly:"","emit-value":"","map-options":"",modelValue:n.control.control_engine,"onUpdate:modelValue":t[8]||(t[8]=e=>n.control.control_engine=e),options:[{label:"Database",value:"DB"},{label:"Python",value:"PY"}],label:"Control engine"},null,8,["modelValue"]),(0,m.Wm)(y,{class:"col",outlined:"","emit-value":"","map-options":"",modelValue:n.control.need_prerun_hook,"onUpdate:modelValue":t[9]||(t[9]=e=>n.control.need_prerun_hook=e),options:[{label:"Yes",value:"Y"},{label:"No",value:"N"}],label:"Pre-run hook"},{default:(0,m.w5)((()=>[(0,m.Wm)(h,{anchor:"top left",self:"bottom left",offset:[0,5]},{default:(0,m.w5)((()=>[(0,m.Uk)(" If 'Yes' is selected pre-run hook will be executed before the control is started. "),Ge,(0,m.Uk)(" function RAPO_PRERUN_CONTROL_HOOK (in_process_id number) return varchar2 ")])),_:1})])),_:1},8,["modelValue"]),(0,m.Wm)(y,{class:"col",outlined:"","emit-value":"","map-options":"",modelValue:n.control.need_postrun_hook,"onUpdate:modelValue":t[10]||(t[10]=e=>n.control.need_postrun_hook=e),options:[{label:"Yes",value:"Y"},{label:"No",value:"N"}],label:"Post-run hook"},{default:(0,m.w5)((()=>[(0,m.Wm)(h,{anchor:"top left",self:"bottom left",offset:[0,5]},{default:(0,m.w5)((()=>[(0,m.Uk)(" If 'Yes' is selected post-run hook will be executed after control execution completes. "),et,(0,m.Uk)(" procedure RAPO_POSTRUN_CONTROL_HOOK ")])),_:1})])),_:1},8,["modelValue"])]),(0,m._)("div",tt,[(0,m.Wm)(d,{class:"col",modelValue:n.control.parallelism,"onUpdate:modelValue":t[12]||(t[12]=e=>n.control.parallelism=e),modelModifiers:{number:!0},type:"number",outlined:"",label:"Parallelism",min:1,step:1},{prepend:(0,m.w5)((()=>[(0,m.Wm)(_,{name:"fas fa-microchip",onClick:t[11]||(t[11]=(0,l.iM)((()=>{}),["stop","prevent"]))})])),default:(0,m.w5)((()=>[(0,m.Wm)(h,{anchor:"top left",self:"bottom left",offset:[0,5]},{default:(0,m.w5)((()=>[(0,m.Uk)(" Execute in parallel mode (oracle /*PARALLEL*/ hint). "),ot,(0,m.Uk)("Recommended maximum is 4. ")])),_:1})])),_:1},8,["modelValue"]),(0,m.Wm)(d,{class:"col",modelValue:n.control.instance_limit,"onUpdate:modelValue":t[14]||(t[14]=e=>n.control.instance_limit=e),modelModifiers:{number:!0},type:"number",min:1,step:1,outlined:"",label:"Instance limit"},{prepend:(0,m.w5)((()=>[(0,m.Wm)(_,{name:"fas fa-stream",onClick:t[13]||(t[13]=(0,l.iM)((()=>{}),["stop","prevent"]))})])),default:(0,m.w5)((()=>[(0,m.Wm)(h,{anchor:"top left",self:"bottom left",offset:[0,5]},{default:(0,m.w5)((()=>[(0,m.Uk)(" Number of control instances allowed to run in parallel. ")])),_:1})])),_:1},8,["modelValue"]),(0,m.Wm)(d,{class:"col",modelValue:n.control.timeout,"onUpdate:modelValue":t[16]||(t[16]=e=>n.control.timeout=e),modelModifiers:{number:!0},type:"number",outlined:"",label:"Timeout (sec.)"},{prepend:(0,m.w5)((()=>[(0,m.Wm)(_,{name:"fas fas fa-stopwatch",onClick:t[15]||(t[15]=(0,l.iM)((()=>{}),["stop","prevent"]))})])),default:(0,m.w5)((()=>[(0,m.Wm)(h,{anchor:"top left",self:"bottom left",offset:[0,5]},{default:(0,m.w5)((()=>[(0,m.Uk)(" Stop process if runs longer than defined timeout. "),lt,(0,m.Uk)("Leave empty for no timeout. ")])),_:1})])),_:1},8,["modelValue"]),(0,m.Wm)(y,{class:"col",outlined:"","emit-value":"","map-options":"",modelValue:n.withDeleteionDrop,"onUpdate:modelValue":[t[17]||(t[17]=e=>n.withDeleteionDrop=e),i.deletionDropChanged],options:[{label:"Yes",value:"N"},{label:"No, delete on each run",value:"deletion"},{label:"No, drop on each run",value:"drop"}],label:"Keep past results"},{default:(0,m.w5)((()=>[(0,m.Wm)(h,{anchor:"top left",self:"bottom left",offset:[0,5]},{default:(0,m.w5)((()=>[(0,m.Uk)(" Results retention policy"),at,(0,m.Uk)("If 'Yes' is selected define the retention period in the next field."),nt,(0,m.Uk)("If 'No' is selected the results will be deleted or dropped on each run. ")])),_:1})])),_:1},8,["modelValue","onUpdate:modelValue"]),"N"===n.withDeleteionDrop?((0,m.wg)(),(0,m.j4)(d,{key:0,class:"col",modelValue:n.control.days_retention,"onUpdate:modelValue":t[19]||(t[19]=e=>n.control.days_retention=e),modelModifiers:{number:!0},type:"number",outlined:"",label:"Retention period (days)"},{prepend:(0,m.w5)((()=>[(0,m.Wm)(_,{name:"fas fa-trash-alt",onClick:t[18]||(t[18]=(0,l.iM)((()=>{}),["stop","prevent"]))})])),_:1},8,["modelValue"])):(0,m.kq)("",!0)]),(0,m._)("div",it,[(0,m.Wm)(w,{label:"Save",type:"submit",color:"primary"}),(0,m.Wm)(w,{label:"Cancel",type:"reset",color:"primary",flat:"",class:"q-ml-sm"}),(0,m.Wm)(w,{label:"Recreate schema",color:"red",flat:"",class:"q-ml-auto",onClick:t[20]||(t[20]=e=>i.recreateSchema(n.control))})])])])),_:1}),(0,m.Wm)(C,{name:"data"},{default:(0,m.w5)((()=>[(0,m._)("div",rt,["ANL"===n.control.control_type||"REP"===n.control.control_type?((0,m.wg)(),(0,m.iD)("div",st,[(0,m.Wm)(y,{class:"col",outlined:"",modelValue:n.control.source_name,"onUpdate:modelValue":t[22]||(t[22]=e=>n.control.source_name=e),"use-input":"","hide-selected":"","fill-input":"","input-debounce":"0",label:"Datasource",options:n.datasourceListOptions,onFilter:i.filterDatasourceList},{prepend:(0,m.w5)((()=>[(0,m.Wm)(_,{name:"fas fa-table",onClick:t[21]||(t[21]=(0,l.iM)((()=>{}),["stop","prevent"]))})])),"no-option":(0,m.w5)((()=>[(0,m.Wm)(b,null,{default:(0,m.w5)((()=>[(0,m.Wm)(g,{class:"text-grey"},{default:(0,m.w5)((()=>[(0,m.Uk)(" No datasources found ")])),_:1})])),_:1})])),_:1},8,["modelValue","options","onFilter"]),"ANL"===n.control.control_type||"REP"===n.control.control_type?((0,m.wg)(),(0,m.j4)(y,{key:0,class:"col-2",outlined:"",modelValue:n.control.source_date_field,"onUpdate:modelValue":t[24]||(t[24]=e=>n.control.source_date_field=e),label:"Date column",options:n.datasourceDateColumns,clearable:"",behavior:"menu"},{prepend:(0,m.w5)((()=>[(0,m.Wm)(_,{name:"far fa-calendar-alt",onClick:t[23]||(t[23]=(0,l.iM)((()=>{}),["stop","prevent"]))})])),_:1},8,["modelValue","options"])):(0,m.kq)("",!0),(0,m.Wm)(d,{class:"col-2",outlined:"",modelValue:n.control.source_type_a,"onUpdate:modelValue":t[25]||(t[25]=e=>n.control.source_type_a=e),label:"System",maxlength:"90"},null,8,["modelValue"])])):(0,m.kq)("",!0),"REC"===n.control.control_type||"CMP"===n.control.control_type?((0,m.wg)(),(0,m.iD)("div",ct,[(0,m.Wm)(y,{class:"col",outlined:"",modelValue:n.control.source_name_a,"onUpdate:modelValue":t[27]||(t[27]=e=>n.control.source_name_a=e),"use-input":"","hide-selected":"","fill-input":"","input-debounce":"0",label:"Datasource A",options:n.datasourceListOptions,onFilter:i.filterDatasourceList},{prepend:(0,m.w5)((()=>[(0,m.Wm)(_,{name:"fas fa-table",onClick:t[26]||(t[26]=(0,l.iM)((()=>{}),["stop","prevent"]))})])),"no-option":(0,m.w5)((()=>[(0,m.Wm)(b,null,{default:(0,m.w5)((()=>[(0,m.Wm)(g,{class:"text-grey"},{default:(0,m.w5)((()=>[(0,m.Uk)(" No datasources found ")])),_:1})])),_:1})])),_:1},8,["modelValue","options","onFilter"]),"REC"===n.control.control_type?((0,m.wg)(),(0,m.j4)(y,{key:0,class:"col-1",outlined:"",modelValue:n.control.source_key_field_a,"onUpdate:modelValue":t[28]||(t[28]=e=>n.control.source_key_field_a=e),"input-debounce":"0",label:"Key field A",options:[...new Set([...n.datasourceAColumns?n.datasourceAColumns:[],"TAG"])]},null,8,["modelValue","options"])):(0,m.kq)("",!0),"CMP"===n.control.control_type?((0,m.wg)(),(0,m.j4)(y,{key:1,class:"col-2",outlined:"",clearable:"",modelValue:n.control.source_date_field_a,"onUpdate:modelValue":t[30]||(t[30]=e=>n.control.source_date_field_a=e),label:"Date column A",options:n.datasourceADateColumns,behavior:"menu"},{prepend:(0,m.w5)((()=>[(0,m.Wm)(_,{name:"far fa-calendar-alt",onClick:t[29]||(t[29]=(0,l.iM)((()=>{}),["stop","prevent"]))})])),_:1},8,["modelValue","options"])):(0,m.kq)("",!0),(0,m.Wm)(d,{class:"col-1",outlined:"",modelValue:n.control.source_type_a,"onUpdate:modelValue":t[31]||(t[31]=e=>n.control.source_type_a=e),label:"System A",maxlength:"90"},null,8,["modelValue"]),(0,m.Wm)(y,{class:"col",outlined:"",modelValue:n.control.source_name_b,"onUpdate:modelValue":t[33]||(t[33]=e=>n.control.source_name_b=e),"use-input":"","hide-selected":"","fill-input":"","input-debounce":"0",label:"Datasource B",options:n.datasourceListOptions,onFilter:i.filterDatasourceList},{prepend:(0,m.w5)((()=>[(0,m.Wm)(_,{name:"fas fa-table",onClick:t[32]||(t[32]=(0,l.iM)((()=>{}),["stop","prevent"]))})])),"no-option":(0,m.w5)((()=>[(0,m.Wm)(b,null,{default:(0,m.w5)((()=>[(0,m.Wm)(g,{class:"text-grey"},{default:(0,m.w5)((()=>[(0,m.Uk)(" No datasources found ")])),_:1})])),_:1})])),_:1},8,["modelValue","options","onFilter"]),"REC"===n.control.control_type?((0,m.wg)(),(0,m.j4)(y,{key:2,class:"col-1",outlined:"",modelValue:n.control.source_key_field_b,"onUpdate:modelValue":t[34]||(t[34]=e=>n.control.source_key_field_b=e),"input-debounce":"0",label:"Key field B",options:[...new Set([...n.datasourceBColumns?n.datasourceBColumns:[],"TAG"])]},null,8,["modelValue","options"])):(0,m.kq)("",!0),"CMP"===n.control.control_type?((0,m.wg)(),(0,m.j4)(y,{key:3,class:"col-2",outlined:"",clearable:"",modelValue:n.control.source_date_field_b,"onUpdate:modelValue":t[36]||(t[36]=e=>n.control.source_date_field_b=e),label:"Date column B",options:n.datasourceBDateColumns,behavior:"menu"},{prepend:(0,m.w5)((()=>[(0,m.Wm)(_,{name:"far fa-calendar-alt",onClick:t[35]||(t[35]=(0,l.iM)((()=>{}),["stop","prevent"]))})])),_:1},8,["modelValue","options"])):(0,m.kq)("",!0),(0,m.Wm)(d,{class:"col-1",outlined:"",modelValue:n.control.source_type_b,"onUpdate:modelValue":t[37]||(t[37]=e=>n.control.source_type_b=e),label:"System B",maxlength:"90"},null,8,["modelValue"])])):(0,m.kq)("",!0),(0,m._)("div",ut,["ANL"===n.control.control_type||"REP"===n.control.control_type?((0,m.wg)(),(0,m.j4)(y,{key:0,class:"col",outlined:"",clearable:"",modelValue:n.control.output_table_columns,"onUpdate:modelValue":t[39]||(t[39]=e=>n.control.output_table_columns=e),multiple:"",options:n.datasourceColumns,"use-chips":"","stack-label":"",label:"Select output (leave empty for all columns)"},{prepend:(0,m.w5)((()=>[(0,m.Wm)(_,{name:"fas fa-columns",onClick:t[38]||(t[38]=(0,l.iM)((e=>i.populateColumns()),["stop","prevent"]))},{default:(0,m.w5)((()=>[(0,m.Wm)(h,{anchor:"top left",self:"bottom left",offset:[0,5]},{default:(0,m.w5)((()=>[(0,m.Uk)(" Get all columns ")])),_:1})])),_:1})])),_:1},8,["modelValue","options"])):(0,m.kq)("",!0),"ANL"===n.control.control_type||"REP"===n.control.control_type?((0,m.wg)(),(0,m.j4)(d,{key:1,class:"col-2",modelValue:n.control.output_limit,"onUpdate:modelValue":t[41]||(t[41]=e=>n.control.output_limit=e),modelModifiers:{number:!0},type:"number",outlined:"",label:"Output limit"},{prepend:(0,m.w5)((()=>[(0,m.Wm)(_,{name:"fas fa-list-ol",onClick:t[40]||(t[40]=(0,l.iM)((()=>{}),["stop","prevent"]))})])),default:(0,m.w5)((()=>[(0,m.Wm)(h,{anchor:"top left",self:"bottom left",offset:[0,5]},{default:(0,m.w5)((()=>[(0,m.Uk)(" Limit the number of records in the output table. "),dt,(0,m.Uk)("Leave empty for no limit. ")])),_:1})])),_:1},8,["modelValue"])):(0,m.kq)("",!0),"CMP"===n.control.control_type?((0,m.wg)(),(0,m.iD)("div",mt,[(0,m.Wm)(k,{class:"col",modelValue:this.cmpOutputTable,"onUpdate:modelValue":t[42]||(t[42]=e=>this.cmpOutputTable=e),"datasource-a-columns":this.datasourceAColumns,"datasource-b-columns":this.datasourceBColumns},null,8,["modelValue","datasource-a-columns","datasource-b-columns"])])):(0,m.kq)("",!0),"CMP"===n.control.control_type?((0,m.wg)(),(0,m.j4)(d,{key:3,class:"col-2",modelValue:n.control.output_limit,"onUpdate:modelValue":t[44]||(t[44]=e=>n.control.output_limit=e),modelModifiers:{number:!0},type:"number",outlined:"",label:"Output limit"},{prepend:(0,m.w5)((()=>[(0,m.Wm)(_,{name:"fas fa-list-ol",onClick:t[43]||(t[43]=(0,l.iM)((()=>{}),["stop","prevent"]))})])),default:(0,m.w5)((()=>[(0,m.Wm)(h,{anchor:"top left",self:"bottom left",offset:[0,5]},{default:(0,m.w5)((()=>[(0,m.Uk)(" Limit the number of records in the output table. "),pt,(0,m.Uk)("Leave empty for no limit. ")])),_:1})])),_:1},8,["modelValue"])):(0,m.kq)("",!0),"REC"===n.control.control_type?((0,m.wg)(),(0,m.j4)(y,{key:4,class:"col",outlined:"",clearable:"",modelValue:n.control.output_table_a_columns,"onUpdate:modelValue":t[46]||(t[46]=e=>n.control.output_table_a_columns=e),multiple:"",options:n.datasourceAColumns,"use-chips":"","stack-label":"",label:"Select output A-side (leave empty for all columns)"},{prepend:(0,m.w5)((()=>[(0,m.Wm)(_,{name:"fas fa-columns",onClick:t[45]||(t[45]=(0,l.iM)((e=>i.populateColumns("A")),["stop","prevent"]))},{default:(0,m.w5)((()=>[(0,m.Wm)(h,{anchor:"top left",self:"bottom left",offset:[0,5]},{default:(0,m.w5)((()=>[(0,m.Uk)(" Get all columns ")])),_:1})])),_:1})])),_:1},8,["modelValue","options"])):(0,m.kq)("",!0),"REC"===n.control.control_type?((0,m.wg)(),(0,m.j4)(y,{key:5,class:"col",outlined:"",clearable:"",modelValue:n.control.output_table_b_columns,"onUpdate:modelValue":t[48]||(t[48]=e=>n.control.output_table_b_columns=e),multiple:"",options:n.datasourceBColumns,"use-chips":"","stack-label":"",label:"Select output B-side (leave empty for all columns)"},{prepend:(0,m.w5)((()=>[(0,m.Wm)(_,{name:"fas fa-columns",onClick:t[47]||(t[47]=(0,l.iM)((e=>i.populateColumns("B")),["stop","prevent"]))},{default:(0,m.w5)((()=>[(0,m.Wm)(h,{anchor:"top left",self:"bottom left",offset:[0,5]},{default:(0,m.w5)((()=>[(0,m.Uk)(" Get all columns ")])),_:1})])),_:1})])),_:1},8,["modelValue","options"])):(0,m.kq)("",!0)]),(0,m._)("div",ft,["ANL"===n.control.control_type||"REP"===n.control.control_type?((0,m.wg)(),(0,m.iD)("div",ht,[(0,m.Wm)(v,{label:"Filter",modelValue:n.control.source_filter,"onUpdate:modelValue":t[49]||(t[49]=e=>n.control.source_filter=e)},null,8,["modelValue"])])):(0,m.kq)("",!0),"REC"===n.control.control_type||"CMP"===n.control.control_type?((0,m.wg)(),(0,m.iD)("div",_t,[(0,m.Wm)(v,{label:"Filter (Datasource A)",modelValue:n.control.source_filter_a,"onUpdate:modelValue":t[50]||(t[50]=e=>n.control.source_filter_a=e)},null,8,["modelValue"])])):(0,m.kq)("",!0),"REC"===n.control.control_type||"CMP"===n.control.control_type?((0,m.wg)(),(0,m.iD)("div",gt,[(0,m.Wm)(v,{label:"Filter (Datasource B)",modelValue:n.control.source_filter_b,"onUpdate:modelValue":t[51]||(t[51]=e=>n.control.source_filter_b=e)},null,8,["modelValue"])])):(0,m.kq)("",!0)]),"ANL"==n.control.control_type?((0,m.wg)(),(0,m.iD)("div",bt,[(0,m._)("div",yt,[(0,m.Wm)(v,{label:"Mismatch criteria (Error definition)",modelValue:n.control.error_definition,"onUpdate:modelValue":t[52]||(t[52]=e=>n.control.error_definition=e)},null,8,["modelValue"])])])):(0,m.kq)("",!0),"CMP"==n.control.control_type?((0,m.wg)(),(0,m.iD)("div",wt,[(0,m._)("div",Ct,[(0,m.Wm)(x,{class:"col",modelValue:this.ruleConfigObject,"onUpdate:modelValue":t[53]||(t[53]=e=>this.ruleConfigObject=e),"datasource-a-columns":this.datasourceAColumns,"datasource-b-columns":this.datasourceBColumns},null,8,["modelValue","datasource-a-columns","datasource-b-columns"])]),(0,m._)("div",kt,[(0,m.Wm)(q,{class:"col",modelValue:this.ruleErrorObject,"onUpdate:modelValue":t[54]||(t[54]=e=>this.ruleErrorObject=e),"datasource-a-columns":this.datasourceAColumns,"datasource-b-columns":this.datasourceBColumns},null,8,["modelValue","datasource-a-columns","datasource-b-columns"])])])):(0,m.kq)("",!0),"REC"===n.control.control_type?((0,m.wg)(),(0,m.iD)("div",vt,[(0,m.Wm)(j,{class:"q-pa-sm",flat:"",bordered:""},{default:(0,m.w5)((()=>[(0,m.Wm)(g,{class:"q-ma-xs"},{default:(0,m.w5)((()=>[(0,m.Wm)(V,null,{default:(0,m.w5)((()=>[(0,m.Uk)("Time dimension")])),_:1})])),_:1}),(0,m.Wm)(O,{class:"q-gutter-xs"},{default:(0,m.w5)((()=>[(0,m._)("div",xt,[(0,m.Wm)(y,{class:"col-2",outlined:"",modelValue:n.control.source_date_field_a,"onUpdate:modelValue":t[56]||(t[56]=e=>n.control.source_date_field_a=e),label:"Date column A",options:n.datasourceADateColumns,behavior:"menu"},{prepend:(0,m.w5)((()=>[(0,m.Wm)(_,{name:"far fa-calendar-alt",onClick:t[55]||(t[55]=(0,l.iM)((()=>{}),["stop","prevent"]))})])),_:1},8,["modelValue","options"]),(0,m.Wm)(_,{class:"q-py-md",name:"fas fa-equals",size:"20px",color:"blue-grey-3"}),(0,m.Wm)(y,{class:"col-2",outlined:"",modelValue:n.control.source_date_field_b,"onUpdate:modelValue":t[58]||(t[58]=e=>n.control.source_date_field_b=e),label:"Date column B",options:n.datasourceBDateColumns,behavior:"menu"},{prepend:(0,m.w5)((()=>[(0,m.Wm)(_,{name:"far fa-calendar-alt",onClick:t[57]||(t[57]=(0,l.iM)((()=>{}),["stop","prevent"]))})])),_:1},8,["modelValue","options"]),n.control.source_date_field_a&&n.control.source_date_field_b?((0,m.wg)(),(0,m.j4)(_,{key:0,class:"q-py-md",name:"fas fa-circle",size:"15px",color:"blue-grey-3"})):(0,m.kq)("",!0),n.control.source_date_field_a&&n.control.source_date_field_b?((0,m.wg)(),(0,m.j4)(d,{key:1,outlined:"",class:"col",modelValue:n.ruleConfigObject.time_tolerance_from,"onUpdate:modelValue":[t[60]||(t[60]=e=>n.ruleConfigObject.time_tolerance_from=e),i.ReconciliationTimeFromToleranceChanged],modelModifiers:{number:!0},type:"number",label:"Time tolerance from"},{prepend:(0,m.w5)((()=>[(0,m.Wm)(_,{name:"fas fa-long-arrow-alt-left",onClick:t[59]||(t[59]=(0,l.iM)((()=>{}),["stop","prevent"]))})])),default:(0,m.w5)((()=>[(0,m.Wm)(h,{anchor:"top left",self:"bottom left",offset:[0,5]},{default:(0,m.w5)((()=>[(0,m.Uk)(" Lower timestamp tolerance value in seconds (match if A minus B timestamp is greater than this value in seconds) ")])),_:1})])),_:1},8,["modelValue","onUpdate:modelValue"])):(0,m.kq)("",!0),n.control.source_date_field_a&&n.control.source_date_field_b?((0,m.wg)(),(0,m.j4)(d,{key:2,outlined:"",class:"col",modelValue:n.ruleConfigObject.time_tolerance_to,"onUpdate:modelValue":[t[62]||(t[62]=e=>n.ruleConfigObject.time_tolerance_to=e),i.ReconciliationTimeToToleranceChanged],modelModifiers:{number:!0},type:"number",label:"Time tolerance to"},{prepend:(0,m.w5)((()=>[(0,m.Wm)(_,{name:"fas fa-long-arrow-alt-right",onClick:t[61]||(t[61]=(0,l.iM)((()=>{}),["stop","prevent"]))})])),default:(0,m.w5)((()=>[(0,m.Wm)(h,{anchor:"top left",self:"bottom left",offset:[0,5]},{default:(0,m.w5)((()=>[(0,m.Uk)(" Upper timestamp tolerance value in seconds (match if A minus B timestamp is lower than this value in seconds) ")])),_:1})])),_:1},8,["modelValue","onUpdate:modelValue"])):(0,m.kq)("",!0),n.control.source_date_field_a&&n.control.source_date_field_b?((0,m.wg)(),(0,m.j4)(_,{key:3,class:"q-py-md",name:"fas fa-circle",size:"15px",color:"blue-grey-3"})):(0,m.kq)("",!0),n.control.source_date_field_a&&n.control.source_date_field_b?((0,m.wg)(),(0,m.j4)(d,{key:4,outlined:"",class:"col",modelValue:n.ruleConfigObject.time_shift_from,"onUpdate:modelValue":[t[64]||(t[64]=e=>n.ruleConfigObject.time_shift_from=e),i.ReconciliationTimeShiftFromChanged],modelModifiers:{number:!0},type:"number",label:"Time shift from"},{prepend:(0,m.w5)((()=>[(0,m.Wm)(_,{name:"far fa-clock",onClick:t[63]||(t[63]=(0,l.iM)((()=>{}),["stop","prevent"]))})])),default:(0,m.w5)((()=>[(0,m.Wm)(h,{anchor:"top right",self:"bottom right",offset:[0,5]},{default:(0,m.w5)((()=>[(0,m.Uk)(" Lower timeshift tolerance value in seconds "),qt,(0,m.Uk)(' (if A minus B is between this value and "Time tolerance from" - output as mismatch) ')])),_:1})])),_:1},8,["modelValue","onUpdate:modelValue"])):(0,m.kq)("",!0),n.control.source_date_field_a&&n.control.source_date_field_b?((0,m.wg)(),(0,m.j4)(d,{key:5,outlined:"",class:"col",modelValue:n.ruleConfigObject.time_shift_to,"onUpdate:modelValue":[t[66]||(t[66]=e=>n.ruleConfigObject.time_shift_to=e),i.ReconciliationTimeShiftToChanged],modelModifiers:{number:!0},type:"number",label:"Time shift to"},{prepend:(0,m.w5)((()=>[(0,m.Wm)(_,{name:"far fa-clock",onClick:t[65]||(t[65]=(0,l.iM)((()=>{}),["stop","prevent"]))})])),default:(0,m.w5)((()=>[(0,m.Wm)(h,{anchor:"top right",self:"bottom right",offset:[0,5]},{default:(0,m.w5)((()=>[(0,m.Uk)(" Upper timeshift tolerance value in seconds "),Vt,(0,m.Uk)(' (if A minus B is between "Time tolerance to" and this value - output as mismatch) ')])),_:1})])),_:1},8,["modelValue","onUpdate:modelValue"])):(0,m.kq)("",!0)])])),_:1})])),_:1}),(0,m.Wm)(S,{class:"col",modelValue:this.ruleConfigObject,"onUpdate:modelValue":t[67]||(t[67]=e=>this.ruleConfigObject=e),"datasource-a-columns":this.datasourceAColumns,"datasource-b-columns":this.datasourceBColumns},null,8,["modelValue","datasource-a-columns","datasource-b-columns"]),(0,m.Wm)(D,{class:"col",modelValue:this.ruleConfigObject,"onUpdate:modelValue":t[68]||(t[68]=e=>this.ruleConfigObject=e),"datasource-a-columns":this.datasourceANumColumns,"datasource-b-columns":this.datasourceBNumColumns},null,8,["modelValue","datasource-a-columns","datasource-b-columns"]),(0,m.Wm)(W,{class:"col",control:n.control,modelValue:this.ruleConfigObject,"onUpdate:modelValue":t[69]||(t[69]=e=>this.ruleConfigObject=e)},null,8,["control","modelValue"]),Ot])):(0,m.kq)("",!0),(0,m._)("div",jt,[(0,m.Wm)(w,{label:"Save",type:"submit",color:"primary"}),(0,m.Wm)(w,{label:"Cancel",type:"reset",color:"primary",flat:"",class:"q-ml-sm"})])])])),_:1}),(0,m.Wm)(C,{name:"sql"},{default:(0,m.w5)((()=>[(0,m._)("div",St,[(0,m._)("div",Dt,[(0,m._)("div",Wt,[(0,m.Wm)(v,{label:"Preparation SQL",modelValue:n.control.preparation_sql,"onUpdate:modelValue":t[70]||(t[70]=e=>n.control.preparation_sql=e)},null,8,["modelValue"]),(0,m.Wm)(h,{anchor:"top left",self:"bottom left",offset:[-120,-20]},{default:(0,m.w5)((()=>[(0,m.Uk)(" Preparation SQL is executed before the control is started. It can be used to prepare the data for the control. See the enclosed examples. ")])),_:1})])]),(0,m._)("div",Tt,[(0,m._)("div",Ut,[(0,m.Wm)(v,{label:"Prerequisite SQL",modelValue:n.control.prerequisite_sql,"onUpdate:modelValue":t[71]||(t[71]=e=>n.control.prerequisite_sql=e)},null,8,["modelValue"]),(0,m.Wm)(h,{anchor:"top left",self:"bottom left",offset:[-120,-20]},{default:(0,m.w5)((()=>[(0,m.Uk)(" Prerequisite SQL is executed before the control is started. If the number returned is 0 the control will be terminated. See the enclosed positive and negative examples. ")])),_:1})])]),(0,m._)("div",Lt,[(0,m._)("div",At,[(0,m.Wm)(v,{label:"Completion SQL",modelValue:n.control.completion_sql,"onUpdate:modelValue":t[72]||(t[72]=e=>n.control.completion_sql=e)},null,8,["modelValue"]),(0,m.Wm)(h,{anchor:"top left",self:"bottom left",offset:[-120,-20]},{default:(0,m.w5)((()=>[(0,m.Uk)(" Completion SQL is executed after the control is finished. It can be used to clean-up data, log results or execute chain of controls. See the enclosed examples. ")])),_:1})])]),(0,m._)("div",Nt,[(0,m.Wm)(w,{label:"Save",type:"submit",color:"primary"}),(0,m.Wm)(w,{label:"Cancel",type:"reset",color:"primary",flat:"",class:"q-ml-sm"})])])])),_:1}),(0,m.Wm)(C,{name:"case"},{default:(0,m.w5)((()=>[(0,m._)("div",Et,[(0,m._)("div",It,[(0,m._)("div",Zt,[(0,m.Wm)(T,{class:"col",modelValue:this.caseConfigObject,"onUpdate:modelValue":t[73]||(t[73]=e=>this.caseConfigObject=e)},null,8,["modelValue"])]),(0,m._)("div",Qt,[(0,m.Wm)(v,{label:"Case mapping",modelValue:n.control.case_definition,"onUpdate:modelValue":t[74]||(t[74]=e=>n.control.case_definition=e)},null,8,["modelValue"]),(0,m.Wm)(h,{anchor:"top left",self:"bottom left",offset:[0,5]},{default:(0,m.w5)((()=>[(0,m.Uk)(" Use simple SQL case structure to define which discrepancies will be mapped to which Case IDs defined above. See the enclosed example. ")])),_:1})])]),(0,m._)("div",Rt,[(0,m.Wm)(w,{label:"Save",type:"submit",color:"primary"}),(0,m.Wm)(w,{label:"Cancel",type:"reset",color:"primary",flat:"",class:"q-ml-sm"})])])])),_:1}),(0,m.Wm)(C,{name:"scheduler"},{default:(0,m.w5)((()=>[(0,m._)("div",Pt,[(0,m._)("div",zt,[(0,m.Wm)(y,{class:"col-2",outlined:"","emit-value":"","map-options":"",modelValue:n.control.status,"onUpdate:modelValue":t[75]||(t[75]=e=>n.control.status=e),options:[{label:"Active",value:"Y"},{label:"Inactive",value:"N"}],label:"Scheduler status"},null,8,["modelValue"]),(0,m.Wm)(U,{class:"col",modelValue:n.scheduleObject,"onUpdate:modelValue":t[76]||(t[76]=e=>n.scheduleObject=e)},null,8,["modelValue"])]),(0,m._)("div",Bt,[(0,m.Wm)(d,{outlined:"",class:"col-2",modelValue:n.control.period_back,"onUpdate:modelValue":t[78]||(t[78]=e=>n.control.period_back=e),modelModifiers:{number:!0},type:"number",label:"Periods back"},{prepend:(0,m.w5)((()=>[(0,m.Wm)(_,{name:"fas fa-history",onClick:t[77]||(t[77]=(0,l.iM)((()=>{}),["stop","prevent"]))})])),_:1},8,["modelValue"]),(0,m.Wm)(d,{class:"col-2",modelValue:n.control.period_number,"onUpdate:modelValue":t[80]||(t[80]=e=>n.control.period_number=e),modelModifiers:{number:!0},type:"number",outlined:"",label:"Number of periods"},{prepend:(0,m.w5)((()=>[(0,m.Wm)(_,{name:"fas fa-calendar-day",onClick:t[79]||(t[79]=(0,l.iM)((()=>{}),["stop","prevent"]))})])),_:1},8,["modelValue"]),(0,m.Wm)(y,{class:"col-2",outlined:"","emit-value":"","map-options":"",modelValue:n.control.period_type,"onUpdate:modelValue":t[81]||(t[81]=e=>n.control.period_type=e),options:[{label:"Day",value:"D"},{label:"Week",value:"W"},{label:"Month",value:"M"}],label:"Period type"},null,8,["modelValue"])]),"C"!==i.scheduleType?((0,m.wg)(),(0,m.iD)("div",Mt,[(0,m.Wm)(L,{class:"col",modelValue:n.iterationConfigObject,"onUpdate:modelValue":t[82]||(t[82]=e=>n.iterationConfigObject=e),pb:this.control.period_back},null,8,["modelValue","pb"])])):(0,m.kq)("",!0),(0,m._)("div",Ft,[(0,m.Wm)(w,{label:"Save",type:"submit",color:"primary"}),(0,m.Wm)(w,{label:"Cancel",type:"reset",color:"primary",flat:"",class:"q-ml-sm"})])])])),_:1}),(0,m.Wm)(C,{name:"log"},{default:(0,m.w5)((()=>[(0,m._)("div",$t,[(0,m._)("div",Yt,[(0,m.Wm)(d,{class:"col-1",modelValue:n.log_days_back,"onUpdate:modelValue":[t[84]||(t[84]=e=>n.log_days_back=e),i.updateLogDaysBack],modelModifiers:{number:!0},type:"number",outlined:"",label:"Days back",min:1,max:365,step:1},{prepend:(0,m.w5)((()=>[(0,m.Wm)(_,{name:"fas fa-history",onClick:t[83]||(t[83]=(0,l.iM)((()=>{}),["stop","prevent"]))})])),_:1},8,["modelValue","onUpdate:modelValue"])]),(0,m.Wm)(I,{flat:"",dense:""},{default:(0,m.w5)((()=>[Ht,(0,m._)("tbody",null,[((0,m.wg)(!0),(0,m.iD)(m.HY,null,(0,m.Ko)(n.controlLogs,((e,t)=>((0,m.wg)(),(0,m.iD)("tr",{class:"cursor-pointer",key:e.process_id},[(0,m._)("td",{class:(0,p.C_)(["text-left",{"new-day-separator":i.newDaySeparator(t)}])},(0,p.zw)(t+1)+".  ",3),(0,m._)("td",{class:(0,p.C_)(["text-left",{"new-day-separator":i.newDaySeparator(t)}])},[(0,m._)("div",Jt,[(0,m._)("strong",null,(0,p.zw)(i.toDateString(e.added)),1),(0,m._)("small",Kt,(0,p.zw)(i.toTimeString(e.added)),1)])],2),(0,m._)("td",{class:(0,p.C_)(["text-left",{"new-day-separator":i.newDaySeparator(t)}])},[(0,m._)("div",Xt,[(0,m._)("strong",null,(0,p.zw)(i.toDateString(e.start_date)),1),(0,m._)("small",Gt,(0,p.zw)(i.toTimeString(e.start_date)),1)])],2),(0,m._)("td",{class:(0,p.C_)(["text-left",{"new-day-separator":i.newDaySeparator(t)}])},[(0,m._)("div",eo,[(0,m._)("strong",null,(0,p.zw)(i.toDateString(e.end_date)),1),(0,m._)("small",to,(0,p.zw)(i.toTimeString(e.end_date)),1)])],2),(0,m._)("td",{class:(0,p.C_)(["text-right",{"new-day-separator":i.newDaySeparator(t)}])},(0,p.zw)(e.end_date&&e.start_date?i.round((new Date(e.end_date)-new Date(e.start_date))/6e4,1):"0")+" min ",3),(0,m._)("td",{class:(0,p.C_)(["text-left text-weight-bold text-blue-grey-7",{"new-day-separator":i.newDaySeparator(t)}])},(0,p.zw)(e.process_id),3),(0,m._)("td",{class:(0,p.C_)(["text-left",{"new-day-separator":i.newDaySeparator(t)}])},(0,p.zw)(i.toDateString(e.date_from)),3),(0,m._)("td",{class:(0,p.C_)(["text-left",{"new-day-separator":i.newDaySeparator(t)}])},(0,p.zw)(i.toDateString(e.date_to)),3),(0,m._)("td",{class:(0,p.C_)(["text-right",{"new-day-separator":i.newDaySeparator(t)}])},[Number(e.fetched_number_a)+Number(e.fetched_number)>0&&"REP"===n.control.control_type?((0,m.wg)(),(0,m.iD)("span",{key:0,class:"cursor-pointer text-red",onClick:t=>i.copyToClipboard(e,"A")},(0,p.zw)((Number(e.fetched_number_a)+Number(e.fetched_number)).toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:0})),9,oo)):((0,m.wg)(),(0,m.iD)("span",{key:1,onClick:t=>i.copyFetchSQLToClipboard(e,"ANL"==this.control.control_type?"T":"A")},(0,p.zw)((Number(e.fetched_number_a)+Number(e.fetched_number)).toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:0})),9,lo))],2),(0,m._)("td",{class:(0,p.C_)(["text-right",{"new-day-separator":i.newDaySeparator(t)}])},[(0,m._)("span",{onClick:t=>i.copyFetchSQLToClipboard(e,"ANL"==this.control.control_type?"T":"B")},(0,p.zw)(Number(e.fetched_number_b).toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:0})),9,ao)],2),(0,m._)("td",{class:(0,p.C_)(["text-right",{"new-day-separator":i.newDaySeparator(t)}])},[Number(e.error_number_a)+Number(e.error_number)>0?((0,m.wg)(),(0,m.iD)("span",{key:0,class:"cursor-pointer text-red",onClick:t=>i.copyToClipboard(e,"A")},(0,p.zw)((Number(e.error_number_a)+Number(e.error_number)).toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:0})),9,no)):((0,m.wg)(),(0,m.iD)("span",io,(0,p.zw)((Number(e.error_number_a)+Number(e.error_number)).toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:0})),1))],2),(0,m._)("td",{class:(0,p.C_)(["text-right",{"new-day-separator":i.newDaySeparator(t)}])},[e.error_number_b>0?((0,m.wg)(),(0,m.iD)("span",{key:0,class:"cursor-pointer text-red",onClick:t=>i.copyToClipboard(e,"B")},(0,p.zw)(Number(e.error_number_b).toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:0})),9,ro)):((0,m.wg)(),(0,m.iD)("span",so,(0,p.zw)(Number(e.error_number_b).toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:0})),1))],2),(0,m._)("td",{class:(0,p.C_)(["text-right",{"new-day-separator":i.newDaySeparator(t)}])},[Number(e.error_level_a)+Number(e.error_level)>0?((0,m.wg)(),(0,m.iD)("span",{key:0,class:"cursor-pointer text-red",onClick:t=>i.copyToClipboard(e,"A")},(0,p.zw)((Number(e.error_level_a)+Number(e.error_level)).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}))+"% ",9,co)):((0,m.wg)(),(0,m.iD)("span",uo,(0,p.zw)((Number(e.error_level_a)+Number(e.error_level)).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}))+"% ",1))],2),(0,m._)("td",{class:(0,p.C_)(["text-right",{"new-day-separator":i.newDaySeparator(t)}])},[e.error_level_b>0?((0,m.wg)(),(0,m.iD)("span",{key:0,class:"cursor-pointer text-red",onClick:t=>i.copyToClipboard(e,"B")},(0,p.zw)(Number(e.error_level_b).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}))+"% ",9,mo)):((0,m.wg)(),(0,m.iD)("span",po,(0,p.zw)(Number(e.error_level_b).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}))+"% ",1))],2),(0,m._)("td",{class:(0,p.C_)(["text-right",{"new-day-separator":i.newDaySeparator(t)}])},[0==e.prerequisite_value?((0,m.wg)(),(0,m.j4)(_,{key:0,class:"cursor-pointer text-red",name:"fas fa-stop"},{default:(0,m.w5)((()=>[(0,m.Wm)(h,{anchor:"top left",self:"bottom left",offset:[0,5]},{default:(0,m.w5)((()=>[(0,m.Uk)(" Prerequisite SQL value is 0 ")])),_:1})])),_:1})):(0,m.kq)("",!0),e.prerequisite_value?((0,m.wg)(),(0,m.j4)(_,{key:1,class:"cursor-pointer text-green",name:"fas fa-play"},{default:(0,m.w5)((()=>[(0,m.Wm)(h,{anchor:"top left",self:"bottom left",offset:[0,5]},{default:(0,m.w5)((()=>[(0,m.Uk)(" Prerequisite SQL value is "+(0,p.zw)(e.prerequisite_value),1)])),_:2},1024)])),_:2},1024)):(0,m.kq)("",!0)],2),(0,m._)("td",{class:(0,p.C_)(["text-left",{"new-day-separator":i.newDaySeparator(t)}])},[(0,m.Wm)(r,{class:"cursor-pointer"},{default:(0,m.w5)((()=>["I"==e.status?((0,m.wg)(),(0,m.j4)(A,{key:0,icon:"fas fa-plus-circle",color:"indigo","text-color":"white"})):(0,m.kq)("",!0),"W"==e.status?((0,m.wg)(),(0,m.j4)(A,{key:1,icon:"fas fa-pause-circle",color:"amber-7","text-color":"white"})):(0,m.kq)("",!0),"S"==e.status?((0,m.wg)(),(0,m.j4)(A,{key:2,icon:"fas fa-play-circle",color:"blue","text-color":"white"})):(0,m.kq)("",!0),"P"==e.status?((0,m.wg)(),(0,m.j4)(A,{key:3,icon:"fas fa-sync fa-spin",color:"blue","text-color":"white"})):(0,m.kq)("",!0),"F"==e.status?((0,m.wg)(),(0,m.j4)(A,{key:4,icon:"fas fa-circle-notch fa-spin",color:"blue","text-color":"white"})):(0,m.kq)("",!0),"D"==e.status?((0,m.wg)(),(0,m.j4)(A,{key:5,icon:"fas fa-check-circle",color:"green","text-color":"white"})):(0,m.kq)("",!0),"C"==e.status?((0,m.wg)(),(0,m.j4)(A,{key:6,icon:"fas fa-times-circle",color:"purple-3","text-color":"white"})):(0,m.kq)("",!0),"E"==e.status?((0,m.wg)(),(0,m.j4)(A,{key:7,icon:"fas fa-exclamation-circle",color:"deep-orange","text-color":"white"})):(0,m.kq)("",!0),"X"==e.status?((0,m.wg)(),(0,m.j4)(A,{key:8,icon:"fas fa-times-circle",color:"grey","text-color":"white"})):(0,m.kq)("",!0),e.status?(0,m.kq)("",!0):((0,m.wg)(),(0,m.j4)(A,{key:9,icon:"fas fa-times-circle",color:"deep-purple-3","text-color":"white"})),(0,m.Uk)(" "+(0,p.zw)("I"===e.status?"Initiated":"W"===e.status?"Waiting":"S"===e.status?"Started":"P"==e.status?"Running":"F"===e.status?"Finishing":"D"===e.status?"Done":"E"===e.status?"Error":"C"===e.status?"Canceled":"X"===e.status?"Revoked":e.status?"Unknown":"Void"),1)])),_:2},1024)],2),(0,m._)("td",{class:(0,p.C_)(["text-left",{"new-day-separator":i.newDaySeparator(t)}]),style:{width:"50px"}},[(0,m.Wm)(w,{size:"sm",color:"grey-7",round:"",flat:"",icon:"fas fa-ellipsis-v"},{default:(0,m.w5)((()=>[(0,m.Wm)(E,null,{default:(0,m.w5)((()=>[(0,m.Wm)(N,{dense:"",class:"text-no-wrap"},{default:(0,m.w5)((()=>[(0,m.wy)(((0,m.wg)(),(0,m.j4)(b,{dense:"",clickable:"",onClick:t=>i.reRun(e)},{default:(0,m.w5)((()=>[(0,m.Wm)(g,null,{default:(0,m.w5)((()=>[(0,m.Uk)(" Re-run ")])),_:1})])),_:2},1032,["onClick"])),[[P]]),(0,m.Wm)(u),"F"==e.status||"I"==e.status||"W"==e.status||"S"==e.status||"P"==e.status?(0,m.wy)(((0,m.wg)(),(0,m.j4)(b,{key:0,dense:"",clickable:"",class:"col items-center",onClick:t=>i.showCancelDialog(e)},{default:(0,m.w5)((()=>[(0,m.Wm)(g,null,{default:(0,m.w5)((()=>[(0,m.Uk)(" Cancel run ")])),_:1})])),_:2},1032,["onClick"])),[[P]]):(0,m.kq)("",!0),"X"!=e.status?(0,m.wy)(((0,m.wg)(),(0,m.j4)(b,{key:1,dense:"",clickable:"",class:"col items-center",onClick:t=>i.showRevokeDialog(e)},{default:(0,m.w5)((()=>[(0,m.Wm)(g,null,{default:(0,m.w5)((()=>[(0,m.Uk)(" Revoke run ")])),_:1})])),_:2},1032,["onClick"])),[[P]]):(0,m.kq)("",!0),(0,m.wy)(((0,m.wg)(),(0,m.j4)(b,{dense:"",clickable:"",class:"col items-center",onClick:t=>i.showFullLog(e)},{default:(0,m.w5)((()=>[(0,m.Wm)(g,null,{default:(0,m.w5)((()=>[(0,m.Uk)(" Show full log ")])),_:1})])),_:2},1032,["onClick"])),[[P]]),(0,m.wy)(((0,m.wg)(),(0,m.j4)(b,{dense:"",clickable:"",onClick:t=>i.dropTemporaryTables(e)},{default:(0,m.w5)((()=>[(0,m.Wm)(g,null,{default:(0,m.w5)((()=>[(0,m.Uk)(" Drop temporary tables ")])),_:1})])),_:2},1032,["onClick"])),[[P]])])),_:2},1024)])),_:2},1024)])),_:2},1024)],2)])))),128))])])),_:1}),(0,m._)("div",fo,[(0,m.Wm)(w,{label:"Save",type:"submit",color:"primary"}),(0,m.Wm)(w,{label:"Cancel",type:"reset",color:"primary",flat:"",class:"q-ml-sm"})])])])),_:1})])),_:1},8,["modelValue"])])),_:1},8,["onSubmit","onReset"])])),_:1})])])),_:1})}o(3352);const _o={class:"row items-center justify-between"};function go(e,t,o,l,a,n){const i=(0,m.up)("q-btn"),r=(0,m.up)("q-item-section"),s=(0,m.up)("q-item"),c=(0,m.up)("q-separator"),u=(0,m.up)("q-list"),d=(0,m.up)("q-menu"),f=(0,m.up)("codemirror"),h=(0,m.Q2)("close-popup");return(0,m.wg)(),(0,m.iD)("div",null,[(0,m._)("span",_o,[(0,m._)("label",null,(0,p.zw)(o.label),1),(0,m._)("div",null,[a.code?((0,m.wg)(),(0,m.j4)(i,{key:0,class:"col-auto",flat:"",size:"xs",icon:"fas fa-times",onClick:n.clearCode},null,8,["onClick"])):(0,m.kq)("",!0),(0,m.Wm)(i,{class:"col-auto",flat:"",size:"sm",label:"Example"},{default:(0,m.w5)((()=>[(0,m.Wm)(d,null,{default:(0,m.w5)((()=>[(0,m.Wm)(u,{dense:"",class:"text-no-wrap"},{default:(0,m.w5)((()=>[((0,m.wg)(!0),(0,m.iD)(m.HY,null,(0,m.Ko)(n.menuItems,(e=>(0,m.wy)(((0,m.wg)(),(0,m.j4)(s,{clickable:"",key:e.menuText},{default:(0,m.w5)((()=>[(0,m.Wm)(r,{onClick:t=>n.setCode(e.exampleText)},{default:(0,m.w5)((()=>[(0,m.Uk)((0,p.zw)(e.menuText),1)])),_:2},1032,["onClick"])])),_:2},1024)),[[h]]))),128)),a.code?((0,m.wg)(),(0,m.j4)(c,{key:0})):(0,m.kq)("",!0),a.code?(0,m.wy)(((0,m.wg)(),(0,m.j4)(s,{key:1,clickable:""},{default:(0,m.w5)((()=>[(0,m.Wm)(r,{onClick:n.clearCode},{default:(0,m.w5)((()=>[(0,m.Uk)(" Clear text ")])),_:1},8,["onClick"])])),_:1})),[[h]]):(0,m.kq)("",!0),(0,m.Wm)(c)])),_:1})])),_:1})])),_:1})])]),(0,m.Wm)(f,{ref:"editor",modelValue:a.code,"onUpdate:modelValue":t[0]||(t[0]=e=>a.code=e),"indent-with-tab":!0,"smart-indent":!0,"tab-size":4,extensions:a.extensions,onReady:n.handleReady},null,8,["modelValue","extensions","onReady"])])}var bo=o(3756),yo=o(9876),wo=o(4914),Co={props:["modelValue","label"],emits:["update:modelValue"],components:{Codemirror:bo.Z1},data(){return{view:null,code:this.modelValue,placeholder:this.textPlaceholder,extensions:[(0,wo.i6)(),yo.yy.readOnly.of(!1)],examples:{error_config:[{menuText:"Catch all (as error)",exampleText:"1=1"},{menuText:"ANL Sample conditions (using SQL-like syntax)",exampleText:"(charge != calc_charge or calc_charge is null) and imsi not in (select imsi from ds_imsi_whitelist)"},{menuText:"ANL Sample conditions (using JSON syntax)",exampleText:'[{"column": "CHARGE", "value": "CALC_CHARGE", "is_column": true}, {"connexion": "or", "column": "CALC_CHARGE", "relation": "is", "value": "NULL"}]'},{menuText:"REC Sample conditions (using JSON syntax)",exampleText:'[\n\t{"column_a": "case_type", "column_b": "case_type"}\n]'}],rule_config:[{menuText:"REC Sample conditions (using JSON syntax)",exampleText:'[\n\t{"column_a":"posting_date","column_b":"posting_date"},\n\t{"column_a":"case_type","column_b":"case_type"}\n]'}],case_config:[{menuText:"Basic 3 class example",exampleText:'[\n\t{\n\t\t"case_id": 1,\n\t\t"case_value": "Tariffication confirmed",\n\t\t"case_type": "Normal",\n\t\t"case_description": "Tariffication confirmed."\n\t},\n\t{\n\t\t"case_id": 2,\n\t\t"case_value": "Tariffication failed",\n\t\t"case_type": "Error",\n\t\t"case_description": "Tariffication failed."\n\t},\n\t{\n\t\t"case_id": 3,\n\t\t"case_value": "Tariffication not calculated",\n\t\t"case_type": "Warning",\n\t\t"case_description": "Tariffication not analysed."\n\t}\n]'}],result_config:[{menuText:"Basic 3 class example",exampleText:"case\n\twhen charge = calc_charge then 1\n\twhen charge != calc_charge then 2\n\twhen calc_charge is null then 3\nend"}],source_filter:[{menuText:"Basic filter example",exampleText:"service_id = 1 and direction_id = 1"},{menuText:"Subselect filter example",exampleText:"ftr_code in (\n\tselect feature_code \n\tfrom feature@amdocs \n\twhere ftr_expiration_date is null\n)"}],preparation_sql:[{menuText:"Materialized view refresh",exampleText:"begin\n\tdbms_snapshot.refresh('MVIDS_ACTIVE_5G_HLR', 'c');\nend;"},{menuText:"Truncate and insert into table",exampleText:"begin\n\texecute immediate 'truncate table tmp_table';\n\tinsert into tmp_table select subscriber_no, ban, status_date from ds_subscribers where state = trunc(sysdate);\n\tcommit;\nend;"},{menuText:"Insert log line (using vars)",exampleText:"insert into log_sp_run\nvalues (\n    '{control_name} with PID: {process_id} executed for period from {control_date_from:%Y-%m-%d} to {control_date_to:%Y-%m-%d}', \n    'COMPLETE', \n    to_date('{control_date:%Y%m%d}', 'yyyymmdd'), \n    sysdate, \n    null, \n    null\n);"},{menuText:"Complex preparation example (using vars)",exampleText:"declare\n\tcheck_value integer;\nbegin\n\texecute immediate 'select count(*) from user_tables where table_name = ''TMP_{control_name}_{control_date:%Y%m%d}''' into check_value;\n\tif check_value > 0 then\n\t\texecute immediate 'drop table tmp_{control_name}_{control_date:%Y%m%d}';\n\tend if;\n\texecute immediate 'create table tmp_{control_name}_{control_date:%Y%m%d} as ' || 'select * from vids_rr6_pr_sms_dws ' || 'where charged_date >= trunc(sysdate)-7';\nend;"}],prerequisite_sql:[{menuText:"Positive example (control will be executed)",exampleText:"select count(*) from vids_rr7_pr_mms_dws"},{menuText:"Negative example (control execution will be terminated)",exampleText:"select count(*) from vids_rr7_pr_mms_dws\nwhere 1=2"}],completion_sql:[{menuText:"Materialized view refresh",exampleText:"begin\n\tdbms_snapshot.refresh('MVIDS_ACTIVE_5G_HLR', 'c');\nend;"},{menuText:"Truncate and insert into table",exampleText:"begin\n\texecute immediate 'truncate table tmp_table';\n\tinsert into tmp_table select subscriber_no, ban, status_date from ds_subscribers where state = trunc(sysdate);\n\tcommit;\nend;"},{menuText:"Insert log line (using vars)",exampleText:"insert into log_sp_run\nvalues (\n    '{control_name} with PID: {process_id} executed for period from {control_date_from:%Y-%m-%d} to {control_date_to:%Y-%m-%d}', \n    'COMPLETE', \n    to_date('{control_date:%Y%m%d}', 'yyyymmdd'), \n    sysdate, \n    null, \n    null\n);"},{menuText:"Complex completion example (using vars)",exampleText:"declare\n\tcheck_value integer;\nbegin\n\texecute immediate 'select count(*) from user_tables where table_name = ''TMP_{control_name}_{control_date:%Y%m%d}''' into check_value;\n\tif check_value > 0 then\n\t\texecute immediate 'drop table tmp_{control_name}_{control_date:%Y%m%d}';\n\tend if;\n\texecute immediate 'create table tmp_{control_name}_{control_date:%Y%m%d} as ' || 'select * from vids_rr6_pr_sms_dws ' || 'where charged_date >= trunc(sysdate)-7';\nend;"},{menuText:"Trigger another Rapo control execution",exampleText:"begin\n\tracs_kpi_pkg.run_rapo_control('PO1_DR_MSC_V', to_date('{control_date:%Y%m%d}', 'yyyymmdd'));\nend;"}]}}},computed:{menuItems(){switch(this.label){case"Missmatch criteria (Error config)":return this.examples.error_config;case"Matching criteria (Rule config)":return this.examples.rule_config;case"Case config":return this.examples.case_config;case"Case mapping":return this.examples.result_config;case"Preparation SQL":return this.examples.preparation_sql;case"Prerequisite SQL":return this.examples.prerequisite_sql;case"Completion SQL":return this.examples.completion_sql;case"Filter":return this.examples.source_filter;case"Filter (Datasource A)":return this.examples.source_filter;case"Filter (Datasource B)":return this.examples.source_filter}return[]}},methods:{handleReady(e){this.view=e.view},setCode(e){this.code=e},clearCode(){this.code=""}},watch:{code(e){this.$emit("update:modelValue",e)},modelValue(e){this.code=e}}};const ko=(0,O.Z)(Co,[["render",go]]);var vo=ko;$()(Co,"components",{QBtn:W.Z,QMenu:Be.Z,QList:Z.Z,QItem:Q.Z,QItemSection:R.Z,QSeparator:We.Z}),$()(Co,"directives",{ClosePopup:Ue.Z});const xo={class:"row q-gutter-md"},qo={class:"row items-center justify-end"};function Vo(e,t,o,l,a,n){const i=(0,m.up)("q-select"),r=(0,m.up)("q-item-section"),s=(0,m.up)("q-item"),c=(0,m.up)("q-separator"),u=(0,m.up)("q-list"),d=(0,m.up)("q-menu"),f=(0,m.up)("q-btn"),h=(0,m.up)("q-input"),_=(0,m.up)("q-icon"),g=(0,m.up)("q-item-label"),b=(0,m.up)("q-toggle"),y=(0,m.up)("q-time"),w=(0,m.up)("q-popup-proxy"),C=(0,m.Q2)("close-popup");return(0,m.wg)(),(0,m.iD)("div",null,[(0,m._)("div",xo,[(0,m.Wm)(i,{class:"col",outlined:"","emit-value":"","map-options":"",modelValue:a.scheduleType,"onUpdate:modelValue":[t[0]||(t[0]=e=>a.scheduleType=e),n.scheduleTypeChanged],options:[{label:"Daily",value:"D"},{label:"Weekly",value:"W"},{label:"Monthly",value:"M"},{label:"Complex",value:"X"},{label:"Cascade",value:"C"}],label:"Scheduler type"},null,8,["modelValue","onUpdate:modelValue"]),"X"===a.scheduleType?((0,m.wg)(),(0,m.j4)(h,{key:0,class:"col",outlined:"",modelValue:a.scheduleObject.mday,"onUpdate:modelValue":t[1]||(t[1]=e=>a.scheduleObject.mday=e),label:"Month"},{append:(0,m.w5)((()=>[(0,m.Wm)(f,{round:"",dense:"",flat:"",icon:"add"},{default:(0,m.w5)((()=>[(0,m.Wm)(d,null,{default:(0,m.w5)((()=>[(0,m.Wm)(u,{dense:"",class:"text-no-wrap"},{default:(0,m.w5)((()=>[((0,m.wg)(!0),(0,m.iD)(m.HY,null,(0,m.Ko)(a.examples.mday,(e=>(0,m.wy)(((0,m.wg)(),(0,m.j4)(s,{clickable:"",key:e.menuText},{default:(0,m.w5)((()=>[(0,m.Wm)(r,{onClick:t=>a.scheduleObject.mday=e.exampleText},{default:(0,m.w5)((()=>[(0,m.Uk)((0,p.zw)(e.menuText),1)])),_:2},1032,["onClick"])])),_:2},1024)),[[C]]))),128)),(0,m.Wm)(c)])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"])):(0,m.kq)("",!0),"X"===a.scheduleType?((0,m.wg)(),(0,m.j4)(h,{key:1,class:"col",outlined:"",modelValue:a.scheduleObject.wday,"onUpdate:modelValue":t[2]||(t[2]=e=>a.scheduleObject.wday=e),label:"Week"},{append:(0,m.w5)((()=>[(0,m.Wm)(f,{round:"",dense:"",flat:"",icon:"add"},{default:(0,m.w5)((()=>[(0,m.Wm)(d,null,{default:(0,m.w5)((()=>[(0,m.Wm)(u,{dense:"",class:"text-no-wrap"},{default:(0,m.w5)((()=>[((0,m.wg)(!0),(0,m.iD)(m.HY,null,(0,m.Ko)(a.examples.wday,(e=>(0,m.wy)(((0,m.wg)(),(0,m.j4)(s,{clickable:"",key:e.menuText},{default:(0,m.w5)((()=>[(0,m.Wm)(r,{onClick:t=>a.scheduleObject.wday=e.exampleText},{default:(0,m.w5)((()=>[(0,m.Uk)((0,p.zw)(e.menuText),1)])),_:2},1032,["onClick"])])),_:2},1024)),[[C]]))),128)),(0,m.Wm)(c)])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"])):(0,m.kq)("",!0),(0,m.Wm)(_,{class:"q-mt-lg",name:"fas fa-at",size:"35px",color:"blue-grey-3"}),"W"==a.scheduleType?((0,m.wg)(),(0,m.j4)(i,{key:2,class:"col",outlined:"","emit-value":"",multiple:"","map-options":"",modelValue:a.scheduleObject.wday,"onUpdate:modelValue":t[3]||(t[3]=e=>a.scheduleObject.wday=e),rules:[e=>e&&e.length>0||"You must select at least one day"],options:[{label:"Monday",value:1},{label:"Tuesday",value:2},{label:"Wednesday",value:3},{label:"Thursday",value:4},{label:"Friday",value:5},{label:"Saturday",value:6},{label:"Sunday",value:7}],label:"Run on days of week:"},{option:(0,m.w5)((({itemProps:e,opt:t,selected:o,toggleOption:l})=>[(0,m.Wm)(s,(0,p.vs)((0,m.F4)(e)),{default:(0,m.w5)((()=>[(0,m.Wm)(r,null,{default:(0,m.w5)((()=>[(0,m.Wm)(g,{innerHTML:t.label},null,8,["innerHTML"])])),_:2},1024),(0,m.Wm)(r,{side:""},{default:(0,m.w5)((()=>[(0,m.Wm)(b,{"model-value":o,"onUpdate:modelValue":e=>l(t)},null,8,["model-value","onUpdate:modelValue"])])),_:2},1024)])),_:2},1040)])),_:1},8,["modelValue","rules"])):(0,m.kq)("",!0),"M"==a.scheduleType?((0,m.wg)(),(0,m.j4)(i,{key:3,class:"col",outlined:"","emit-value":"",multiple:"",modelValue:a.scheduleObject.mday,"onUpdate:modelValue":t[4]||(t[4]=e=>a.scheduleObject.mday=e),rules:[e=>e&&e.length>0||"You must select at least one day"],options:[{label:"1",value:1},{label:"2",value:2},{label:"3",value:3},{label:"4",value:4},{label:"5",value:5},{label:"6",value:6},{label:"7",value:7},{label:"8",value:8},{label:"9",value:9},{label:"10",value:10},{label:"11",value:11},{label:"12",value:12},{label:"13",value:13},{label:"14",value:14},{label:"15",value:15},{label:"16",value:16},{label:"17",value:17},{label:"18",value:18},{label:"19",value:19},{label:"20",value:20},{label:"21",value:21},{label:"22",value:22},{label:"23",value:23},{label:"24",value:24},{label:"25",value:25},{label:"26",value:26},{label:"27",value:27},{label:"28",value:28},{label:"29",value:29},{label:"30",value:30},{label:"31",value:31}],label:"Run on days of month:"},{option:(0,m.w5)((({itemProps:e,opt:t,selected:o,toggleOption:l})=>[(0,m.Wm)(s,(0,p.vs)((0,m.F4)(e)),{default:(0,m.w5)((()=>[(0,m.Wm)(r,null,{default:(0,m.w5)((()=>[(0,m.Wm)(g,{innerHTML:t.label},null,8,["innerHTML"])])),_:2},1024),(0,m.Wm)(r,{side:""},{default:(0,m.w5)((()=>[(0,m.Wm)(b,{"model-value":o,"onUpdate:modelValue":e=>l(t)},null,8,["model-value","onUpdate:modelValue"])])),_:2},1024)])),_:2},1040)])),_:1},8,["modelValue","rules"])):(0,m.kq)("",!0),"C"===a.scheduleType?((0,m.wg)(),(0,m.j4)(i,{key:4,class:"col","use-input":"","hide-selected":"","fill-input":"",outlined:"","emit-value":"","map-options":"",onFilter:n.filterControlCatalogue,modelValue:a.scheduleObject.trigger_id,"onUpdate:modelValue":t[5]||(t[5]=e=>a.scheduleObject.trigger_id=e),options:a.controlCatalogueList.map((e=>({label:e.control_name,value:e.control_id}))),"selected-value":a.controlCatalogueList.find((e=>e.control_id==a.scheduleObject.trigger_id))?.control_name||a.scheduleObject.trigger_id,label:"Control (trigger)",rules:[e=>e&&e>0||"You must select a control"]},null,8,["onFilter","modelValue","options","selected-value","rules"])):(0,m.kq)("",!0),"X"===a.scheduleType?((0,m.wg)(),(0,m.j4)(h,{key:5,class:"col",outlined:"",modelValue:a.scheduleObject.hour,"onUpdate:modelValue":t[6]||(t[6]=e=>a.scheduleObject.hour=e),rules:[e=>e.length>0||"Must have a value"],label:"Hour"},{append:(0,m.w5)((()=>[(0,m.Wm)(f,{round:"",dense:"",flat:"",icon:"add"},{default:(0,m.w5)((()=>[(0,m.Wm)(d,null,{default:(0,m.w5)((()=>[(0,m.Wm)(u,{dense:"",class:"text-no-wrap"},{default:(0,m.w5)((()=>[((0,m.wg)(!0),(0,m.iD)(m.HY,null,(0,m.Ko)(a.examples.hour,(e=>(0,m.wy)(((0,m.wg)(),(0,m.j4)(s,{clickable:"",key:e.menuText},{default:(0,m.w5)((()=>[(0,m.Wm)(r,{onClick:t=>a.scheduleObject.hour=e.exampleText},{default:(0,m.w5)((()=>[(0,m.Uk)((0,p.zw)(e.menuText),1)])),_:2},1032,["onClick"])])),_:2},1024)),[[C]]))),128)),(0,m.Wm)(c)])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue","rules"])):(0,m.kq)("",!0),"X"===a.scheduleType?((0,m.wg)(),(0,m.j4)(h,{key:6,class:"col",outlined:"",modelValue:a.scheduleObject.min,"onUpdate:modelValue":t[7]||(t[7]=e=>a.scheduleObject.min=e),rules:[e=>e.length>0||"Must have a value"],label:"Minute"},{append:(0,m.w5)((()=>[(0,m.Wm)(f,{round:"",dense:"",flat:"",icon:"add"},{default:(0,m.w5)((()=>[(0,m.Wm)(d,null,{default:(0,m.w5)((()=>[(0,m.Wm)(u,{dense:"",class:"text-no-wrap"},{default:(0,m.w5)((()=>[((0,m.wg)(!0),(0,m.iD)(m.HY,null,(0,m.Ko)(a.examples.min,(e=>(0,m.wy)(((0,m.wg)(),(0,m.j4)(s,{clickable:"",key:e.menuText},{default:(0,m.w5)((()=>[(0,m.Wm)(r,{onClick:t=>a.scheduleObject.min=e.exampleText},{default:(0,m.w5)((()=>[(0,m.Uk)((0,p.zw)(e.menuText),1)])),_:2},1032,["onClick"])])),_:2},1024)),[[C]]))),128)),(0,m.Wm)(c)])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue","rules"])):(0,m.kq)("",!0),"X"===a.scheduleType?((0,m.wg)(),(0,m.j4)(h,{key:7,class:"col",outlined:"",modelValue:a.scheduleObject.sec,"onUpdate:modelValue":t[8]||(t[8]=e=>a.scheduleObject.sec=e),rules:[e=>e.length>0||"Must have a value"],label:"Second"},{append:(0,m.w5)((()=>[(0,m.Wm)(f,{round:"",dense:"",flat:"",icon:"add"},{default:(0,m.w5)((()=>[(0,m.Wm)(d,null,{default:(0,m.w5)((()=>[(0,m.Wm)(u,{dense:"",class:"text-no-wrap"},{default:(0,m.w5)((()=>[((0,m.wg)(!0),(0,m.iD)(m.HY,null,(0,m.Ko)(a.examples.sec,(e=>(0,m.wy)(((0,m.wg)(),(0,m.j4)(s,{clickable:"",key:e.menuText},{default:(0,m.w5)((()=>[(0,m.Wm)(r,{onClick:t=>a.scheduleObject.sec=e.exampleText},{default:(0,m.w5)((()=>[(0,m.Uk)((0,p.zw)(e.menuText),1)])),_:2},1032,["onClick"])])),_:2},1024)),[[C]]))),128)),(0,m.Wm)(c)])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue","rules"])):(0,m.kq)("",!0),"X"!==a.scheduleType&&"C"!==a.scheduleType?((0,m.wg)(),(0,m.j4)(h,{key:8,class:"col",outlined:"",modelValue:a.scheduleTimepicker,"onUpdate:modelValue":[t[10]||(t[10]=e=>a.scheduleTimepicker=e),n.scheduleDateTimeChanged],mask:"fulltime",rules:[e=>/^([01]?[0-9]|2[0-3]):[0-5][0-9]:[0-5][0-9]$/.test(e)||"Must be a valid time (HH:mm:ss) format"]},{append:(0,m.w5)((()=>[(0,m.Wm)(_,{name:"access_time",class:"cursor-pointer"},{default:(0,m.w5)((()=>[(0,m.Wm)(w,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:(0,m.w5)((()=>[(0,m.Wm)(y,{modelValue:a.scheduleTimepicker,"onUpdate:modelValue":t[9]||(t[9]=e=>a.scheduleTimepicker=e),"with-seconds":"",format24h:"",color:"teal"},{default:(0,m.w5)((()=>[(0,m._)("div",qo,[(0,m.wy)((0,m.Wm)(f,{label:"Save",color:"teal",flat:"",onClick:n.scheduleDateTimeChanged},null,8,["onClick"]),[[C]])])])),_:1},8,["modelValue"])])),_:1})])),_:1})])),_:1},8,["modelValue","rules","onUpdate:modelValue"])):(0,m.kq)("",!0)])])}var Oo={props:["modelValue"],emits:["update:modelValue"],data(){return{scheduleObject:this.modelValue,scheduleType:null,scheduleTimepicker:null,controlCatalogueList:[],controlCatalogue:[],examples:{mday:[{menuText:"First day of the month",exampleText:"1"},{menuText:"First 3 days of the month",exampleText:"1-3"},{menuText:"Repeat every third day",exampleText:"/3"},{menuText:"Clear value (run every day of the month)",exampleText:""}],wday:[{menuText:"On Monday",exampleText:"1"},{menuText:"On Monday and Friday",exampleText:"1,5"},{menuText:"Between Monday and Friday",exampleText:"1-5"},{menuText:"Clear value (run every day of week)",exampleText:""}],hour:[{menuText:"At 8 o'clock in the morning",exampleText:"8"},{menuText:"At 8 and 15 o'clock",exampleText:"8,15"},{menuText:"Between 8 and 17 o'clock",exampleText:"8-17"},{menuText:"Run every hour",exampleText:"/1"},{menuText:"Every six hours",exampleText:"/6"}],min:[{menuText:"On the full hour",exampleText:"0"},{menuText:"Every 15 minutes",exampleText:"/15"}],sec:[{menuText:"On the full minute",exampleText:"0"},{menuText:"Every 30 seconds",exampleText:"/30"}]}}},methods:{...(0,x.nv)(["updateControlCatalogue"]),filterControlCatalogue(e,t,o){e.length<0?o():t((()=>{const t=e.toLowerCase();this.controlCatalogueList=this.controlCatalogue.filter((e=>e.control_name.toLowerCase().indexOf(t)>-1))}))},async scheduleTypeChanged(){"C"===this.scheduleType?(this.scheduleObject.mday=null,this.scheduleObject.wday=null,this.scheduleObject.hour=null,this.scheduleObject.min=null,this.scheduleObject.sec=null,this.scheduleObject.trigger_id=null):(this.scheduleObject.mday=null,this.scheduleObject.wday=null,this.scheduleObject.hour="8",this.scheduleObject.min="15",this.scheduleObject.sec="0",this.scheduleObject.trigger_id=null,this.scheduleTimepicker="08:15:00")},scheduleDateTimeChanged(){const e=this.scheduleTimepicker.split(":");this.scheduleObject.hour=Number(e[0]),this.scheduleObject.min=Number(e[1]),this.scheduleObject.sec=Number(e[2])},toScheduleObject(e){var t={mday:null,wday:null,hour:"8",min:"15",sec:"0",trigger_id:null};return e&&(t=JSON.parse(e),this.scheduleType||(String(e).indexOf("/")>-1||String(e).indexOf("-")>-1||String(t.mday).indexOf(",")>-1&&String(t.wday).indexOf(",")>-1||(String(t.hour)+String(t.min)+String(t.sec)).indexOf(",")>-1?this.scheduleType="X":null==t.hour&&null==t.min&&null==t.sec?this.scheduleType="C":t.mday?this.scheduleType="M":t.wday?this.scheduleType="W":this.scheduleType="D","X"!==this.scheduleType&&(t.mday&&(t.mday=String(t.mday).split(",").map((e=>Number(e)))),t.wday&&(t.wday=String(t.wday).split(",").map((e=>Number(e))))))),this.scheduleTimepicker||(this.scheduleTimepicker=String(t.hour).padStart(2,"0")+":"+String(t.min).padStart(2,"0")+":"+String(t.sec).padStart(2,"0")),t},toScheduleString(e){var t={mday:e.mday?String(e.mday):null,wday:e.wday?String(e.wday):null,hour:String(e.hour),min:String(e.min),sec:String(e.sec)};return JSON.stringify(t)}},watch:{scheduleObject:{handler(e){this.$emit("update:modelValue",e)},deep:!0},modelValue:{handler(e){this.scheduleObject=e},deep:!0}},async mounted(){this.controlCatalogue=await this.updateControlCatalogue(),this.controlCatalogueList=this.controlCatalogue;var e=JSON.stringify(this.modelValue);this.scheduleType||(e.indexOf("/")>-1||e.indexOf("-")>-1||String(this.modelValue.mday).indexOf(",")>-1&&String(this.modelValue.wday).indexOf(",")>-1||(String(this.modelValue.hour)+String(this.modelValue.min)+String(this.modelValue.sec)).indexOf(",")>-1?this.scheduleType="X":null==this.modelValue.hour&&null==this.modelValue.min&&null==this.modelValue.sec?this.scheduleType="C":this.modelValue.mday?this.scheduleType="M":this.modelValue.wday?this.scheduleType="W":this.scheduleType="D"),this.scheduleTimepicker=String(this.scheduleObject.hour).padStart(2,"0")+":"+String(this.scheduleObject.min).padStart(2,"0")+":"+String(this.scheduleObject.sec).padStart(2,"0")}},jo=o(9778),So=o(9885);const Do=(0,O.Z)(Oo,[["render",Vo]]);var Wo=Do;$()(Oo,"components",{QSelect:je.Z,QInput:A.Z,QBtn:W.Z,QMenu:Be.Z,QList:Z.Z,QItem:Q.Z,QItemSection:R.Z,QSeparator:We.Z,QIcon:T.Z,QItemLabel:P.Z,QToggle:De.Z,QPopupProxy:jo.Z,QTime:So.Z}),$()(Oo,"directives",{ClosePopup:Ue.Z});const To={class:"col q-gutter-y-md"},Uo=(0,m._)("br",null,null,-1),Lo=(0,m._)("br",null,null,-1),Ao=(0,m._)("br",null,null,-1),No=(0,m._)("br",null,null,-1),Eo=(0,m._)("br",null,null,-1),Io=(0,m._)("br",null,null,-1),Zo=(0,m._)("br",null,null,-1),Qo=(0,m._)("br",null,null,-1),Ro=(0,m._)("br",null,null,-1),Po=(0,m._)("br",null,null,-1),zo=(0,m._)("ul",null,[(0,m._)("li",null,"Rank: Replace numerical values with their rank (order) within the sorted dataset"),(0,m._)("li",null,"Min-Max: Scale numerical values to a 0-1 range based on the minimum and maximum values in the dataset"),(0,m._)("li",null,"Z-Score: Normalize numerical values based on their distance from the mean in terms of standard deviations"),(0,m._)("li",null,"Relative Distance: Use squared A->B distance relative to the defined discrepancy tolerance for ranking")],-1),Bo=(0,m._)("br",null,null,-1);function Mo(e,t,o,a,n,i){const r=(0,m.up)("q-item-label"),s=(0,m.up)("q-item-section"),c=(0,m.up)("q-checkbox"),u=(0,m.up)("q-icon"),d=(0,m.up)("q-tooltip"),p=(0,m.up)("q-input"),f=(0,m.up)("q-card-section"),h=(0,m.up)("q-card"),_=(0,m.up)("q-select");return(0,m.wg)(),(0,m.iD)("div",To,[(0,m.Wm)(h,{class:"q-pa-sm",flat:"",bordered:""},{default:(0,m.w5)((()=>[(0,m.Wm)(s,{class:"q-ma-xs"},{default:(0,m.w5)((()=>[(0,m.Wm)(r,null,{default:(0,m.w5)((()=>[(0,m.Uk)("Discrepancies")])),_:1})])),_:1}),(0,m.Wm)(f,{class:"row q-gutter-sm"},{default:(0,m.w5)((()=>[(0,m.Wm)(c,{size:"lg",color:"blue",class:"col-2",label:"Write A not in B discrepancies",modelValue:n.ruleConfigObject.need_issues_a,"onUpdate:modelValue":t[0]||(t[0]=e=>n.ruleConfigObject.need_issues_a=e),onClick:t[1]||(t[1]=e=>n.ruleConfigObject.output_limit_a=n.ruleConfigObject.need_issues_a||n.ruleConfigObject.need_recons_a?n.ruleConfigObject.output_limit_a:null)},null,8,["modelValue"]),(0,m.Wm)(c,{size:"lg",color:"blue",class:"col-2",label:"Write A matches",modelValue:n.ruleConfigObject.need_recons_a,"onUpdate:modelValue":t[2]||(t[2]=e=>n.ruleConfigObject.need_recons_a=e),onClick:t[3]||(t[3]=e=>n.ruleConfigObject.output_limit_a=n.ruleConfigObject.need_issues_a||n.ruleConfigObject.need_recons_a?n.ruleConfigObject.output_limit_a:null)},null,8,["modelValue"]),n.ruleConfigObject.need_issues_a||n.ruleConfigObject.need_recons_a?((0,m.wg)(),(0,m.j4)(p,{key:0,class:"col-2",modelValue:n.ruleConfigObject.output_limit_a,"onUpdate:modelValue":t[5]||(t[5]=e=>n.ruleConfigObject.output_limit_a=e),modelModifiers:{number:!0},type:"number",outlined:"",label:"Output limit A"},{prepend:(0,m.w5)((()=>[(0,m.Wm)(u,{name:"fas fa-list-ol",onClick:t[4]||(t[4]=(0,l.iM)((()=>{}),["stop","prevent"]))})])),default:(0,m.w5)((()=>[(0,m.Wm)(d,{anchor:"top left",self:"bottom left",offset:[0,5]},{default:(0,m.w5)((()=>[(0,m.Uk)(" Limit the number of records in the output table. "),Uo,(0,m.Uk)("Leave empty for no limit. ")])),_:1})])),_:1},8,["modelValue"])):(0,m.kq)("",!0)])),_:1}),(0,m.Wm)(f,{class:"row q-gutter-sm"},{default:(0,m.w5)((()=>[(0,m.Wm)(c,{size:"lg",color:"blue",class:"col-2",label:"Write B not in A discrepancies",modelValue:n.ruleConfigObject.need_issues_b,"onUpdate:modelValue":t[6]||(t[6]=e=>n.ruleConfigObject.need_issues_b=e),onClick:t[7]||(t[7]=e=>n.ruleConfigObject.output_limit_b=n.ruleConfigObject.need_issues_b||n.ruleConfigObject.need_recons_b?n.ruleConfigObject.output_limit_b:null)},null,8,["modelValue"]),(0,m.Wm)(c,{size:"lg",color:"blue",class:"col-2",label:"Write B matches",modelValue:n.ruleConfigObject.need_recons_b,"onUpdate:modelValue":t[8]||(t[8]=e=>n.ruleConfigObject.need_recons_b=e),onClick:t[9]||(t[9]=e=>n.ruleConfigObject.output_limit_b=n.ruleConfigObject.need_issues_b||n.ruleConfigObject.need_recons_b?n.ruleConfigObject.output_limit_b:null)},null,8,["modelValue"]),n.ruleConfigObject.need_issues_b||n.ruleConfigObject.need_recons_b?((0,m.wg)(),(0,m.j4)(p,{key:0,class:"col-2",modelValue:n.ruleConfigObject.output_limit_b,"onUpdate:modelValue":t[11]||(t[11]=e=>n.ruleConfigObject.output_limit_b=e),modelModifiers:{number:!0},type:"number",outlined:"",label:"Output limit B"},{prepend:(0,m.w5)((()=>[(0,m.Wm)(u,{name:"fas fa-list-ol",onClick:t[10]||(t[10]=(0,l.iM)((()=>{}),["stop","prevent"]))})])),default:(0,m.w5)((()=>[(0,m.Wm)(d,{anchor:"top left",self:"bottom left",offset:[0,5]},{default:(0,m.w5)((()=>[(0,m.Uk)(" Limit the number of records in the output table. "),Lo,(0,m.Uk)("Leave empty for no limit. ")])),_:1})])),_:1},8,["modelValue"])):(0,m.kq)("",!0)])),_:1}),(0,m.Wm)(f,{class:"row q-gutter-sm"},{default:(0,m.w5)((()=>[(0,m.Wm)(c,{size:"lg",class:"col-2",color:"blue",label:"Allow duplicates",modelValue:n.ruleConfigObject.allow_duplicates,"onUpdate:modelValue":t[12]||(t[12]=e=>n.ruleConfigObject.allow_duplicates=e)},{default:(0,m.w5)((()=>[(0,m.Wm)(d,{anchor:"top left",self:"bottom left",offset:[0,0]},{default:(0,m.w5)((()=>[(0,m.Uk)(" If active, duplicate records won't be treated as discrepancies ")])),_:1})])),_:1},8,["modelValue"]),(0,m.Wm)(c,{size:"lg",class:"col-2",color:"blue",label:"Discrepancy matching",modelValue:n.ruleConfigObject.discrepancy_matching,"onUpdate:modelValue":t[13]||(t[13]=e=>n.ruleConfigObject.discrepancy_matching=e)},{default:(0,m.w5)((()=>[(0,m.Wm)(d,{anchor:"top left",self:"bottom left",offset:[0,0]},{default:(0,m.w5)((()=>[(0,m.Uk)(" Consider also mismatch criteria (discrepancy config) when identifying duplicates. If enabled and there is a discrepancy "),Ao,(0,m.Uk)(" above tolerance with the record on the other side the record will be marked as error instead of duplicate. "),No,(0,m.Uk)(' Useful together with the "Allow Duplicates" feature so that you identify duplicates that are actually errors,'),Eo,(0,m.Uk)(" and only ignore those that are successfully matched. "),Io,(0,m.Uk)(' Default is "Yes". ')])),_:1})])),_:1},8,["modelValue"])])),_:1})])),_:1}),(0,m.Wm)(h,{class:"q-pa-sm",flat:"",bordered:""},{default:(0,m.w5)((()=>[(0,m.Wm)(s,{class:"q-ma-xs"},{default:(0,m.w5)((()=>[(0,m.Wm)(r,null,{default:(0,m.w5)((()=>[(0,m.Uk)("Advanced")])),_:1})])),_:1}),(0,m.Wm)(f,{class:"row q-gutter-sm"},{default:(0,m.w5)((()=>[(0,m.Wm)(_,{class:"col-2",outlined:"","emit-value":"","map-options":"",modelValue:n.ruleConfigObject.fuzzy_optimization,"onUpdate:modelValue":t[14]||(t[14]=e=>n.ruleConfigObject.fuzzy_optimization=e),options:[{label:"Yes",value:!0},{label:"No",value:!1}],label:"Fuzzy optimization"},{default:(0,m.w5)((()=>[(0,m.Wm)(d,{anchor:"top left",self:"bottom left",offset:[0,5]},{default:(0,m.w5)((()=>[(0,m.Uk)(" Reconciliation parameter that allows to join records within a correlation cluster of the same dimension (1k1, 2k2, 3k3, etc.) using a simple positional method with sorting by the sum of numerical values. "),Zo,(0,m.Uk)("Such clusters are formed if the correlation keys do not provide a unique connection and several records on one side are connected to several records on the other. "),Qo,(0,m.Uk)('Default is "Yes". ')])),_:1})])),_:1},8,["modelValue"]),(0,m.Wm)(_,{class:"col-2",outlined:"","emit-value":"","map-options":"",modelValue:n.ruleConfigObject.normalization_type,"onUpdate:modelValue":t[15]||(t[15]=e=>n.ruleConfigObject.normalization_type=e),options:[{label:"None",value:"none"},{label:"Rank",value:"rank"},{label:"Min-Max",value:"minmax"},{label:"Z-Score",value:"z_norm"},{label:"Relative Distance",value:"srd"}],label:"Normalization"},{default:(0,m.w5)((()=>[(0,m.Wm)(d,{anchor:"top left",self:"bottom left",offset:[0,5]},{default:(0,m.w5)((()=>[(0,m.Uk)(" Useful in cases where correlation keys do not guarantee a unique match, and distances "),Ro,(0,m.Uk)(" based on discrepancy config fields produce similar or identical values when summed. "),Po,(0,m.Uk)(' Default is "None". '),zo])),_:1})])),_:1},8,["modelValue"]),(0,m.Wm)(_,{class:"col-2",outlined:"","emit-value":"","map-options":"",modelValue:n.ruleConfigObject.correlation_limit,"onUpdate:modelValue":t[16]||(t[16]=e=>n.ruleConfigObject.correlation_limit=e),options:[{label:"Yes",value:!0},{label:"No",value:!1}],label:"Correlation limit"},{default:(0,m.w5)((()=>[(0,m.Wm)(d,{anchor:"top left",self:"bottom left",offset:[0,5]},{default:(0,m.w5)((()=>[(0,m.Uk)(" If active, the correlation dataset will be limited to x2.5 times of the larger datasource record-count to prevent huge resultsets caused by weak or missing match criteria (cross join) "),Bo,(0,m.Uk)("Note that activating the correlation limit will likely result in up to 30% slower performance. Recomended to be used only during the development phase. ")])),_:1})])),_:1},8,["modelValue"])])),_:1})])),_:1})])}var Fo={props:["modelValue","control"],emits:["update:modelValue"],data(){return{ruleConfigObject:this.modelValue}},watch:{ruleConfigObject(e){this.$emit("update:modelValue",e)},modelValue(e){this.ruleConfigObject=e}},mounted(){this.ruleConfigObject.output_limit_a||(this.ruleConfigObject.output_limit_a=this.control.output_limit),this.ruleConfigObject.output_limit_b||(this.ruleConfigObject.output_limit_b=this.control.output_limit),null!=this.ruleConfigObject.fuzzy_optimization&&void 0!=this.ruleConfigObject.fuzzy_optimization||(this.ruleConfigObject.fuzzy_optimization=!0),null!=this.ruleConfigObject.discrepancy_matching&&void 0!=this.ruleConfigObject.discrepancy_matching||(this.ruleConfigObject.discrepancy_matching=!0)}},$o=o(5641);const Yo=(0,O.Z)(Fo,[["render",Mo]]);var Ho=Yo;$()(Fo,"components",{QCard:Ve.Z,QItemSection:R.Z,QItemLabel:P.Z,QCardSection:Oe.Z,QCheckbox:$o.Z,QInput:A.Z,QIcon:T.Z,QTooltip:N.Z,QSelect:je.Z});const Jo={class:"col q-gutter-y-md"};function Ko(e,t,o,a,n,i){const r=(0,m.up)("q-item-label"),s=(0,m.up)("q-item-section"),c=(0,m.up)("q-select"),u=(0,m.up)("q-icon"),d=(0,m.up)("q-tooltip"),p=(0,m.up)("q-input"),f=(0,m.up)("q-btn"),h=(0,m.up)("q-card-section"),_=(0,m.up)("q-card");return(0,m.wg)(),(0,m.iD)("div",Jo,[(0,m.Wm)(_,{class:"q-pa-sm",flat:"",bordered:""},{default:(0,m.w5)((()=>[(0,m.Wm)(s,{class:"q-ma-xs"},{default:(0,m.w5)((()=>[(0,m.Wm)(r,null,{default:(0,m.w5)((()=>[(0,m.Uk)("Match criteria (correlation config)")])),_:1})])),_:1}),(0,m.Wm)(h,{class:"q-gutter-xs"},{default:(0,m.w5)((()=>[((0,m.wg)(!0),(0,m.iD)(m.HY,null,(0,m.Ko)(n.ruleConfigObject.correlation_config,((e,o)=>((0,m.wg)(),(0,m.iD)("div",{class:"row q-gutter-xs items-center",key:o},[n.ruleConfigObject.correlation_config[o].formula_mode?(0,m.kq)("",!0):((0,m.wg)(),(0,m.j4)(c,{key:0,"use-input":"","hide-selected":"","fill-input":"",class:"col-2",outlined:"",onFilter:i.filterFieldListA,modelValue:n.ruleConfigObject.correlation_config[o].field_a,"onUpdate:modelValue":e=>n.ruleConfigObject.correlation_config[o].field_a=e,options:n.datasourceAList,label:"Field A"},null,8,["onFilter","modelValue","onUpdate:modelValue","options"])),n.ruleConfigObject.correlation_config[o].formula_mode?((0,m.wg)(),(0,m.j4)(p,{key:1,outlined:"",class:"col-2",modelValue:n.ruleConfigObject.correlation_config[o].field_a,"onUpdate:modelValue":e=>n.ruleConfigObject.correlation_config[o].field_a=e,label:"Field A"},{append:(0,m.w5)((()=>[(0,m.Wm)(u,{name:"fas fa-calculator",onClick:t[0]||(t[0]=(0,l.iM)((()=>{}),["stop","prevent"]))})])),default:(0,m.w5)((()=>[(0,m.Wm)(d,{anchor:"top left",self:"bottom left",offset:[0,5]},{default:(0,m.w5)((()=>[(0,m.Uk)(" Aways use 'a.' as prefix to DB fields in formula mode ")])),_:1})])),_:2},1032,["modelValue","onUpdate:modelValue"])):(0,m.kq)("",!0),(0,m.Wm)(u,{name:"fas fa-equals",size:"20px",color:"blue-grey-3"}),n.ruleConfigObject.correlation_config[o].formula_mode?(0,m.kq)("",!0):((0,m.wg)(),(0,m.j4)(c,{key:2,"use-input":"","hide-selected":"","fill-input":"",class:"col-2",outlined:"",onFilter:i.filterFieldListB,modelValue:n.ruleConfigObject.correlation_config[o].field_b,"onUpdate:modelValue":e=>n.ruleConfigObject.correlation_config[o].field_b=e,options:n.datasourceBList,label:"Field B"},null,8,["onFilter","modelValue","onUpdate:modelValue","options"])),n.ruleConfigObject.correlation_config[o].formula_mode?((0,m.wg)(),(0,m.j4)(p,{key:3,outlined:"",class:"col-2",modelValue:n.ruleConfigObject.correlation_config[o].field_b,"onUpdate:modelValue":e=>n.ruleConfigObject.correlation_config[o].field_b=e,label:"Field B"},{append:(0,m.w5)((()=>[(0,m.Wm)(u,{name:"fas fa-calculator",onClick:t[1]||(t[1]=(0,l.iM)((()=>{}),["stop","prevent"]))})])),default:(0,m.w5)((()=>[(0,m.Wm)(d,{anchor:"top left",self:"bottom left",offset:[0,5]},{default:(0,m.w5)((()=>[(0,m.Uk)(" Aways use 'b.' as prefix to DB fields in formula mode ")])),_:1})])),_:2},1032,["modelValue","onUpdate:modelValue"])):(0,m.kq)("",!0),(0,m.Wm)(u,{name:"fas fa-circle",size:"15px",color:"blue-grey-3"}),(0,m.Wm)(c,{class:"col-1",outlined:"","emit-value":"","map-options":"",modelValue:n.ruleConfigObject.correlation_config[o].allow_null,"onUpdate:modelValue":e=>n.ruleConfigObject.correlation_config[o].allow_null=e,options:[{label:"Yes",value:!0},{label:"No",value:!1}],label:"Allow null"},{default:(0,m.w5)((()=>[(0,m.Wm)(d,{anchor:"top left",self:"bottom left",offset:[0,5]},{default:(0,m.w5)((()=>[(0,m.Uk)(' If set to "Yes" records with null keys will be included in the reconciliation and marked as discrepancies ')])),_:1})])),_:2},1032,["modelValue","onUpdate:modelValue"]),(0,m.Wm)(u,{name:"fas fa-circle",size:"15px",color:"blue-grey-3"}),(0,m.Wm)(c,{class:"col-1",outlined:"","emit-value":"","map-options":"",modelValue:n.ruleConfigObject.correlation_config[o].formula_mode,"onUpdate:modelValue":[e=>n.ruleConfigObject.correlation_config[o].formula_mode=e,e=>{n.ruleConfigObject.correlation_config[o].formula_mode=e,e?(n.ruleConfigObject.correlation_config[o].field_a="a."+n.ruleConfigObject.correlation_config[o].field_a,n.ruleConfigObject.correlation_config[o].field_b="b."+n.ruleConfigObject.correlation_config[o].field_b):(n.ruleConfigObject.correlation_config[o].field_a=null,n.ruleConfigObject.correlation_config[o].field_b=null)}],options:[{label:"Yes",value:!0},{label:"No",value:!1}],label:"Formula"},{default:(0,m.w5)((()=>[(0,m.Wm)(d,{anchor:"top left",self:"bottom left",offset:[0,5]},{default:(0,m.w5)((()=>[(0,m.Uk)(' In "Formula mode" you can use expressions instead of field names, e.g. "\'0\' || substr(a.MSISDN, 3)" ')])),_:1})])),_:2},1032,["modelValue","onUpdate:modelValue"]),(0,m.Wm)(f,{size:"sm",color:"primary",flat:"",round:"",icon:"fas fa-minus",onClick:e=>i.removeCorrelationConfig(o)},null,8,["onClick"]),o==n.ruleConfigObject.correlation_config.length-1?((0,m.wg)(),(0,m.j4)(f,{key:4,size:"sm",color:"primary",flat:"",round:"",icon:"fas fa-plus",onClick:i.addCorrelationConfig},null,8,["onClick"])):(0,m.kq)("",!0)])))),128)),0==n.ruleConfigObject.correlation_config.length?((0,m.wg)(),(0,m.j4)(f,{key:0,size:"md",color:"primary",icon:"fas fa-plus",label:"Add match criteria",onClick:i.addCorrelationConfig},null,8,["onClick"])):(0,m.kq)("",!0)])),_:1})])),_:1})])}var Xo={props:["modelValue","datasourceAColumns","datasourceBColumns"],emits:["update:modelValue"],data(){return{ruleConfigObject:this.modelValue,datasourceAList:null,datasourceBList:null}},methods:{addCorrelationConfig(){this.ruleConfigObject.correlation_config.push({field_a:this.datasourceAColumns[0],field_b:this.datasourceBColumns[0],formula_mode:!1,allow_null:!1})},removeCorrelationConfig(e){this.ruleConfigObject.correlation_config.splice(e,1)},filterFieldListA(e,t,o){e.length<0?o():t((()=>{const t=e.toLowerCase();this.datasourceAList=this.datasourceAColumns.filter((e=>e.toLowerCase().indexOf(t)>-1))}))},filterFieldListB(e,t,o){e.length<0?o():t((()=>{const t=e.toLowerCase();this.datasourceBList=this.datasourceBColumns.filter((e=>e.toLowerCase().indexOf(t)>-1))}))}},watch:{ruleConfigObject(e){this.$emit("update:modelValue",e)},modelValue(e){this.ruleConfigObject=e}}};const Go=(0,O.Z)(Xo,[["render",Ko]]);var el=Go;$()(Xo,"components",{QCard:Ve.Z,QItemSection:R.Z,QItemLabel:P.Z,QCardSection:Oe.Z,QSelect:je.Z,QInput:A.Z,QIcon:T.Z,QTooltip:N.Z,QBtn:W.Z});const tl={class:"col q-gutter-y-md"};function ol(e,t,o,a,n,i){const r=(0,m.up)("q-item-label"),s=(0,m.up)("q-item-section"),c=(0,m.up)("q-select"),u=(0,m.up)("q-icon"),d=(0,m.up)("q-tooltip"),p=(0,m.up)("q-input"),f=(0,m.up)("q-btn"),h=(0,m.up)("q-card-section"),_=(0,m.up)("q-card");return(0,m.wg)(),(0,m.iD)("div",tl,[(0,m.Wm)(_,{class:"q-pa-sm",flat:"",bordered:""},{default:(0,m.w5)((()=>[(0,m.Wm)(s,{class:"q-ma-xs"},{default:(0,m.w5)((()=>[(0,m.Wm)(r,null,{default:(0,m.w5)((()=>[(0,m.Uk)("Mismatch criteria (discrepancy config)")])),_:1})])),_:1}),(0,m.Wm)(h,{class:"q-gutter-xs"},{default:(0,m.w5)((()=>[((0,m.wg)(!0),(0,m.iD)(m.HY,null,(0,m.Ko)(n.ruleConfigObject.discrepancy_config,((e,o)=>((0,m.wg)(),(0,m.iD)("div",{class:"row q-gutter-xs items-center",key:o},[n.ruleConfigObject.discrepancy_config[o].formula_mode?(0,m.kq)("",!0):((0,m.wg)(),(0,m.j4)(c,{key:0,"use-input":"","hide-selected":"","fill-input":"",class:"col-2",outlined:"",onFilter:i.filterFieldListA,modelValue:n.ruleConfigObject.discrepancy_config[o].field_a,"onUpdate:modelValue":e=>n.ruleConfigObject.discrepancy_config[o].field_a=e,options:n.datasourceAList,label:"Field A"},null,8,["onFilter","modelValue","onUpdate:modelValue","options"])),n.ruleConfigObject.discrepancy_config[o].formula_mode?((0,m.wg)(),(0,m.j4)(p,{key:1,outlined:"",class:"col-2",modelValue:n.ruleConfigObject.discrepancy_config[o].field_a,"onUpdate:modelValue":e=>n.ruleConfigObject.discrepancy_config[o].field_a=e,label:"Field A"},{append:(0,m.w5)((()=>[(0,m.Wm)(u,{name:"fas fa-calculator",onClick:t[0]||(t[0]=(0,l.iM)((()=>{}),["stop","prevent"]))})])),default:(0,m.w5)((()=>[(0,m.Wm)(d,{anchor:"top left",self:"bottom left",offset:[0,5]},{default:(0,m.w5)((()=>[(0,m.Uk)(" Aways use 'a.' as prefix to DB fields in formula mode ")])),_:1})])),_:2},1032,["modelValue","onUpdate:modelValue"])):(0,m.kq)("",!0),(0,m.Wm)(u,{name:"fas fa-equals",size:"20px",color:"blue-grey-3"}),n.ruleConfigObject.discrepancy_config[o].formula_mode?(0,m.kq)("",!0):((0,m.wg)(),(0,m.j4)(c,{key:2,"use-input":"","hide-selected":"","fill-input":"",class:"col-2",outlined:"",onFilter:i.filterFieldListB,modelValue:n.ruleConfigObject.discrepancy_config[o].field_b,"onUpdate:modelValue":e=>n.ruleConfigObject.discrepancy_config[o].field_b=e,options:n.datasourceBList,label:"Field B"},null,8,["onFilter","modelValue","onUpdate:modelValue","options"])),n.ruleConfigObject.discrepancy_config[o].formula_mode?((0,m.wg)(),(0,m.j4)(p,{key:3,outlined:"",class:"col-2",modelValue:n.ruleConfigObject.discrepancy_config[o].field_b,"onUpdate:modelValue":e=>n.ruleConfigObject.discrepancy_config[o].field_b=e,label:"Field B"},{append:(0,m.w5)((()=>[(0,m.Wm)(u,{name:"fas fa-calculator",onClick:t[1]||(t[1]=(0,l.iM)((()=>{}),["stop","prevent"]))})])),default:(0,m.w5)((()=>[(0,m.Wm)(d,{anchor:"top left",self:"bottom left",offset:[0,5]},{default:(0,m.w5)((()=>[(0,m.Uk)(" Always use 'b.' as prefix to DB fields in formula mode ")])),_:1})])),_:2},1032,["modelValue","onUpdate:modelValue"])):(0,m.kq)("",!0),(0,m.Wm)(u,{name:"fas fa-circle",size:"15px",color:"blue-grey-3"}),(0,m.Wm)(p,{outlined:"",class:"col-1",modelValue:n.ruleConfigObject.discrepancy_config[o].numeric_tolerance_from,"onUpdate:modelValue":e=>n.ruleConfigObject.discrepancy_config[o].numeric_tolerance_from=e,modelModifiers:{number:!0},type:"number",step:"0.1",label:"Tolerance from"},{default:(0,m.w5)((()=>[(0,m.Wm)(d,{anchor:"top left",self:"bottom left",offset:[0,5]},{default:(0,m.w5)((()=>[(0,m.Uk)(" Lower tolerance value (match if A minus B is greater than this value) ")])),_:1})])),_:2},1032,["modelValue","onUpdate:modelValue"]),(0,m.Wm)(p,{outlined:"",class:"col-1",modelValue:n.ruleConfigObject.discrepancy_config[o].numeric_tolerance_to,"onUpdate:modelValue":e=>n.ruleConfigObject.discrepancy_config[o].numeric_tolerance_to=e,modelModifiers:{number:!0},type:"number",step:"0.1",label:"Tolerance to"},{default:(0,m.w5)((()=>[(0,m.Wm)(d,{anchor:"top left",self:"bottom left",offset:[0,5]},{default:(0,m.w5)((()=>[(0,m.Uk)(" Upper tolerance value (match if A minus B is lower than this value) ")])),_:1})])),_:2},1032,["modelValue","onUpdate:modelValue"]),(0,m.Wm)(u,{name:"fas fa-circle",size:"15px",color:"blue-grey-3"}),(0,m.Wm)(c,{class:"col-1",outlined:"","emit-value":"","map-options":"",modelValue:n.ruleConfigObject.discrepancy_config[o].percentage_mode,"onUpdate:modelValue":e=>n.ruleConfigObject.discrepancy_config[o].percentage_mode=e,options:[{label:"Yes",value:!0},{label:"No",value:!1}],label:"Percentage"},{default:(0,m.w5)((()=>[(0,m.Wm)(d,{anchor:"top left",self:"bottom left",offset:[0,5]},{default:(0,m.w5)((()=>[(0,m.Uk)(' In "Percentage mode" the difference incl. tolerance values will be treated as percentages ')])),_:1})])),_:2},1032,["modelValue","onUpdate:modelValue"]),(0,m.Wm)(u,{name:"fas fa-circle",size:"15px",color:"blue-grey-3"}),(0,m.Wm)(c,{class:"col-1",outlined:"","emit-value":"","map-options":"",modelValue:n.ruleConfigObject.discrepancy_config[o].formula_mode,"onUpdate:modelValue":[e=>n.ruleConfigObject.discrepancy_config[o].formula_mode=e,e=>{n.ruleConfigObject.discrepancy_config[o].formula_mode=e,e?(n.ruleConfigObject.discrepancy_config[o].formula_alias=n.ruleConfigObject.discrepancy_config[o].field_a,n.ruleConfigObject.discrepancy_config[o].field_a="a."+n.ruleConfigObject.discrepancy_config[o].field_a,n.ruleConfigObject.discrepancy_config[o].field_b="b."+n.ruleConfigObject.discrepancy_config[o].field_b):(n.ruleConfigObject.discrepancy_config[o].field_a=null,n.ruleConfigObject.discrepancy_config[o].field_b=null)}],options:[{label:"Yes",value:!0},{label:"No",value:!1}],label:"Formula"},{default:(0,m.w5)((()=>[(0,m.Wm)(d,{anchor:"top left",self:"bottom left",offset:[0,5]},{default:(0,m.w5)((()=>[(0,m.Uk)(' In "Formula mode" you can use expressions instead of field names, e.g. "a.AMOUNT + a.TAX" ')])),_:1})])),_:2},1032,["modelValue","onUpdate:modelValue"]),n.ruleConfigObject.discrepancy_config[o].formula_mode?((0,m.wg)(),(0,m.j4)(p,{key:4,outlined:"",class:"col-2",modelValue:n.ruleConfigObject.discrepancy_config[o].formula_alias,"onUpdate:modelValue":e=>n.ruleConfigObject.discrepancy_config[o].formula_alias=e,label:"Formula alias"},{prepend:(0,m.w5)((()=>[(0,m.Wm)(u,{name:"fas fa-font",onClick:t[2]||(t[2]=(0,l.iM)((()=>{}),["stop","prevent"]))})])),default:(0,m.w5)((()=>[(0,m.Wm)(d,{anchor:"top left",self:"bottom left",offset:[0,5]},{default:(0,m.w5)((()=>[(0,m.Uk)(" Name to be used when presenting the discrepancies ")])),_:1})])),_:2},1032,["modelValue","onUpdate:modelValue"])):(0,m.kq)("",!0),(0,m.Wm)(f,{size:"sm",color:"primary",flat:"",round:"",icon:"fas fa-minus",onClick:e=>i.removeCorrelationConfig(o)},null,8,["onClick"]),o==n.ruleConfigObject.discrepancy_config.length-1?((0,m.wg)(),(0,m.j4)(f,{key:5,size:"sm",color:"primary",flat:"",round:"",icon:"fas fa-plus",onClick:i.addCorrelationConfig},null,8,["onClick"])):(0,m.kq)("",!0)])))),128)),0==n.ruleConfigObject.discrepancy_config.length?((0,m.wg)(),(0,m.j4)(f,{key:0,size:"md",color:"primary",icon:"fas fa-plus",label:"Add mis-match criteria",onClick:i.addCorrelationConfig},null,8,["onClick"])):(0,m.kq)("",!0)])),_:1})])),_:1})])}var ll={props:["modelValue","datasourceAColumns","datasourceBColumns"],emits:["update:modelValue"],data(){return{ruleConfigObject:this.modelValue,datasourceAList:null,datasourceBList:null}},methods:{addCorrelationConfig(){this.ruleConfigObject.discrepancy_config.push({field_a:this.datasourceAColumns[0],field_b:this.datasourceBColumns[0],numeric_tolerance_from:0,numeric_tolerance_to:0,percentage_mode:!1,formula_mode:!1,formula_alias:null})},removeCorrelationConfig(e){this.ruleConfigObject.discrepancy_config.splice(e,1)},filterFieldListA(e,t,o){e.length<0?o():t((()=>{const t=e.toLowerCase();this.datasourceAList=this.datasourceAColumns.filter((e=>e.toLowerCase().indexOf(t)>-1))}))},filterFieldListB(e,t,o){e.length<0?o():t((()=>{const t=e.toLowerCase();this.datasourceBList=this.datasourceBColumns.filter((e=>e.toLowerCase().indexOf(t)>-1))}))},onNewValue(e,t){console.log(`New value added for index ${e}, field ${t}`)}},watch:{ruleConfigObject(e){this.$emit("update:modelValue",e)},modelValue(e){this.ruleConfigObject=e}}};const al=(0,O.Z)(ll,[["render",ol]]);var nl=al;$()(ll,"components",{QCard:Ve.Z,QItemSection:R.Z,QItemLabel:P.Z,QCardSection:Oe.Z,QSelect:je.Z,QInput:A.Z,QIcon:T.Z,QTooltip:N.Z,QBtn:W.Z});const il={class:"col q-gutter-y-md"},rl=(0,m._)("br",null,null,-1),sl=(0,m._)("br",null,null,-1),cl=(0,m._)("br",null,null,-1),ul=(0,m._)("br",null,null,-1);function dl(e,t,o,l,a,n){const i=(0,m.up)("q-item-label"),r=(0,m.up)("q-item-section"),s=(0,m.up)("q-tooltip"),c=(0,m.up)("q-input"),u=(0,m.up)("q-btn"),d=(0,m.up)("q-card-section"),p=(0,m.up)("q-card");return(0,m.wg)(),(0,m.iD)("div",il,[(0,m.Wm)(p,{class:"q-pa-sm",flat:"",bordered:""},{default:(0,m.w5)((()=>[(0,m.Wm)(r,{class:"q-ma-xs"},{default:(0,m.w5)((()=>[(0,m.Wm)(i,null,{default:(0,m.w5)((()=>[(0,m.Uk)("Case config")])),_:1})])),_:1}),(0,m.Wm)(d,{class:"q-gutter-xs"},{default:(0,m.w5)((()=>[((0,m.wg)(!0),(0,m.iD)(m.HY,null,(0,m.Ko)(a.caseConfigObject,((e,t)=>((0,m.wg)(),(0,m.iD)("div",{class:"row q-gutter-xs items-center",key:t},[(0,m.Wm)(c,{outlined:"",class:"col-1",modelValue:a.caseConfigObject[t].case_id,"onUpdate:modelValue":e=>a.caseConfigObject[t].case_id=e,modelModifiers:{number:!0},type:"number",label:"Case ID"},{default:(0,m.w5)((()=>[(0,m.Wm)(s,{anchor:"top left",self:"bottom left",offset:[0,5]},{default:(0,m.w5)((()=>[(0,m.Uk)(' Map to this id below in "Case mapping". '),rl,(0,m.Uk)("Value will be written in RAPO_RESULT_KEY column in the discrepancy table. ")])),_:1})])),_:2},1032,["modelValue","onUpdate:modelValue"]),(0,m.Wm)(c,{outlined:"",class:"col-3",modelValue:a.caseConfigObject[t].case_value,"onUpdate:modelValue":e=>a.caseConfigObject[t].case_value=e,modelModifiers:{number:!0},label:"Value"},{default:(0,m.w5)((()=>[(0,m.Wm)(s,{anchor:"top left",self:"bottom left",offset:[0,5]},{default:(0,m.w5)((()=>[(0,m.Uk)(' Name of the case e.g. "Customer not defined". '),sl,(0,m.Uk)("Value will be written in RAPO_RESULT_VALUE column in the discrepancy table. ")])),_:1})])),_:2},1032,["modelValue","onUpdate:modelValue"]),(0,m.Wm)(c,{outlined:"",class:"col-2",modelValue:a.caseConfigObject[t].case_type,"onUpdate:modelValue":e=>a.caseConfigObject[t].case_type=e,modelModifiers:{number:!0},label:"Type"},{default:(0,m.w5)((()=>[(0,m.Wm)(s,{anchor:"top left",self:"bottom left",offset:[0,5]},{default:(0,m.w5)((()=>[(0,m.Uk)(' Case type e.g. "Error". '),cl,(0,m.Uk)("Value will be written in RAPO_RESULT_TYPE column in the discrepancy table. ")])),_:1})])),_:2},1032,["modelValue","onUpdate:modelValue"]),(0,m.Wm)(c,{outlined:"",class:"col-4",modelValue:a.caseConfigObject[t].case_description,"onUpdate:modelValue":e=>a.caseConfigObject[t].case_description=e,modelModifiers:{number:!0},label:"Description"},{default:(0,m.w5)((()=>[(0,m.Wm)(s,{anchor:"top left",self:"bottom left",offset:[0,5]},{default:(0,m.w5)((()=>[(0,m.Uk)(" Case description for documentation purpose. "),ul,(0,m.Uk)("Used and visible only here in control config. ")])),_:1})])),_:2},1032,["modelValue","onUpdate:modelValue"]),(0,m.Wm)(u,{size:"sm",color:"primary",flat:"",round:"",icon:"fas fa-minus",onClick:e=>n.removeCaseConfig(t)},null,8,["onClick"]),t==a.caseConfigObject.length-1?((0,m.wg)(),(0,m.j4)(u,{key:0,size:"sm",color:"primary",flat:"",round:"",icon:"fas fa-plus",onClick:e=>n.addCaseConfig(t+2)},null,8,["onClick"])):(0,m.kq)("",!0)])))),128)),0==a.caseConfigObject.length?((0,m.wg)(),(0,m.j4)(u,{key:0,size:"md",color:"primary",icon:"fas fa-plus",label:"Add case definition",onClick:t[0]||(t[0]=e=>n.addCaseConfig(1))})):(0,m.kq)("",!0)])),_:1})])),_:1})])}var ml={props:["modelValue"],emits:["update:modelValue"],data(){return{caseConfigObject:this.modelValue,datasourceAList:null,datasourceBList:null}},methods:{addCaseConfig(e){this.caseConfigObject.push({case_id:e,case_value:null,case_type:"Error",case_description:null})},removeCaseConfig(e){this.caseConfigObject.splice(e,1)}},watch:{caseConfigObject(e){this.$emit("update:modelValue",e)},modelValue(e){this.caseConfigObject=e}}};const pl=(0,O.Z)(ml,[["render",dl]]);var fl=pl;$()(ml,"components",{QCard:Ve.Z,QItemSection:R.Z,QItemLabel:P.Z,QCardSection:Oe.Z,QInput:A.Z,QTooltip:N.Z,QBtn:W.Z});const hl={class:"col q-gutter-y-md"};function _l(e,t,o,a,n,i){const r=(0,m.up)("q-item-label"),s=(0,m.up)("q-item-section"),c=(0,m.up)("q-input"),u=(0,m.up)("q-icon"),d=(0,m.up)("q-select"),p=(0,m.up)("q-btn"),f=(0,m.up)("q-card-section"),h=(0,m.up)("q-card");return(0,m.wg)(),(0,m.iD)("div",hl,[(0,m.Wm)(h,{class:"q-pa-sm",flat:"",bordered:""},{default:(0,m.w5)((()=>[(0,m.Wm)(s,{class:"q-ma-xs"},{default:(0,m.w5)((()=>[(0,m.Wm)(r,null,{default:(0,m.w5)((()=>[(0,m.Uk)("Iteration config")])),_:1})])),_:1}),(0,m.Wm)(f,{class:"q-gutter-xs"},{default:(0,m.w5)((()=>[((0,m.wg)(!0),(0,m.iD)(m.HY,null,(0,m.Ko)(n.iterationConfigObject,((e,o)=>((0,m.wg)(),(0,m.iD)("div",{class:"row q-gutter-xs items-center",key:o},[(0,m.Wm)(c,{outlined:"",class:"col-1",modelValue:n.iterationConfigObject[o].iteration_id,"onUpdate:modelValue":e=>n.iterationConfigObject[o].iteration_id=e,modelModifiers:{number:!0},type:"number",label:"Iteration"},null,8,["modelValue","onUpdate:modelValue"]),(0,m.Wm)(c,{outlined:"",class:"col-3",modelValue:n.iterationConfigObject[o].iteration_description,"onUpdate:modelValue":e=>n.iterationConfigObject[o].iteration_description=e,modelModifiers:{number:!0},label:"Description"},null,8,["modelValue","onUpdate:modelValue"]),(0,m.Wm)(c,{outlined:"",class:"col-2",modelValue:n.iterationConfigObject[o].period_back,"onUpdate:modelValue":e=>n.iterationConfigObject[o].period_back=e,modelModifiers:{number:!0},type:"number",label:"Periods back"},{prepend:(0,m.w5)((()=>[(0,m.Wm)(u,{name:"fas fa-history",onClick:t[0]||(t[0]=(0,l.iM)((()=>{}),["stop","prevent"]))})])),_:2},1032,["modelValue","onUpdate:modelValue"]),(0,m.Wm)(c,{class:"col-2",modelValue:n.iterationConfigObject[o].period_number,"onUpdate:modelValue":e=>n.iterationConfigObject[o].period_number=e,modelModifiers:{number:!0},type:"number",outlined:"",label:"Number of periods"},{prepend:(0,m.w5)((()=>[(0,m.Wm)(u,{name:"fas fa-calendar-day",onClick:t[1]||(t[1]=(0,l.iM)((()=>{}),["stop","prevent"]))})])),_:2},1032,["modelValue","onUpdate:modelValue"]),(0,m.Wm)(d,{class:"col-2",outlined:"","emit-value":"","map-options":"",modelValue:n.iterationConfigObject[o].period_type,"onUpdate:modelValue":e=>n.iterationConfigObject[o].period_type=e,options:[{label:"Day",value:"D"},{label:"Week",value:"W"},{label:"Month",value:"M"}],label:"Period type"},null,8,["modelValue","onUpdate:modelValue"]),(0,m.Wm)(d,{class:"col-1",outlined:"","emit-value":"","map-options":"",modelValue:n.iterationConfigObject[o].status,"onUpdate:modelValue":e=>n.iterationConfigObject[o].status=e,options:[{label:"Yes",value:"Y"},{label:"No",value:"N"}],label:"Active"},null,8,["modelValue","onUpdate:modelValue"]),(0,m.Wm)(p,{size:"sm",color:"primary",flat:"",round:"",icon:"fas fa-minus",onClick:e=>i.removeIterationConfig(o)},null,8,["onClick"]),o==n.iterationConfigObject.length-1?((0,m.wg)(),(0,m.j4)(p,{key:0,size:"sm",color:"primary",flat:"",round:"",icon:"fas fa-plus",onClick:e=>i.addIterationConfig(o+2)},null,8,["onClick"])):(0,m.kq)("",!0)])))),128)),0==n.iterationConfigObject.length?((0,m.wg)(),(0,m.j4)(p,{key:0,size:"md",color:"primary",icon:"fas fa-plus",label:"Add run iteration",onClick:t[2]||(t[2]=e=>i.addIterationConfig(1))})):(0,m.kq)("",!0)])),_:1})])),_:1})])}var gl={props:["modelValue","pb"],emits:["update:modelValue"],data(){return{iterationConfigObject:this.modelValue,datasourceAList:null,datasourceBList:null}},methods:{addIterationConfig(e){this.iterationConfigObject.push({iteration_id:e,iteration_description:"Iteration #"+e,period_back:Number(this.pb)+e,period_number:1,period_type:"D",status:"Y"})},removeIterationConfig(e){this.iterationConfigObject.splice(e,1)}},watch:{iterationConfigObject(e){this.$emit("update:modelValue",e)},modelValue(e){this.iterationConfigObject=e}}};const bl=(0,O.Z)(gl,[["render",_l]]);var yl=bl;$()(gl,"components",{QCard:Ve.Z,QItemSection:R.Z,QItemLabel:P.Z,QCardSection:Oe.Z,QInput:A.Z,QIcon:T.Z,QSelect:je.Z,QBtn:W.Z});const wl={class:"col q-gutter-y-md"};function Cl(e,t,o,l,a,n){const i=(0,m.up)("q-item-label"),r=(0,m.up)("q-item-section"),s=(0,m.up)("q-select"),c=(0,m.up)("q-icon"),u=(0,m.up)("q-btn"),d=(0,m.up)("q-card-section"),p=(0,m.up)("q-card");return(0,m.wg)(),(0,m.iD)("div",wl,[(0,m.Wm)(p,{class:"q-pa-sm",flat:"",bordered:""},{default:(0,m.w5)((()=>[(0,m.Wm)(r,{class:"q-ma-xs"},{default:(0,m.w5)((()=>[(0,m.Wm)(i,null,{default:(0,m.w5)((()=>[(0,m.Uk)("Match criteria")])),_:1})])),_:1}),(0,m.Wm)(d,{class:"q-gutter-xs"},{default:(0,m.w5)((()=>[((0,m.wg)(!0),(0,m.iD)(m.HY,null,(0,m.Ko)(a.ruleConfigObject,((e,t)=>((0,m.wg)(),(0,m.iD)("div",{class:"row q-gutter-xs items-center",key:t},[(0,m.Wm)(s,{"use-input":"","hide-selected":"","fill-input":"",class:"col-4",outlined:"",onFilter:n.filterFieldListA,modelValue:a.ruleConfigObject[t].column_a,"onUpdate:modelValue":e=>a.ruleConfigObject[t].column_a=e,options:a.datasourceAList,label:"Field A"},null,8,["onFilter","modelValue","onUpdate:modelValue","options"]),(0,m.Wm)(c,{name:"fas fa-equals",size:"20px",color:"blue-grey-3"}),(0,m.Wm)(s,{"use-input":"","hide-selected":"","fill-input":"",class:"col-4",outlined:"",onFilter:n.filterFieldListB,modelValue:a.ruleConfigObject[t].column_b,"onUpdate:modelValue":e=>a.ruleConfigObject[t].column_b=e,options:a.datasourceBList,label:"Field B"},null,8,["onFilter","modelValue","onUpdate:modelValue","options"]),(0,m.Wm)(u,{size:"sm",color:"primary",flat:"",round:"",icon:"fas fa-minus",onClick:e=>n.removeCorrelationConfig(t)},null,8,["onClick"]),t==a.ruleConfigObject.length-1?((0,m.wg)(),(0,m.j4)(u,{key:0,size:"sm",color:"primary",flat:"",round:"",icon:"fas fa-plus",onClick:n.addCorrelationConfig},null,8,["onClick"])):(0,m.kq)("",!0)])))),128)),a.ruleConfigObject&&0!=a.ruleConfigObject.length?(0,m.kq)("",!0):((0,m.wg)(),(0,m.j4)(u,{key:0,size:"md",color:"primary",icon:"fas fa-plus",label:"Add match criteria",onClick:n.addCorrelationConfig},null,8,["onClick"]))])),_:1})])),_:1})])}var kl={props:["modelValue","datasourceAColumns","datasourceBColumns"],emits:["update:modelValue"],data(){return{ruleConfigObject:this.modelValue,datasourceAList:null,datasourceBList:null}},methods:{addCorrelationConfig(){this.ruleConfigObject.push({column_a:this.datasourceAColumns[0],column_b:this.datasourceBColumns[0]})},removeCorrelationConfig(e){this.ruleConfigObject.splice(e,1)},filterFieldListA(e,t,o){e.length<0?o():t((()=>{const t=e.toLowerCase();this.datasourceAList=this.datasourceAColumns.filter((e=>e.toLowerCase().indexOf(t)>-1))}))},filterFieldListB(e,t,o){e.length<0?o():t((()=>{const t=e.toLowerCase();this.datasourceBList=this.datasourceBColumns.filter((e=>e.toLowerCase().indexOf(t)>-1))}))}},watch:{ruleConfigObject(e){this.$emit("update:modelValue",e)},modelValue(e){this.ruleConfigObject=e}},mounted(){this.ruleConfigObject&&0!=this.ruleConfigObject.length||(this.ruleConfigObject=[])}};const vl=(0,O.Z)(kl,[["render",Cl]]);var xl=vl;$()(kl,"components",{QCard:Ve.Z,QItemSection:R.Z,QItemLabel:P.Z,QCardSection:Oe.Z,QSelect:je.Z,QIcon:T.Z,QBtn:W.Z});const ql={class:"col q-gutter-y-md"};function Vl(e,t,o,l,a,n){const i=(0,m.up)("q-item-label"),r=(0,m.up)("q-item-section"),s=(0,m.up)("q-select"),c=(0,m.up)("q-icon"),u=(0,m.up)("q-btn"),d=(0,m.up)("q-card-section"),p=(0,m.up)("q-card");return(0,m.wg)(),(0,m.iD)("div",ql,[(0,m.Wm)(p,{class:"q-pa-sm",flat:"",bordered:""},{default:(0,m.w5)((()=>[(0,m.Wm)(r,{class:"q-ma-xs"},{default:(0,m.w5)((()=>[(0,m.Wm)(i,null,{default:(0,m.w5)((()=>[(0,m.Uk)("Mismatch criteria")])),_:1})])),_:1}),(0,m.Wm)(d,{class:"q-gutter-xs"},{default:(0,m.w5)((()=>[((0,m.wg)(!0),(0,m.iD)(m.HY,null,(0,m.Ko)(a.ruleErrorObject,((e,t)=>((0,m.wg)(),(0,m.iD)("div",{class:"row q-gutter-xs items-center",key:t},[(0,m.Wm)(s,{"use-input":"","hide-selected":"","fill-input":"",class:"col-4",outlined:"",onFilter:n.filterFieldListA,modelValue:a.ruleErrorObject[t].column_a,"onUpdate:modelValue":e=>a.ruleErrorObject[t].column_a=e,options:a.datasourceAList,label:"Field A"},null,8,["onFilter","modelValue","onUpdate:modelValue","options"]),(0,m.Wm)(c,{name:"fas fa-not-equal",size:"20px",color:"blue-grey-3"}),(0,m.Wm)(s,{"use-input":"","hide-selected":"","fill-input":"",class:"col-4",outlined:"",onFilter:n.filterFieldListB,modelValue:a.ruleErrorObject[t].column_b,"onUpdate:modelValue":e=>a.ruleErrorObject[t].column_b=e,options:a.datasourceBList,label:"Field B"},null,8,["onFilter","modelValue","onUpdate:modelValue","options"]),(0,m.Wm)(u,{size:"sm",color:"primary",flat:"",round:"",icon:"fas fa-minus",onClick:e=>n.removeCorrelationConfig(t)},null,8,["onClick"]),t==a.ruleErrorObject.length-1?((0,m.wg)(),(0,m.j4)(u,{key:0,size:"sm",color:"primary",flat:"",round:"",icon:"fas fa-plus",onClick:n.addCorrelationConfig},null,8,["onClick"])):(0,m.kq)("",!0)])))),128)),a.ruleErrorObject&&0!=a.ruleErrorObject.length?(0,m.kq)("",!0):((0,m.wg)(),(0,m.j4)(u,{key:0,size:"md",color:"primary",icon:"fas fa-plus",label:"Add match criteria",onClick:n.addCorrelationConfig},null,8,["onClick"]))])),_:1})])),_:1})])}var Ol={props:["modelValue","datasourceAColumns","datasourceBColumns"],emits:["update:modelValue"],data(){return{ruleErrorObject:this.modelValue,datasourceAList:null,datasourceBList:null}},methods:{addCorrelationConfig(){this.ruleErrorObject.push({column_a:this.datasourceAColumns[0],column_b:this.datasourceBColumns[0]})},removeCorrelationConfig(e){this.ruleErrorObject.splice(e,1)},filterFieldListA(e,t,o){e.length<0?o():t((()=>{const t=e.toLowerCase();this.datasourceAList=this.datasourceAColumns.filter((e=>e.toLowerCase().indexOf(t)>-1))}))},filterFieldListB(e,t,o){e.length<0?o():t((()=>{const t=e.toLowerCase();this.datasourceBList=this.datasourceBColumns.filter((e=>e.toLowerCase().indexOf(t)>-1))}))}},watch:{ruleErrorObject(e){this.$emit("update:modelValue",e)},modelValue(e){this.ruleErrorObject=e}},mounted(){Array.isArray(this.ruleErrorObject)&&0!==this.ruleErrorObject.length||(this.ruleErrorObject=[])}};const jl=(0,O.Z)(Ol,[["render",Vl]]);var Sl=jl;$()(Ol,"components",{QCard:Ve.Z,QItemSection:R.Z,QItemLabel:P.Z,QCardSection:Oe.Z,QSelect:je.Z,QIcon:T.Z,QBtn:W.Z});const Dl={class:"col q-gutter-y-md"};function Wl(e,t,o,l,a,n){const i=(0,m.up)("q-item-label"),r=(0,m.up)("q-item-section"),s=(0,m.up)("q-select"),c=(0,m.up)("q-icon"),u=(0,m.up)("q-input"),d=(0,m.up)("q-btn"),p=(0,m.up)("q-card-section"),f=(0,m.up)("q-card");return(0,m.wg)(),(0,m.iD)("div",Dl,[(0,m.Wm)(f,{class:"q-pa-sm",flat:"",bordered:""},{default:(0,m.w5)((()=>[(0,m.Wm)(r,{class:"q-ma-xs"},{default:(0,m.w5)((()=>[(0,m.Wm)(i,null,{default:(0,m.w5)((()=>[(0,m.Uk)("Select output columns")])),_:1})])),_:1}),(0,m.Wm)(p,{class:"q-gutter-xs"},{default:(0,m.w5)((()=>[((0,m.wg)(!0),(0,m.iD)(m.HY,null,(0,m.Ko)(a.cmpOutputTable,((e,t)=>((0,m.wg)(),(0,m.iD)("div",{class:"row q-gutter-xs items-center",key:t},[(0,m.Wm)(s,{"use-input":"","hide-selected":"","fill-input":"",class:"col-3",outlined:"",clearable:"",onFilter:n.filterFieldListA,modelValue:a.cmpOutputTable[t].column_a,"onUpdate:modelValue":e=>a.cmpOutputTable[t].column_a=e,options:a.datasourceAList,label:"Field A"},null,8,["onFilter","modelValue","onUpdate:modelValue","options"]),(0,m.Wm)(c,{name:"fas fa-circle",size:"15px",color:"blue-grey-3"}),(0,m.Wm)(s,{"use-input":"","hide-selected":"","fill-input":"",class:"col-3",outlined:"",clearable:"",onFilter:n.filterFieldListB,modelValue:a.cmpOutputTable[t].column_b,"onUpdate:modelValue":e=>a.cmpOutputTable[t].column_b=e,options:a.datasourceBList,label:"Field B"},null,8,["onFilter","modelValue","onUpdate:modelValue","options"]),(0,m.Wm)(c,{name:"fas fa-circle",size:"15px",color:"blue-grey-3"}),(0,m.Wm)(u,{"use-input":"","fill-input":"",class:"col-3",outlined:"",clearable:"",modelValue:a.cmpOutputTable[t].column,"onUpdate:modelValue":e=>a.cmpOutputTable[t].column=e,label:"Name (optional)"},null,8,["modelValue","onUpdate:modelValue"]),(0,m.Wm)(d,{size:"sm",color:"primary",flat:"",round:"",icon:"fas fa-minus",onClick:e=>n.removeCorrelationConfig(t)},null,8,["onClick"]),t==a.cmpOutputTable.length-1?((0,m.wg)(),(0,m.j4)(d,{key:0,size:"sm",color:"primary",flat:"",round:"",icon:"fas fa-plus",onClick:n.addColumn},null,8,["onClick"])):(0,m.kq)("",!0)])))),128)),a.cmpOutputTable&&0!=a.cmpOutputTable.length?(0,m.kq)("",!0):((0,m.wg)(),(0,m.j4)(d,{key:0,size:"md",color:"primary",icon:"fas fa-plus",label:"Add column",onClick:n.addColumn},null,8,["onClick"]))])),_:1})])),_:1})])}var Tl={props:["modelValue","datasourceAColumns","datasourceBColumns"],emits:["update:modelValue"],data(){return{cmpOutputTable:this.modelValue,datasourceAList:null,datasourceBList:null}},methods:{addColumn(){this.cmpOutputTable.push({column_a:null,column_b:null,column:null})},removeCorrelationConfig(e){this.cmpOutputTable.splice(e,1)},filterFieldListA(e,t,o){e.length<0?o():t((()=>{const t=e.toLowerCase();this.datasourceAList=this.datasourceAColumns.filter((e=>e.toLowerCase().indexOf(t)>-1))}))},filterFieldListB(e,t,o){e.length<0?o():t((()=>{const t=e.toLowerCase();this.datasourceBList=this.datasourceBColumns.filter((e=>e.toLowerCase().indexOf(t)>-1))}))}},watch:{cmpOutputTable(e){this.$emit("update:modelValue",e)},modelValue(e){this.cmpOutputTable=e}},mounted(){this.cmpOutputTable&&0!=this.cmpOutputTable.length||(this.cmpOutputTable=[])}};const Ul=(0,O.Z)(Tl,[["render",Wl]]);var Ll=Ul;$()(Tl,"components",{QCard:Ve.Z,QItemSection:R.Z,QItemLabel:P.Z,QCardSection:Oe.Z,QSelect:je.Z,QIcon:T.Z,QInput:A.Z,QBtn:W.Z});var Al={components:{CodeBox:vo,ScheduleEditBox:Wo,ReconciliationDiscrepancyCheckboxes:Ho,ReconciliationMatchCriteriaBox:el,ReconciliationMisMatchCriteriaBox:nl,CaseConfigBox:fl,IterationConfigBox:yl,ComparisonMatchCriteriaBox:xl,ComparisonMisMatchCriteriaBox:Sl,ComparisonOutputTableBox:Ll},props:{controlId:{type:String,default:"new"}},data(){return{tab:"main",control:{},controlVersions:[],controlVersion:null,log_days_back:7,datasourceColumns:null,datasourceDateColumns:null,datasourceAColumns:null,datasourceADateColumns:null,datasourceANumColumns:null,datasourceBColumns:null,datasourceBDateColumns:null,datasourceBNumColumns:null,datasourceList:null,datasourceListOptions:null,datasourceListAOptions:null,datasourceListBOptions:null,withDeleteionDrop:"N",scheduleObject:{mday:null,wday:null,hour:"8",min:"15",sec:"0",trigger_id:null},ruleConfigObject:{},cmpOutputTable:[],ruleErrorObject:null,caseConfigObject:[],iterationConfigObject:[],controlLogs:[],versionChanges:[],$q:(0,q.Z)()}},computed:{...(0,x.Se)(["controlCatalogueById"]),scheduleType(){return String(this.schedule_config).indexOf("/")>-1||String(this.schedule_config).indexOf("-")>-1||String(this.scheduleObject.mday).indexOf(",")>-1&&String(this.scheduleObject.wday).indexOf(",")>-1||(String(this.scheduleObject.hour)+String(this.scheduleObject.min)+String(this.scheduleObject.sec)).indexOf(",")>-1?"X":null==this.scheduleObject.hour&&null==this.scheduleObject.min&&null==this.scheduleObject.sec?"C":this.scheduleObject.mday?"M":this.scheduleObject.wday?"W":"D"}},methods:{...(0,x.nv)(["updateControlCatalogue"]),updateLogDaysBack(){this.getControlLogs(this.control.control_name,this.log_days_back)},toDateString(e){var t=new Date(e).toISOString("de-DE").substring(0,10);return t},toTimeString(e){var t=new Date(e).toISOString("de-DE").substring(11,19);return t},toDateTimeString(e){var t=new Date(e).toISOString("de-DE").substring(0,19).replace("T"," ");return t},round(e,t){return Math.round(e*Math.pow(10,t))/Math.pow(10,t)},showFullLog(e){this.$q.dialog({title:this.control.control_name+" |  PID:"+e.process_id+" Full log",message:"<pre>"+this.formattedJSON(e)+"</pre>",html:!0,style:{width:"800px",maxWidth:"90vw"}})},showVersionChanges(){this.versionChanges.length&&this.$q.dialog({title:this.control.control_name+" | "+this.controlVersion.label,message:"<pre>"+this.formattedJSON(this.versionChanges)+"</pre>",html:!0,style:{width:"800px",maxWidth:"90vw"}})},formattedJSON(e){return JSON.stringify(e,null,2).replace(/\\"/g,"'")},filterDatasourceList(e,t,o){e.length<0?o():t((()=>{const t=e.toLowerCase();this.datasourceListOptions=this.datasourceList.filter((e=>e.toLowerCase().indexOf(t)>-1))}))},getDatasources(){this.$q.loadingBar.start(),fetch("/api/get-datasources",{method:"GET",headers:{Authorization:`Bearer ${this.$store.getters.getToken}`,"Content-Type":"application/json"}}).then((e=>{if(e.ok)return e.json()})).then((e=>{this.datasourceList=e,this.$q.loadingBar.stop()}))},async getDatasourceColumns(e,t){if(!e)return[];const o=await fetch("/api/get-datasource-columns?datasource_name="+e,{method:"GET",headers:{Authorization:`Bearer ${this.$store.getters.getToken}`,"Content-Type":"application/json"}});if(o.ok){const e=await o.json();var l;return l="numeric"===t?e.filter((e=>e.data_type.toUpperCase().includes("NUMBER")||e.data_type.toUpperCase().includes("FLOAT")||e.data_type.toUpperCase().includes("DOUBLE")||e.data_type.toUpperCase().includes("DECIMAL")||e.data_type.toUpperCase().includes("INTEGER"))).map((e=>e.column_name)):"string"===t?e.filter((e=>e.data_type.toUpperCase().includes("CHAR"))).map((e=>e.column_name)):"date"===t?e.filter((e=>e.data_type.toUpperCase().includes("TIMESTAMP")||"DATE"===e.data_type.toUpperCase())).map((e=>e.column_name)):e.map((e=>e.column_name)),l}},populateColumns(e){"A"===e?this.control.output_table_a_columns=this.datasourceAColumns:"B"===e?this.control.output_table_b_columns=this.datasourceBColumns:this.control.output_table_columns=this.datasourceColumns},controlTypeChanged(e){this.control.source_name=null,this.control.source_name_a=null,this.control.source_name_b=null,this.control.source_date_field=null,this.control.source_date_field_a=null,this.control.source_key_field_a=null,this.control.source_date_field_b=null,this.control.source_key_field_b=null,this.control.rule_config=null,this.control.error_definition=null,this.control.source_filter=null,this.control.source_filter_a=null,this.control.source_filter_b=null,this.control.case_config=null,this.control.timeout=3600,this.control.result_config=null,this.control.output_table=null,this.control.output_table_a=null,this.control.output_table_b=null,this.control.output_table_columns=[],this.control.output_table_a_columns=[],this.control.output_table_b_columns=[],this.control.output_limit=null,"REC"===e?(this.ruleConfigObject={need_issues_a:!0,need_issues_b:!0,need_recons_a:!1,need_recons_b:!1,output_limit_a:null,output_limit_b:null,allow_duplicates:!1,correlation_limit:!0,time_shift_from:0,time_shift_to:0,time_tolerance_from:0,time_tolerance_to:0,correlation_config:[],discrepancy_config:[]},this.control.source_key_field_a="TAG",this.control.source_key_field_b="TAG"):"CMP"===e?(this.ruleConfigObject=[],this.ruleErrorObject=[]):("REP"===e||"ANL"===e)&&(this.ruleConfigObject={})},async getControlVersions(e){const t=await fetch("/api/get-control-versions?control_id="+e,{method:"GET",headers:{Authorization:`Bearer ${this.$store.getters.getToken}`,"Content-Type":"application/json"}});if(t.ok){const e=await t.json();this.controlVersions=e,this.controlVersions.forEach((e=>{e.label="v."+new Date(e.updated_date?e.updated_date:e.created_date).toISOString("de-DE").substring(0,19).replace("T"," ")})),this.control.label="v."+new Date(this.control.updated_date?this.control.updated_date:this.control.created_date).toISOString("de-DE").substring(0,19).replace("T"," "),this.controlVersions.unshift(this.control),this.controlVersion=this.controlVersions[0]}},async getControlLogs(e,t){const o=await fetch("/api/read-control-logs?control_name="+e+"&days="+t,{method:"GET",headers:{Authorization:`Bearer ${this.$store.getters.getToken}`,"Content-Type":"application/json"}});if(o.ok){const e=await o.json();this.controlLogs=e}},ReconciliationTimeFromToleranceChanged(){isNaN(Number(this.ruleConfigObject.time_tolerance_from))||(Number(this.ruleConfigObject.time_tolerance_from)<Number(this.ruleConfigObject.time_shift_from)&&(this.ruleConfigObject.time_shift_from=this.ruleConfigObject.time_tolerance_from),Number(this.ruleConfigObject.time_tolerance_from)>Number(this.ruleConfigObject.time_tolerance_to)&&(this.ruleConfigObject.time_tolerance_to=this.ruleConfigObject.time_tolerance_from))},ReconciliationTimeToToleranceChanged(){isNaN(Number(this.ruleConfigObject.time_tolerance_to))||(Number(this.ruleConfigObject.time_tolerance_to)>Number(this.ruleConfigObject.time_shift_to)&&(this.ruleConfigObject.time_shift_to=this.ruleConfigObject.time_tolerance_to),Number(this.ruleConfigObject.time_tolerance_from)>Number(this.ruleConfigObject.time_tolerance_to)&&(this.ruleConfigObject.time_tolerance_from=this.ruleConfigObject.time_tolerance_to))},ReconciliationTimeShiftFromChanged(){isNaN(Number(this.ruleConfigObject.time_shift_from))||(Number(this.ruleConfigObject.time_shift_from)>Number(this.ruleConfigObject.time_tolerance_from)&&(this.ruleConfigObject.time_tolerance_from=this.ruleConfigObject.time_shift_from),Number(this.ruleConfigObject.time_shift_from)>Number(this.ruleConfigObject.time_shift_to)&&(this.ruleConfigObject.time_shift_to=this.ruleConfigObject.time_shift_from))},ReconciliationTimeShiftToChanged(){isNaN(Number(this.ruleConfigObject.time_shift_to))||(Number(this.ruleConfigObject.time_shift_to)<Number(this.ruleConfigObject.time_tolerance_to)&&(this.ruleConfigObject.time_tolerance_to=this.ruleConfigObject.time_shift_to),Number(this.ruleConfigObject.time_shift_from)>Number(this.ruleConfigObject.time_shift_to)&&(this.ruleConfigObject.time_shift_from=this.ruleConfigObject.time_shift_to))},initializeControl(){try{"ANL"===this.control.control_type||"REP"===this.control.control_type?(this.control["output_table"]&&(this.control.output_table_columns=JSON.parse(this.control["output_table"]).columns),this.getDatasourceColumns(this.control.source_name).then((e=>this.datasourceColumns=e)),this.getDatasourceColumns(this.control.source_name,"date").then((e=>this.datasourceDateColumns=e))):"REC"===this.control.control_type?(this.control["output_table_a"]&&(this.control.output_table_a_columns=JSON.parse(this.control["output_table_a"]).columns),this.getDatasourceColumns(this.control.source_name_a).then((e=>this.datasourceAColumns=e)),this.getDatasourceColumns(this.control.source_name_a,"date").then((e=>this.datasourceADateColumns=e)),this.getDatasourceColumns(this.control.source_name_a,"numeric").then((e=>this.datasourceANumColumns=e)),this.control["output_table_b"]&&(this.control.output_table_b_columns=JSON.parse(this.control["output_table_b"]).columns),this.getDatasourceColumns(this.control.source_name_b).then((e=>this.datasourceBColumns=e)),this.getDatasourceColumns(this.control.source_name_b,"date").then((e=>this.datasourceBDateColumns=e)),this.getDatasourceColumns(this.control.source_name_b,"numeric").then((e=>this.datasourceBNumColumns=e))):"CMP"===this.control.control_type&&(this.control["output_table"]&&(this.cmpOutputTable=JSON.parse(this.control["output_table"]).columns,this.cmpOutputTable.forEach((e=>{for(const t in e)null===e[t]?delete e[t]:e[t]=e[t].toUpperCase()}))),this.getDatasourceColumns(this.control.source_name_a).then((e=>this.datasourceAColumns=e)),this.getDatasourceColumns(this.control.source_name_a,"date").then((e=>this.datasourceADateColumns=e)),this.getDatasourceColumns(this.control.source_name_b).then((e=>this.datasourceBColumns=e)),this.getDatasourceColumns(this.control.source_name_b,"date").then((e=>this.datasourceBDateColumns=e))),this.control.rule_config?this.ruleConfigObject=JSON.parse(this.control.rule_config):"REC"===this.control.control_type?this.ruleConfigObject={need_issues_a:!0,need_issues_b:!0,need_recons_a:!1,need_recons_b:!1,allow_duplicates:!1,time_shift_from:0,time_shift_to:0,time_tolerance_from:0,time_tolerance_to:0,correlation_config:[],discrepancy_config:[]}:"CMP"===this.control.control_type?this.ruleConfigObject=[]:("REP"===this.control.control_type||this.control.control_type,this.ruleConfigObject=null),this.control.schedule_config?this.scheduleObject=this.toScheduleObject(this.control.schedule_config):this.scheduleObject={mday:null,wday:null,hour:"8",min:"15",sec:"0",trigger_id:null},this.control.error_definition&&"CMP"==this.control.control_type&&(this.ruleErrorObject=JSON.parse(this.control.error_definition)),this.control.case_config?this.caseConfigObject=JSON.parse(this.control.case_config):this.caseConfigObject=[],this.control.iteration_config?this.iterationConfigObject=JSON.parse(this.control.iteration_config):this.iterationConfigObject=[],this.withDeleteionDrop="Y"===this.control.with_drop?"drop":"Y"===this.control.with_deletion?"deletion":"N"}catch(e){console.log(e)}},controlVersionChanged(){var e=this.controlVersions[0];this.control=this.controlVersion,this.versionChanges=[];for(const t in e)e[t]!==this.control[t]&&"label"!==t&&"audit_date"!==t&&"updated_date"!==t&&"updated_by"!==t&&this.versionChanges.push({field:t,oldValue:e[t],newValue:this.control[t]});this.initializeControl()},deletionDropChanged(){"N"===this.withDeleteionDrop?(this.control.with_deletion="N",this.control.with_drop="N"):"deletion"===this.withDeleteionDrop?(this.control.with_deletion="Y",this.control.with_drop="N"):"drop"===this.withDeleteionDrop&&(this.control.with_deletion="N",this.control.with_drop="Y")},addNewLineIfLastLineStartsWithDoubleDash(e){return e&&e.includes("--")&&"\n"!=e.substr(e.length-1)?e+"\n":e},toScheduleString(e){var t={mday:e.mday?String(e.mday):null,wday:e.wday?String(e.wday):null,hour:null!=e.hour?String(e.hour):null,min:null!=e.min?String(e.min):null,sec:null!=e.sec?String(e.sec):null,trigger_id:e.trigger_id?e.trigger_id:null};return JSON.stringify(t)},toScheduleObject(e){var t={mday:null,wday:null,hour:"8",min:"15",sec:"0",trigger_id:null},o=null;return e&&(t=JSON.parse(e),o||(o=String(e).indexOf("/")>-1||String(e).indexOf("-")>-1||String(t.mday).indexOf(",")>-1&&String(t.wday).indexOf(",")>-1||(String(t.hour)+String(t.min)+String(t.sec)).indexOf(",")>-1?"X":t.hour||t.min||t.sec?t.mday?"M":t.wday?"W":"D":"C","X"!==o&&(t.mday&&(t.mday=String(t.mday).split(",").map((e=>Number(e)))),t.wday&&(t.wday=String(t.wday).split(",").map((e=>Number(e))))))),t},save(){this.control.source_filter=this.addNewLineIfLastLineStartsWithDoubleDash(this.control.source_filter),this.control.source_filter_a=this.addNewLineIfLastLineStartsWithDoubleDash(this.control.source_filter_a),this.control.source_filter_b=this.addNewLineIfLastLineStartsWithDoubleDash(this.control.source_filter_b),this.control.schedule_config=this.toScheduleString(this.scheduleObject),"ANL"===this.control.control_type&&(this.control.output_table_columns?this.control.output_table=JSON.stringify({columns:this.control.output_table_columns}):this.control.output_table=null,this.caseConfigObject.length>0?this.control.case_config=JSON.stringify(this.caseConfigObject):this.control.case_config=null),"REP"===this.control.control_type&&(this.control.output_table_columns?this.control.output_table=JSON.stringify({columns:this.control.output_table_columns}):this.control.output_table=null),"REC"===this.control.control_type&&(this.control.output_limit=null,this.control.output_table_a_columns?this.control.output_table_a=JSON.stringify({columns:this.control.output_table_a_columns}):this.control.output_table_a=null,this.control.output_table_b_columns?this.control.output_table_b=JSON.stringify({columns:this.control.output_table_b_columns}):this.control.output_table_b=null,this.ruleConfigObject.need_issues_a||this.ruleConfigObject.need_recons_a?this.control.need_a="Y":this.control.need_a="N",this.ruleConfigObject.need_issues_b||this.ruleConfigObject.need_recons_b?this.control.need_b="Y":this.control.need_b="N",this.control.source_key_field_a||(this.control.source_key_field_a="TAG"),this.control.source_key_field_b||(this.control.source_key_field_b="TAG"),this.control.rule_config=JSON.stringify(this.ruleConfigObject)),"CMP"===this.control.control_type&&(this.control.output_table_a=null,this.control.output_table_b=null,this.control.output_table=[],this.cmpOutputTable.forEach((e=>{for(const t in e)null===e[t]?delete e[t]:e[t]=e[t].toUpperCase()})),this.control.output_table=JSON.stringify({columns:this.cmpOutputTable}),this.control.error_definition=JSON.stringify(this.ruleErrorObject),this.control.rule_config=JSON.stringify(this.ruleConfigObject),this.caseConfigObject.length>0?this.control.case_config=JSON.stringify(this.caseConfigObject):this.control.case_config=null),this.iterationConfigObject.length>0?this.control.iteration_config=JSON.stringify(this.iterationConfigObject):this.control.iteration_config=null,fetch("/api/save-control",{method:"POST",headers:{Authorization:`Bearer ${this.$store.getters.getToken}`,"Content-Type":"application/json"},body:JSON.stringify(this.control)}).then((e=>(e.ok||(this.$q.notify({type:"warning",message:"Network response was not ok: "+e}),this.$router.push({name:"controls"})),e.json()))).then((e=>{this.$q.notify({type:"positive",message:"Control: "+this.control.control_name+" was saved successfully."}),this.$router.push({name:"controls"})})).catch((e=>{this.$q.notify({type:"negative",message:"Error:"+e}),this.$router.push({name:"controls"})}))},validateAndSave(){var e=null;this.control.control_name?"N"!==this.control.with_drop||"N"!==this.control.with_deletion||this.control.days_retention?null==this.control.instance_limit||this.control.instance_limit<1?(this.$q.notify({type:"negative",message:"Please select instance limit greater than 0"}),e="main"):"REC"===this.control.control_type||"CMP"===this.control.control_type?this.control.source_name_a&&this.control.source_name_b?"REC"!==this.control.control_type||this.control.source_date_field_a&&this.control.source_date_field_b||(this.$q.notify({type:"negative",message:"Please select a date columns for both A and B datasources."}),e="data"):(this.$q.notify({type:"negative",message:"Please select a data source for both A and B."}),e="data"):"ANL"===this.control.control_type||"REP"===this.control.control_type?this.control.source_name||(this.$q.notify({type:"negative",message:"Please select a data source."}),e="data"):this.control.period_back&&this.control.period_number||(this.$q.notify({type:"negative",message:"Please enter a period back and number of periods."}),e="scheduler"):(this.$q.notify({type:"negative",message:"Please select data retention period"}),e="main"):(this.$q.notify({type:"negative",message:"Please enter a control name."}),e="main"),e?this.tab=e:this.save()},cancel(){this.$q.notify({type:"warning",message:"Changes discarded"}),this.$router.push({name:"controls"})},recreateSchema(e){this.$q.dialog({title:e.control_name,message:"Recreate result tables? Past discrepancies will be deleted!",cancel:!0,persistent:!0}).onOk((()=>{fetch("/api/delete-control-output-tables?name="+e.control_name,{method:"DELETE",headers:{Authorization:`Bearer ${this.$store.getters.getToken}`,"Content-Type":"application/json"}}).then((t=>{t.ok?this.$q.notify({type:"positive",message:"Schema for "+e.control_name+" was deleted. It will be recreated on the next run."}):this.$q.notify({type:"negative",message:"Schema deletion for "+e.control_name+"' failed"})})).then((()=>{this.$q.loadingBar.stop()}))})).onCancel((()=>{this.$q.notify({message:"No action taken"})}))},copyFetchSQLToClipboard(e,t){if(e.control_name=this.control.control_name,e.control_type=this.control.control_type,"REP"==e.control_type)return void this.$q.notify({type:"negative",message:"Source B SQL generation is not possible for Reports."});var o="";o="A"==t?"select * from "+this.control.source_name_a+"\nwhere "+this.control.source_date_field_a+" between to_date('"+this.toDateTimeString(e.date_from)+"' , 'YYYY-MM-DD HH24:MI:SS')\n\tand to_date('"+this.toDateTimeString(e.date_to)+"' , 'YYYY-MM-DD HH24:MI:SS')\n\tand "+(this.control.source_filter_a?this.control.source_filter_a:"1=1")+";":"B"==t?"select * from "+this.control.source_name_b+"\nwhere "+this.control.source_date_field_b+" between to_date('"+this.toDateTimeString(e.date_from)+"' , 'YYYY-MM-DD HH24:MI:SS')\n\tand to_date('"+this.toDateTimeString(e.date_to)+"' , 'YYYY-MM-DD HH24:MI:SS')\n\tand "+(this.control.source_filter_b?this.control.source_filter_b:"1=1")+";":"select * from "+this.control.source_name+"\nwhere "+(this.control.source_date_field?this.control.source_date_field+" between to_date('"+this.toDateTimeString(e.date_from)+"' , 'YYYY-MM-DD HH24:MI:SS')\n\tand to_date('"+this.toDateTimeString(e.date_to)+"' , 'YYYY-MM-DD HH24:MI:SS')\n\tand ":"")+(this.control.source_filter?this.control.source_filter:"1=1")+";";const l=document.createElement("textarea");l.value=o,l.style.position="fixed",document.body.appendChild(l),l.focus(),l.select();try{document.execCommand("copy"),this.$q.notify({type:"positive",message:"Fetched records "+("T"==t?"A":t)+"-side SQL statement copied to clipboard: "+l.value})}catch(a){this.$q.notify({type:"negative",message:"Failed to copy SQL to clipboard"})}document.body.removeChild(l)},copyToClipboard(e,t){e.control_name=this.control.control_name,e.control_type=this.control.control_type;var o="T";"REC"==e.control_type&&(o=t);const l=document.createElement("textarea");l.value="select * from RAPO_RES"+o+"_"+e.control_name+" where RAPO_PROCESS_ID = "+e.process_id+";",l.style.position="fixed",document.body.appendChild(l),l.focus(),l.select();try{document.execCommand("copy"),this.$q.notify({type:"positive",message:"Discrepancies "+("T"==t?"A":t)+"-side SQL statement copied to clipboard: "+l.value})}catch(a){this.$q.notify({type:"negative",message:"Failed to copy SQL to clipboard"})}document.body.removeChild(l)},newDaySeparator(e){if(e>0){const t=this.toDateString(this.controlLogs[e-1].added),o=this.toDateString(this.controlLogs[e].added);if(t!=o)return!0}return!1},reRun(e){e.control_name=this.control.control_name,this.$q.dialog({title:e.control_name,message:"Re-run for '"+this.toDateString(e.date_from)+"'"+(this.toDateString(e.date_from)!=this.toDateString(e.date_to)?" - '"+this.toDateString(e.date_to)+"'":"")+"?",cancel:!0,persistent:!0}).onOk((()=>{var t="/api/run-control?name="+e.control_name+"&date_from="+this.toDateTimeString(e.date_from)+"&date_to="+this.toDateTimeString(e.date_to);fetch(t,{method:"POST",headers:{Authorization:`Bearer ${this.$store.getters.getToken}`,"Content-Type":"application/json"}}).then((t=>{if(t.ok)return this.$q.notify({type:"positive",message:"Control "+e.control_name+" queued for execution"}),t.json();this.$q.notify({type:"negative",message:"Control "+e.control_name+" failed"})})).then((()=>{this.$q.loadingBar.stop(),this.getControlLogs(this.control.control_name,this.log_days_back)}))})).onCancel((()=>{this.$q.notify({message:"No action taken"})}))},showCancelDialog(e){e.control_name=this.control.control_name,this.$q.dialog({title:e.control_name,message:"Do you really want to stop the execution of this control?",cancel:!0,persistent:!0}).onOk((()=>{fetch("/api/cancel-control?id="+e.process_id,{method:"POST",headers:{Authorization:`Bearer ${this.$store.getters.getToken}`,"Content-Type":"application/json"}}).then((t=>{t.ok?(this.$q.notify({type:"positive",message:"Control run '"+e.control_name+" PID:"+e.process_id+"' was canceled"}),e.status="C"):this.$q.notify({type:"negative",message:"Stopping control run '"+e.control_name+" PID:"+e.process_id+"' failed"})})).then((()=>{this.$q.loadingBar.stop()}))})).onCancel((()=>{this.$q.notify({message:"No action taken"})}))},showRevokeDialog(e){e.control_name=this.control.control_name,this.$q.dialog({title:e.control_name,message:"Do you really want to revoke this control run?",cancel:!0,persistent:!0}).onOk((()=>{fetch("/api/revoke-control-run?id="+e.process_id,{method:"DELETE",headers:{Authorization:`Bearer ${this.$store.getters.getToken}`,"Content-Type":"application/json"}}).then((t=>{t.ok?(this.$q.notify({type:"positive",message:"Control run '"+e.control_name+" PID:"+e.process_id+"' was revoked"}),e.status="X"):this.$q.notify({type:"negative",message:"Revoke of control run '"+e.control_name+" PID:"+e.process_id+"' failed"})})).then((()=>{this.$q.loadingBar.stop()}))})).onCancel((()=>{this.$q.notify({message:"No action taken"})}))},dropTemporaryTables(e){e.control_name=this.control.control_name,this.$q.dialog({title:e.control_name,message:"Do you really want to drop all debug temporary tables for execution with PID: "+e.process_id+" ?",cancel:!0,persistent:!0}).onOk((()=>{fetch("/api/delete-control-temporary-tables?id="+e.process_id,{method:"DELETE",headers:{Authorization:`Bearer ${this.$store.getters.getToken}`,"Content-Type":"application/json"}}).then((t=>{t.ok?this.$q.notify({type:"positive",message:"All temporary tables for PID:"+e.process_id+" were deleted"}):this.$q.notify({type:"negative",message:"Temporary tables deletion for PID:"+e.process_id+"' failed"})})).then((()=>{this.$q.loadingBar.stop()}))})).onCancel((()=>{this.$q.notify({message:"No action taken"})}))},startControlLogsRefreshTimer(){this.refreshTimer=setInterval(this.updateLogDaysBack,5e3)},stopControlLogsRefreshTimer(){clearInterval(this.refreshTimer)}},watch:{"control.source_name":function(e,t){(t&&e&&t!==e||!this.control.control_id)&&(this.getDatasourceColumns(e).then((e=>{this.datasourceColumns=e,this.control.output_table_columns=null})),this.getDatasourceColumns(e,"date").then((e=>{this.datasourceDateColumns=e,this.control.source_date_field=e[0]})))},"control.source_name_a":function(e,t){(t&&e&&t!==e||!this.control.control_id)&&(this.getDatasourceColumns(e).then((e=>{this.datasourceAColumns=e,this.control.output_table_a_columns=null})),this.getDatasourceColumns(e,"date").then((e=>{this.datasourceADateColumns=e,this.control.source_date_field_a=e[0]}))),this.getDatasourceColumns(e,"numeric").then((e=>{this.datasourceANumColumns=e}))},"control.source_name_b":function(e,t){(t&&e&&t!==e||!this.control.control_id)&&(this.getDatasourceColumns(e).then((e=>{this.datasourceBColumns=e})),this.getDatasourceColumns(e,"date").then((e=>{this.datasourceBDateColumns=e,this.control.source_date_field_b=e[0]})),this.getDatasourceColumns(e,"numeric").then((e=>{this.datasourceBNumColumns=e})))}},async mounted(){this.getDatasources();let e=this.controlCatalogueById(this.controlId);e||"new"==this.controlId||(await this.updateControlCatalogue(),e=this.controlCatalogueById(this.controlId)),e?(this.control=e,this.getControlVersions(this.controlId),this.getControlLogs(this.control.control_name,this.log_days_back),this.$route.query.clone&&(delete this.control.control_id,this.control.control_name=this.control.control_name+"_CLONE"),this.startControlLogsRefreshTimer(),this.initializeControl()):this.control={control_engine:"DB",control_type:"ANL",status:"Y",need_hook:"Y",need_postrun_hook:"Y",need_prerun_hook:"N",with_deletion:"N",with_drop:"N",days_back:1,days_retention:90,parallelism:1,instance_limit:1,period_type:"D",period_back:1,period_number:1}},unmounted(){this.stopControlLogsRefreshTimer()}},Nl=o(3554),El=o(5748),Il=o(3276),Zl=o(4810),Ql=o(9082),Rl=o(6790);const Pl=(0,O.Z)(Al,[["render",ho],["__scopeId","data-v-1d3b288c"]]);var zl=Pl;$()(Al,"components",{QPage:B.Z,QChip:pe.Z,QCard:Ve.Z,QTabs:Nl.Z,QTab:El.Z,QSeparator:We.Z,QForm:Il.Z,QTabPanels:Zl.Z,QTabPanel:Ql.Z,QInput:A.Z,QSelect:je.Z,QIcon:T.Z,QBadge:Rl.Z,QTooltip:N.Z,QItem:Q.Z,QItemSection:R.Z,QBtn:W.Z,QItemLabel:P.Z,QCardSection:Oe.Z,QMarkupTable:ze.Z,QAvatar:Ze.Z,QMenu:Be.Z,QList:Z.Z}),$()(Al,"directives",{ClosePopup:Ue.Z});const Bl=e=>((0,m.dD)("data-v-72a335b5"),e=e(),(0,m.Cn)(),e),Ml={class:"row q-gutter-lg"},Fl={key:0},$l={key:0},Yl={class:"row items-center q-mb-md"},Hl=Bl((()=>(0,m._)("thead",null,[(0,m._)("tr",{class:"bg-blue-grey-2"},[(0,m._)("th",{class:"text-left"},"Type"),(0,m._)("th",{class:"text-left"},"Start"),(0,m._)("th",{class:"text-right"},"Runtime"),(0,m._)("th",{class:"text-center"},"PID"),(0,m._)("th",{class:"text-left"},"Processname"),(0,m._)("th",{class:"text-left"},"Run from"),(0,m._)("th",{class:"text-left"},"Run to"),(0,m._)("th",{class:"text-right"},"Fetched A"),(0,m._)("th",{class:"text-right"},"Fetched B"),(0,m._)("th",{class:"text-right"},"Discr. A"),(0,m._)("th",{class:"text-right"},"Discr. B"),(0,m._)("th",{class:"text-right"},"Err. lvl A [%]"),(0,m._)("th",{class:"text-right"},"Err. lvl B [%]"),(0,m._)("th",{class:"text-right"},"PV"),(0,m._)("th",{class:"text-left"},"Status"),(0,m._)("th",{class:"text-left"})])],-1))),Jl={class:"text-blue-grey-7"},Kl={class:"text-grey-7 q-px-sm"},Xl=["onClick"],Gl={key:1},ea=["onClick"],ta={key:1},oa=["onClick"],la={key:1},aa=["onClick"],na={key:1},ia=["onClick"],ra={key:1};function sa(e,t,o,a,n,i){const r=(0,m.up)("q-icon"),s=(0,m.up)("q-avatar"),c=(0,m.up)("q-btn"),u=(0,m.up)("run-control-dialog"),d=(0,m.up)("q-select"),f=(0,m.up)("q-input"),h=(0,m.up)("q-tooltip"),_=(0,m.up)("q-chip"),g=(0,m.up)("router-link"),b=(0,m.up)("q-item-section"),y=(0,m.up)("q-item"),w=(0,m.up)("q-separator"),C=(0,m.up)("q-list"),k=(0,m.up)("q-menu"),v=(0,m.up)("q-markup-table"),x=(0,m.up)("q-page"),q=(0,m.Q2)("close-popup");return(0,m.wg)(),(0,m.j4)(x,null,{default:(0,m.w5)((()=>[(0,m._)("h2",Ml,[(0,m._)("div",null,[(0,m.Uk)("Last control result"),1!=i.filteredControlResultsLen?((0,m.wg)(),(0,m.iD)("span",Fl,"s")):(0,m.kq)("",!0)]),0===n.controlResults.length?((0,m.wg)(),(0,m.iD)("div",$l,[(0,m.Wm)(s,{size:"lg",color:"grey-5"},{default:(0,m.w5)((()=>[(0,m.Wm)(r,{name:"fas fa-sync fa-spin"})])),_:1})])):(0,m.kq)("",!0)]),(0,m._)("div",Yl,[(0,m.Wm)(c,{class:"col-2 q-mb-md q-pa-sm",size:"lg",color:"primary",icon:"fas fa-play-circle",label:"Run control",onClick:t[0]||(t[0]=t=>e.$refs.runControlDialog.open())}),(0,m.Wm)(u,{ref:"runControlDialog",hook:i.refreshControlResults},null,8,["hook"]),(0,m.Wm)(d,{modelValue:n.filter.type,"onUpdate:modelValue":t[1]||(t[1]=e=>n.filter.type=e),class:"col-2 q-mb-md q-pa-sm",clearable:"",outlined:"","options-dense":"","emit-value":"","map-options":"",options:[{label:"ANL - Analysis",value:"ANL"},{label:"REC - Reconciliation",value:"REC"},{label:"CMP - Comparison",value:"CMP"},{label:"REP - Reporting",value:"REP"}],label:"Control type"},null,8,["modelValue"]),(0,m.Wm)(f,{clearable:"",class:"col q-mb-md q-pa-sm",outlined:"",modelValue:n.filter.control_name,"onUpdate:modelValue":t[2]||(t[2]=e=>n.filter.control_name=e),label:"Control name",maxlength:"45"},null,8,["modelValue"]),(0,m.Wm)(d,{modelValue:n.filter.status,"onUpdate:modelValue":t[3]||(t[3]=e=>n.filter.status=e),class:"col-4 q-mb-md q-pa-sm",outlined:"","options-dense":"","emit-value":"","map-options":"",multiple:"","use-chips":"",options:[{label:"Initiated",value:"I"},{label:"Waiting",value:"W"},{label:"Started",value:"S"},{label:"Running",value:"P"},{label:"Finishing",value:"F"},{label:"Done",value:"D"},{label:"Error",value:"E"},{label:"Canceled",value:"C"},{label:"Revoked",value:"X"}],label:"Run status"},null,8,["modelValue"]),(0,m.Wm)(c,{flat:"",round:"",color:"grey",class:"q-mb-md q-pa-sm",icon:"fas fa-times-circle",onClick:i.clearFilters},{default:(0,m.w5)((()=>[(0,m.Wm)(h,{anchor:"top left",self:"bottom left",offset:[15,10]},{default:(0,m.w5)((()=>[(0,m.Uk)(" Clear filters ")])),_:1})])),_:1},8,["onClick"])]),(0,m._)("div",null,[(0,m.Wm)(v,{dense:""},{default:(0,m.w5)((()=>[Hl,(0,m._)("tbody",null,[((0,m.wg)(!0),(0,m.iD)(m.HY,null,(0,m.Ko)(i.filteredControlResults,((e,t)=>((0,m.wg)(),(0,m.iD)("tr",{key:e.process_id},[(0,m._)("td",{class:(0,p.C_)(["text-center",{"new-day-separator":i.newDaySeparator(t)}])},[(0,m.Wm)(_,{clickable:"",size:"11px","text-color":"white",class:(0,p.C_)([{"bg-pink-8":"ANL"===e.control_type,"bg-teal-8":"REC"===e.control_type,"bg-lime-8":"CMP"===e.control_type,"bg-indigo-6":"REP"===e.control_type},"text-weight-bold"]),onClick:t=>this.filter.type=e.control_type},{default:(0,m.w5)((()=>[(0,m.Uk)((0,p.zw)(e.control_type),1)])),_:2},1032,["class","onClick"])],2),(0,m._)("td",{class:(0,p.C_)(["text-left",{"new-day-separator":i.newDaySeparator(t)}])},[(0,m._)("div",Jl,[(0,m._)("strong",null,(0,p.zw)(i.toDateString(e.start_date)),1),(0,m._)("small",Kl,(0,p.zw)(i.toTimeString(e.start_date)),1)])],2),(0,m._)("td",{class:(0,p.C_)(["text-right",{"new-day-separator":i.newDaySeparator(t)}])},(0,p.zw)(i.round(e.duration_minutes,1))+" min",3),(0,m._)("td",{class:(0,p.C_)(["text-center text-weight-bold text-blue-grey-7",{"new-day-separator":i.newDaySeparator(t)}])},(0,p.zw)(e.process_id),3),(0,m._)("td",{class:(0,p.C_)(["text-left text-weight-bold text-teal",{"new-day-separator":i.newDaySeparator(t)}])},[this.getSearch?(0,m.kq)("",!0):((0,m.wg)(),(0,m.j4)(c,{key:0,size:"7px",color:"grey-5",round:"",flat:"",icon:"fas fa-search",onClick:(0,l.iM)((t=>this.filter.control_name=e.control_name),["stop"])},null,8,["onClick"])),(0,m.Wm)(g,{to:{name:"edit-control",params:{controlId:e.control_id}}},{default:(0,m.w5)((()=>[(0,m._)("span",{class:(0,p.C_)(["col cursor-pointer",{"text-pink-8":"ANL"===e.control_type,"text-teal-8":"REC"===e.control_type,"text-lime-8":"CMP"===e.control_type,"text-indigo-6":"REP"===e.control_type}]),style:{"font-size":"13px"}},(0,p.zw)(e.control_name),3)])),_:2},1032,["to"])],2),(0,m._)("td",{class:(0,p.C_)(["text-left text-weight-bold text-blue-grey-7",{"new-day-separator":i.newDaySeparator(t)}])},(0,p.zw)(i.toDateString(e.date_from)),3),(0,m._)("td",{class:(0,p.C_)(["text-left text-weight-bold text-blue-grey-7",{"new-day-separator":i.newDaySeparator(t)}])},(0,p.zw)(i.toDateString(e.date_to)),3),(0,m._)("td",{class:(0,p.C_)(["text-right",{"new-day-separator":i.newDaySeparator(t)}])},[e.fetched_number_a>0&&"REP"===e.control_type?((0,m.wg)(),(0,m.iD)("span",{key:0,class:"cursor-pointer text-red",onClick:t=>i.copyToClipboard(e,"A")},(0,p.zw)(Number(e.fetched_number_a).toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:0})),9,Xl)):((0,m.wg)(),(0,m.iD)("span",Gl,(0,p.zw)(Number(e.fetched_number_a).toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:0})),1))],2),(0,m._)("td",{class:(0,p.C_)(["text-right",{"new-day-separator":i.newDaySeparator(t)}])},(0,p.zw)(Number(e.fetched_number_b).toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:0})),3),(0,m._)("td",{class:(0,p.C_)(["text-right",{"new-day-separator":i.newDaySeparator(t)}])},[e.error_number_a>0?((0,m.wg)(),(0,m.iD)("span",{key:0,class:"cursor-pointer text-red",onClick:t=>i.copyToClipboard(e,"A")},(0,p.zw)(Number(e.error_number_a).toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:0})),9,ea)):((0,m.wg)(),(0,m.iD)("span",ta,(0,p.zw)(Number(e.error_number_a).toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:0})),1))],2),(0,m._)("td",{class:(0,p.C_)(["text-right",{"new-day-separator":i.newDaySeparator(t)}])},[e.error_number_b>0?((0,m.wg)(),(0,m.iD)("span",{key:0,class:"cursor-pointer text-red",onClick:t=>i.copyToClipboard(e,"B")},(0,p.zw)(Number(e.error_number_b).toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:0})),9,oa)):((0,m.wg)(),(0,m.iD)("span",la,(0,p.zw)(Number(e.error_number_b).toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:0})),1))],2),(0,m._)("td",{class:(0,p.C_)(["text-right",{"new-day-separator":i.newDaySeparator(t)}])},[e.error_level_a>0?((0,m.wg)(),(0,m.iD)("span",{key:0,class:"cursor-pointer text-red",onClick:t=>i.copyToClipboard(e,"A")},(0,p.zw)(Number(e.error_level_a).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}))+"% ",9,aa)):((0,m.wg)(),(0,m.iD)("span",na,(0,p.zw)(Number(e.error_level_a).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}))+"% ",1))],2),(0,m._)("td",{class:(0,p.C_)(["text-right",{"new-day-separator":i.newDaySeparator(t)}])},[e.error_level_b>0?((0,m.wg)(),(0,m.iD)("span",{key:0,class:"cursor-pointer text-red",onClick:t=>i.copyToClipboard(e,"B")},(0,p.zw)(Number(e.error_level_b).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}))+"% ",9,ia)):((0,m.wg)(),(0,m.iD)("span",ra,(0,p.zw)(Number(e.error_level_b).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}))+"% ",1))],2),(0,m._)("td",{class:(0,p.C_)(["text-right",{"new-day-separator":i.newDaySeparator(t)}])},[0==e.prerequisite_value?((0,m.wg)(),(0,m.j4)(r,{key:0,class:"cursor-pointer text-red",name:"fas fa-stop"},{default:(0,m.w5)((()=>[(0,m.Wm)(h,{anchor:"top left",self:"bottom left",offset:[0,5]},{default:(0,m.w5)((()=>[(0,m.Uk)(" Prerequisite SQL value is 0 ")])),_:1})])),_:1})):(0,m.kq)("",!0),e.prerequisite_value?((0,m.wg)(),(0,m.j4)(r,{key:1,class:"cursor-pointer text-green",name:"fas fa-play"},{default:(0,m.w5)((()=>[(0,m.Wm)(h,{anchor:"top left",self:"bottom left",offset:[0,5]},{default:(0,m.w5)((()=>[(0,m.Uk)(" Prerequisite SQL value is "+(0,p.zw)(e.prerequisite_value),1)])),_:2},1024)])),_:2},1024)):(0,m.kq)("",!0)],2),(0,m._)("td",{class:(0,p.C_)(["text-left",{"new-day-separator":i.newDaySeparator(t)}])},[(0,m.Wm)(_,{clickable:"",class:"cursor-pointer",onClick:t=>!this.filter.status.includes(e.status)&&this.filter.status.push(e.status)},{default:(0,m.w5)((()=>["I"==e.status?((0,m.wg)(),(0,m.j4)(s,{key:0,icon:"fas fa-plus-circle",color:"indigo","text-color":"white"})):(0,m.kq)("",!0),"W"==e.status?((0,m.wg)(),(0,m.j4)(s,{key:1,icon:"fas fa-pause-circle",color:"amber-7","text-color":"white"})):(0,m.kq)("",!0),"S"==e.status?((0,m.wg)(),(0,m.j4)(s,{key:2,icon:"fas fa-play-circle",color:"blue","text-color":"white"})):(0,m.kq)("",!0),"P"==e.status?((0,m.wg)(),(0,m.j4)(s,{key:3,icon:"fas fa-sync fa-spin",color:"blue","text-color":"white"})):(0,m.kq)("",!0),"F"==e.status?((0,m.wg)(),(0,m.j4)(s,{key:4,icon:"fas fa-circle-notch fa-spin",color:"blue","text-color":"white"})):(0,m.kq)("",!0),"D"==e.status?((0,m.wg)(),(0,m.j4)(s,{key:5,icon:"fas fa-check-circle",color:"green","text-color":"white"})):(0,m.kq)("",!0),"C"==e.status?((0,m.wg)(),(0,m.j4)(s,{key:6,icon:"fas fa-times-circle",color:"purple-3","text-color":"white"})):(0,m.kq)("",!0),"E"==e.status?((0,m.wg)(),(0,m.j4)(s,{key:7,icon:"fas fa-exclamation-circle",color:"deep-orange","text-color":"white"})):(0,m.kq)("",!0),"X"==e.status?((0,m.wg)(),(0,m.j4)(s,{key:8,icon:"fas fa-times-circle",color:"grey","text-color":"white"})):(0,m.kq)("",!0),e.status?(0,m.kq)("",!0):((0,m.wg)(),(0,m.j4)(s,{key:9,icon:"fas fa-times-circle",color:"deep-purple-3","text-color":"white"})),(0,m.Uk)(" "+(0,p.zw)("I"===e.status?"Initiated":"W"===e.status?"Waiting":"S"===e.status?"Started":"P"==e.status?"Running":"F"===e.status?"Finishing":"D"===e.status?"Done":"E"===e.status?"Error":"C"===e.status?"Canceled":"X"===e.status?"Revoked":e.status?"Unknown":"Void"),1)])),_:2},1032,["onClick"])],2),(0,m._)("td",{class:(0,p.C_)(["text-left",{"new-day-separator":i.newDaySeparator(t)}]),style:{width:"50px"}},[(0,m.Wm)(c,{size:"sm",color:"grey-7",round:"",flat:"",icon:"fas fa-ellipsis-v"},{default:(0,m.w5)((()=>[(0,m.Wm)(k,null,{default:(0,m.w5)((()=>[(0,m.Wm)(C,{dense:"",class:"text-no-wrap"},{default:(0,m.w5)((()=>[(0,m.wy)(((0,m.wg)(),(0,m.j4)(y,{dense:"",clickable:"",onClick:t=>i.reRun(e)},{default:(0,m.w5)((()=>[(0,m.Wm)(b,null,{default:(0,m.w5)((()=>[(0,m.Uk)(" Re-run ")])),_:1})])),_:2},1032,["onClick"])),[[q]]),(0,m.Wm)(u,{control_name:e.control_name,hook:i.refreshControlResults},{default:(0,m.w5)((()=>[(0,m.Wm)(y,{dense:"",clickable:"",class:"col items-center"},{default:(0,m.w5)((()=>[(0,m.Wm)(b,null,{default:(0,m.w5)((()=>[(0,m.Uk)(" Run ")])),_:1})])),_:1})])),_:2},1032,["control_name","hook"]),(0,m.Wm)(w),(0,m.Wm)(y,{dense:"",clickable:"",onClick:t=>i.navigateToEditControl(e)},{default:(0,m.w5)((()=>[(0,m.Wm)(b,null,{default:(0,m.w5)((()=>[(0,m.Uk)(" Edit control ")])),_:1})])),_:2},1032,["onClick"]),(0,m.Wm)(w),"X"!=e.status?(0,m.wy)(((0,m.wg)(),(0,m.j4)(y,{key:0,dense:"",clickable:"",class:"col items-center",onClick:t=>i.showRevokeDialog(e)},{default:(0,m.w5)((()=>[(0,m.Wm)(b,null,{default:(0,m.w5)((()=>[(0,m.Uk)(" Revoke run ")])),_:1})])),_:2},1032,["onClick"])),[[q]]):(0,m.kq)("",!0),"F"==e.status||"I"==e.status||"W"==e.status||"S"==e.status||"P"==e.status?(0,m.wy)(((0,m.wg)(),(0,m.j4)(y,{key:1,dense:"",clickable:"",class:"col items-center",onClick:t=>i.showCancelDialog(e)},{default:(0,m.w5)((()=>[(0,m.Wm)(b,null,{default:(0,m.w5)((()=>[(0,m.Uk)(" Cancel run ")])),_:1})])),_:2},1032,["onClick"])),[[q]]):(0,m.kq)("",!0),"E"==e.status?(0,m.wy)(((0,m.wg)(),(0,m.j4)(y,{key:2,dense:"",clickable:"",class:"col items-center",onClick:t=>i.showErrorDialog(e)},{default:(0,m.w5)((()=>[(0,m.Wm)(b,null,{default:(0,m.w5)((()=>[(0,m.Uk)(" Show error log ")])),_:1})])),_:2},1032,["onClick"])),[[q]]):(0,m.kq)("",!0),(0,m.wy)(((0,m.wg)(),(0,m.j4)(y,{dense:"",clickable:"",onClick:t=>i.dropTemporaryTables(e)},{default:(0,m.w5)((()=>[(0,m.Wm)(b,null,{default:(0,m.w5)((()=>[(0,m.Uk)(" Drop temporary tables ")])),_:1})])),_:2},1032,["onClick"])),[[q]])])),_:2},1024)])),_:2},1024)])),_:2},1024)],2)])))),128))])])),_:1})])])),_:1})}var ca={components:{RunControlDialog:Ae},data(){return{$q:(0,q.Z)(),pagination:{rowsPerPage:0},refreshTimer:null,controlResults:[],filter:{type:null,status:[]}}},methods:{...(0,x.nv)(["updateControlResults","updateSearch"]),newDaySeparator(e){if(e>0){const t=this.toDateString(this.filteredControlResults[e-1].start_date),o=this.toDateString(this.filteredControlResults[e].start_date);if(t!=o)return!0}return!1},copyToClipboard(e,t){var o="T";"REC"==e.control_type&&(o=t);const l=document.createElement("textarea");l.value="select * from RAPO_RES"+o+"_"+e.control_name+" where RAPO_PROCESS_ID = "+e.process_id+";",l.style.position="fixed",document.body.appendChild(l),l.focus(),l.select();try{document.execCommand("copy"),this.$q.notify({type:"positive",message:"SQL statement copied to clipboard: "+l.value})}catch(a){this.$q.notify({type:"negative",message:"Failed to copy SQL to clipboard"})}document.body.removeChild(l)},toDateString(e){var t=new Date(e).toISOString("de-DE").substring(0,10);return t},toTimeString(e){var t=new Date(e).toISOString("de-DE").substring(11,19);return t},toDateTimeString(e){var t=new Date(e).toISOString("de-DE").substring(0,19).replace("T"," ");return t},round(e,t){return Math.round(e*Math.pow(10,t))/Math.pow(10,t)},navigateToEditControl(e){this.$router.push({name:"edit-control",params:{controlId:e.control_id}})},showErrorDialog(e){this.$q.dialog({title:e.control_name+" - Error log",message:e.text_error?"<div class='text-body2' style='font-family: monospace;'>"+e.text_error.replace(/\n/g,"<br>$&")+"</div>":"No error log available",html:!0,style:{width:"800px",maxWidth:"90vw"}})},reRun(e){this.$q.dialog({title:e.control_name,message:"Re-run for '"+this.toDateString(e.date_from)+"'"+(this.toDateString(e.date_from)!=this.toDateString(e.date_to)?" - '"+this.toDateString(e.date_to)+"'":"")+"?",cancel:!0,persistent:!0}).onOk((()=>{var t="/api/run-control?name="+e.control_name+"&date_from="+this.toDateTimeString(e.date_from)+"&date_to="+this.toDateTimeString(e.date_to);fetch(t,{method:"POST",headers:{Authorization:`Bearer ${this.$store.getters.getToken}`,"Content-Type":"application/json"}}).then((t=>{if(t.ok)return this.$q.notify({type:"positive",message:"Control "+e.control_name+" queued for execution"}),t.json();this.$q.notify({type:"negative",message:"Control "+e.control_name+" failed"})})).then((()=>{this.$q.loadingBar.stop(),this.refreshControlResults()}))})).onCancel((()=>{this.$q.notify({message:"No action taken"})}))},showCancelDialog(e){this.$q.dialog({title:e.control_name,message:"Do you really want to stop the execution of this control?",cancel:!0,persistent:!0}).onOk((()=>{fetch("/api/cancel-control?id="+e.process_id,{method:"POST",headers:{Authorization:`Bearer ${this.$store.getters.getToken}`,"Content-Type":"application/json"}}).then((t=>{t.ok?(this.$q.notify({type:"positive",message:"Control run '"+e.control_name+" PID:"+e.process_id+"' was canceled"}),e.status="C"):this.$q.notify({type:"negative",message:"Stopping control run '"+e.control_name+" PID:"+e.process_id+"' failed"})})).then((()=>{this.$q.loadingBar.stop()}))})).onCancel((()=>{this.$q.notify({message:"No action taken"})}))},showRevokeDialog(e){this.$q.dialog({title:e.control_name,message:"Do you really want to revoke this control run?",cancel:!0,persistent:!0}).onOk((()=>{fetch("/api/revoke-control-run?id="+e.process_id,{method:"DELETE",headers:{Authorization:`Bearer ${this.$store.getters.getToken}`,"Content-Type":"application/json"}}).then((t=>{t.ok?(this.$q.notify({type:"positive",message:"Control run '"+e.control_name+" PID:"+e.process_id+"' was revoked"}),e.status="X"):this.$q.notify({type:"negative",message:"Revoke of control run '"+e.control_name+" PID:"+e.process_id+"' failed"})})).then((()=>{this.$q.loadingBar.stop()}))})).onCancel((()=>{this.$q.notify({message:"No action taken"})}))},dropTemporaryTables(e){this.$q.dialog({title:e.control_name,message:"Do you really want to drop all debug temporary tables for execution with PID: "+e.process_id+" ?",cancel:!0,persistent:!0}).onOk((()=>{fetch("/api/delete-control-temporary-tables?id="+e.process_id,{method:"DELETE",headers:{Authorization:`Bearer ${this.$store.getters.getToken}`,"Content-Type":"application/json"}}).then((t=>{t.ok?this.$q.notify({type:"positive",message:"All temporary tables for PID:"+e.process_id+" were deleted"}):this.$q.notify({type:"negative",message:"Temporary tables deletion for PID:"+e.process_id+"' failed"})})).then((()=>{this.$q.loadingBar.stop()}))})).onCancel((()=>{this.$q.notify({message:"No action taken"})}))},async refreshControlResults(){this.controlResults=await this.updateControlResults()},async startRefreshTimer(){this.refreshTimer=setInterval(this.refreshControlResults,1e4)},stopRefreshTimer(){clearInterval(this.refreshTimer)},clearFilters(){this.filter.control_name=null,this.filter.type=null,this.filter.status=[]}},computed:{...(0,x.Se)(["getSearch"]),filteredControlResults(){const e=this.getSearch;var t=this.controlResults;return t=this.controlResults.filter((t=>{const o=!e||!!t.control_name&&t.control_name.toUpperCase().includes(e.toUpperCase()),l=!this.filter.control_name||t.control_name.toUpperCase().includes(this.filter.control_name.toUpperCase()),a=!this.filter.type||t.control_type===this.filter.type,n=!(this.filter.status&&this.filter.status.length>0)||this.filter.status.includes(t.status);return o&&l&&a&&n})),t},filteredControlResultsLen(){return this.filteredControlResults.length}},async mounted(){this.controlResults=await this.updateControlResults(),this.startRefreshTimer()},unmounted(){this.stopRefreshTimer()}};const ua=(0,O.Z)(ca,[["render",sa],["__scopeId","data-v-72a335b5"]]);var da=ua;$()(ca,"components",{QPage:B.Z,QAvatar:Ze.Z,QIcon:T.Z,QBtn:W.Z,QSelect:je.Z,QInput:A.Z,QTooltip:N.Z,QMarkupTable:ze.Z,QChip:pe.Z,QMenu:Be.Z,QList:Z.Z,QItem:Q.Z,QItemSection:R.Z,QSeparator:We.Z}),$()(ca,"directives",{ClosePopup:Ue.Z});const ma={key:0,class:"absolute-center"},pa=(0,m._)("div",{class:"text-overline"},"Please enter a valid token to connect to backend API",-1),fa={key:0,class:"text-red q-mt-md"},ha={key:1,class:"absolute-center"};function _a(e,t,o,a,n,i){const r=(0,m.up)("q-icon"),s=(0,m.up)("q-input"),c=(0,m.up)("q-toggle"),u=(0,m.up)("q-btn"),d=(0,m.up)("q-card-section"),p=(0,m.up)("q-card"),f=(0,m.up)("q-spinner-audio");return(0,m.wg)(),(0,m.iD)(m.HY,null,[n.tokenValidationInProgress?(0,m.kq)("",!0):((0,m.wg)(),(0,m.iD)("div",ma,[(0,m.Wm)(p,{class:"my-card"},{default:(0,m.w5)((()=>[(0,m.Wm)(d,{class:"column"},{default:(0,m.w5)((()=>[pa,(0,m.Wm)(s,{modelValue:n.token,"onUpdate:modelValue":t[1]||(t[1]=e=>n.token=e),outlined:"",type:n.isPwd?"password":"text",hint:"RAPO token",onKeyup:t[2]||(t[2]=(0,l.D2)((e=>i.connect(n.token)),["enter"])),autofocus:""},{append:(0,m.w5)((()=>[(0,m.Wm)(r,{name:n.isPwd?"visibility_off":"visibility",class:"cursor-pointer",onClick:t[0]||(t[0]=e=>n.isPwd=!n.isPwd)},null,8,["name"])])),_:1},8,["modelValue","type"]),(0,m.Wm)(c,{color:"teal",modelValue:n.rememberToken,"onUpdate:modelValue":t[3]||(t[3]=e=>n.rememberToken=e),label:"Remember token"},null,8,["modelValue"]),(0,m.Wm)(u,{color:"teal",label:"Connect",onClick:t[4]||(t[4]=e=>i.connect(n.token))}),n.connectError?((0,m.wg)(),(0,m.iD)("p",fa,"Error connecting. Check token and try again!")):(0,m.kq)("",!0)])),_:1})])),_:1})])),n.tokenValidationInProgress?((0,m.wg)(),(0,m.iD)("div",ha,[(0,m.Wm)(f,{color:"teal",size:"10em"})])):(0,m.kq)("",!0)],64)}var ga={data(){return{token:"",isPwd:!0,rememberToken:!1,connectError:!1,tokenValidationInProgress:!1,redirectPath:this.$route.query.redirect||"/controls",$q:(0,q.Z)()}},methods:{...(0,x.nv)(["validateToken","updateEnvVersion","updateEnvInfo"]),async connect(e){this.tokenValidationInProgress=!0;const t=await this.validateToken(e);t?(this.updateEnvVersion(),this.updateEnvInfo(),this.rememberToken&&this.$q.cookies.set("rapo_token",e,{SameSite:"Strict",expires:"365d"}),this.$router.push(this.redirectPath)):(this.connectError=!0,this.$q.cookies.remove("rapo_token")),this.tokenValidationInProgress=!1}},computed:{...(0,x.Se)(["getTokenIsValid"])},mounted(){if(this.$q.cookies.has("rapo_token")){const e=this.$q.cookies.get("rapo_token");this.connect(e)}}},ba=o(3876);const ya=(0,O.Z)(ga,[["render",_a]]);var wa=ya;$()(ga,"components",{QCard:Ve.Z,QCardSection:Oe.Z,QInput:A.Z,QIcon:T.Z,QToggle:De.Z,QBtn:W.Z,QSpinnerAudio:ba.Z});var Ca={updateSearch(e,t){e.search=t},updateEnvVersion(e,t){e.envVersion=t},updateEnvInfo(e,t){e.envInfo=t},updateHideSearch(e,t){e.hideSearch=t},updateControlCatalogue(e,t){e.controlCatalogue=t},updateControlResults(e,t){e.controlResults=t},updateTokenValue(e,t){e.tokenValue=t,e.tokenIsValid=!!t}},ka={async updateControlCatalogue(e){s.Z.start();try{const t=await fetch("/api/get-all-controls",{method:"GET",headers:{Authorization:`Bearer ${e.getters.getToken}`,"Content-Type":"application/json"}});if(!t.ok)throw new Error(`API error: ${t.statusText}`);const o=await t.json();return e.commit("updateControlCatalogue",o),o}catch(t){throw console.error("Failed to load controls:",t),t}finally{s.Z.stop()}},async updateControlResults(e){s.Z.start();try{const t=await fetch("/api/get-control-runs",{method:"GET",headers:{Authorization:`Bearer ${e.getters.getToken}`,"Content-Type":"application/json"}});if(!t.ok)throw new Error(`API error: ${t.statusText}`);const o=await t.json();return e.commit("updateControlResults",o),o}catch(t){throw console.error("Failed to load control runs:",t),t}finally{s.Z.stop()}},async updateEnvVersion(e){try{const t=await fetch("/api/version",{method:"GET",headers:{Authorization:`Bearer ${e.getters.getToken}`,"Content-Type":"application/json"}});if(!t.ok)throw new Error(`API error: ${t.statusText}`);const o=await t.json();return e.commit("updateEnvVersion",o),o}catch(t){throw console.error("Failed to load version:",t),t}finally{s.Z.stop()}},async updateEnvInfo(e){try{const t=await fetch("/api/info",{method:"GET",headers:{Authorization:`Bearer ${e.getters.getToken}`,"Content-Type":"application/json"}});if(!t.ok)throw new Error(`API error: ${t.statusText}`);const o=await t.json();return e.commit("updateEnvInfo",o),o}catch(t){throw console.error("Failed to load info:",t),t}finally{s.Z.stop()}},updateHideSearch(e,t){e.commit("updateHideSearch",t)},updateSearch(e,t){e.commit("updateSearch",t)},removeToken(e){e.commit("updateTokenValue","")},async validateToken(e,t){const o=await fetch("/api/help",{method:"GET",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}});return o.ok?(e.commit("updateTokenValue",t),!0):(e.commit("updateTokenValue",""),!1)}},va={getToken:e=>e.tokenValue,getTokenIsValid:e=>e.tokenIsValid,getSearch:e=>e.search,getEnvVersion:e=>e.envVersion,getEnvInfo:e=>e.envInfo,hideSearch:e=>e.hideSearch,controlCatalogue:e=>e.controlCatalogue,controlCatalogueLen:e=>e.controlCatalogue.length,controlCatalogueById:e=>t=>e.controlCatalogue.find((e=>e.control_id===Number(t))),filteredControlCatalogue:e=>{const t=e.search;var o=e.controlCatalogue;return t&&(o=o.filter((e=>!!e.control_name&&e.control_name.toUpperCase().indexOf(t.toUpperCase())>-1||!!e.control_desc&&e.control_desc.toUpperCase().indexOf(t.toUpperCase())>-1))),o},controlResults:e=>e.controlResults,controlResultsLen:e=>e.controlResults.length,filteredControlResults:e=>{const t=e.search;var o=e.controlResults;return t&&(o=o.filter((e=>e.control_name.toUpperCase().indexOf(t.toUpperCase())>-1))),o}};const xa=(0,x.MT)({state(){return{search:"",hideSearch:!1,controlCatalogue:[],controlResults:[],tokenIsValid:!1,tokenValue:"",envVersion:null,envInfo:null}},mutations:Ca,actions:ka,getters:va});var qa=xa;const Va=(0,J.p7)({scrollBehavior:(e,t,o)=>o||(e.hash?{selector:e.hash}:{top:0}),history:(0,J.PO)(),routes:[{path:"/",redirect:"/controls"},{name:"controls",path:"/controls",meta:{hideSearch:!1},component:Fe},{name:"results",path:"/results",meta:{hideSearch:!1},component:da},{name:"edit-control",path:"/edit-control/:controlId?",meta:{hideSearch:!0},component:zl,props:!0,beforeEnter:(e,t,o)=>{e.params.controlId?o():o({path:"/controls"})}},{name:"token",path:"/token",meta:{hideSearch:!0},component:wa},{path:"/:notfound(.*)",redirect:"/controls"}]});Va.beforeEach((function(e,t,o){qa.state.tokenIsValid||"token"===e.name?(e.meta.hideSearch?qa.state.hideSearch=!0:qa.state.hideSearch=!1,o()):o({path:"/token",query:{redirect:e.fullPath}})}));var Oa=Va;const ja=(0,l.ri)(H);ja.use(a.Z,d),ja.use(Oa),ja.use(qa),ja.mount("#app")}},t={};function o(l){var a=t[l];if(void 0!==a)return a.exports;var n=t[l]={exports:{}};return e[l].call(n.exports,n,n.exports,o),n.exports}o.m=e,function(){var e=[];o.O=function(t,l,a,n){if(!l){var i=1/0;for(u=0;u<e.length;u++){l=e[u][0],a=e[u][1],n=e[u][2];for(var r=!0,s=0;s<l.length;s++)(!1&n||i>=n)&&Object.keys(o.O).every((function(e){return o.O[e](l[s])}))?l.splice(s--,1):(r=!1,n<i&&(i=n));if(r){e.splice(u--,1);var c=a();void 0!==c&&(t=c)}}return t}n=n||0;for(var u=e.length;u>0&&e[u-1][2]>n;u--)e[u]=e[u-1];e[u]=[l,a,n]}}(),function(){o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,{a:t}),t}}(),function(){o.d=function(e,t){for(var l in t)o.o(t,l)&&!o.o(e,l)&&Object.defineProperty(e,l,{enumerable:!0,get:t[l]})}}(),function(){o.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={143:0};o.O.j=function(t){return 0===e[t]};var t=function(t,l){var a,n,i=l[0],r=l[1],s=l[2],c=0;if(i.some((function(t){return 0!==e[t]}))){for(a in r)o.o(r,a)&&(o.m[a]=r[a]);if(s)var u=s(o)}for(t&&t(l);c<i.length;c++)n=i[c],o.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return o.O(u)},l=self["webpackChunkrapo_ui"]=self["webpackChunkrapo_ui"]||[];l.forEach(t.bind(null,0)),l.push=t.bind(null,l.push.bind(l))}();var l=o.O(void 0,[998],(function(){return o(3212)}));l=o.O(l)})();
//# sourceMappingURL=app.e11d27b6.js.map